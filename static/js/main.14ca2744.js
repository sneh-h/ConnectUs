/*! For license information please see main.14ca2744.js.LICENSE.txt */
(()=>{var e={4:(e,t,n)=>{"use strict";var i=n(853),r=n(43),s=n(950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function h(e){if(l(e)!==e)throw Error(o(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),w=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),C=Symbol.for("react.lazy");Symbol.for("react.scope");var T=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var I=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var N=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var A=Symbol.for("react.client.reference");function L(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===A?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case v:return"Fragment";case y:return"Profiler";case _:return"StrictMode";case S:return"Suspense";case x:return"SuspenseList";case T:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case w:return e.displayName||"Context";case b:return(e._context.displayName||"Context")+".Consumer";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:L(e.type)||"Memo";case C:t=e._payload,e=e._init;try{return L(e(t))}catch(n){}}return null}var R=Array.isArray,O=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D={pending:!1,data:null,method:null,action:null},j=[],F=-1;function z(e){return{current:e}}function U(e){0>F||(e.current=j[F],j[F]=null,F--)}function V(e,t){F++,j[F]=e.current,e.current=t}var B,H,q=z(null),W=z(null),Z=z(null),K=z(null);function G(e,t){switch(V(Z,t),V(W,e),V(q,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?vh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=_h(t=vh(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(q),V(q,e)}function Y(){U(q),U(W),U(Z)}function Q(e){null!==e.memoizedState&&V(K,e);var t=q.current,n=_h(t,e.type);t!==n&&(V(W,e),V(q,n))}function $(e){W.current===e&&(U(q),U(W)),K.current===e&&(U(K),ud._currentValue=D)}function J(e){if(void 0===B)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||"",H=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+B+e+H}var X=!1;function ee(e,t){if(!e||X)return"";X=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(r){var i=r}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){i=s}e.call(n.prototype)}}else{try{throw Error()}catch(o){i=o}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(a){if(a&&i&&"string"===typeof a.stack)return[a.stack,i.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),o=s[0],a=s[1];if(o&&a){var l=o.split("\n"),c=a.split("\n");for(r=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(i===l.length||r===c.length)for(i=l.length-1,r=c.length-1;1<=i&&0<=r&&l[i]!==c[r];)r--;for(;1<=i&&0<=r;i--,r--)if(l[i]!==c[r]){if(1!==i||1!==r)do{if(i--,0>--r||l[i]!==c[r]){var u="\n"+l[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=i&&0<=r);break}}}finally{X=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?J(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return J(e.type);case 16:return J("Lazy");case 13:return e.child!==t&&null!==t?J("Suspense Fallback"):J("Suspense");case 19:return J("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return J("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(i){return"\nError generating stack: "+i.message+"\n"+i.stack}}var ie=Object.prototype.hasOwnProperty,re=i.unstable_scheduleCallback,se=i.unstable_cancelCallback,oe=i.unstable_shouldYield,ae=i.unstable_requestPaint,le=i.unstable_now,ce=i.unstable_getCurrentPriorityLevel,ue=i.unstable_ImmediatePriority,he=i.unstable_UserBlockingPriority,de=i.unstable_NormalPriority,fe=i.unstable_LowPriority,pe=i.unstable_IdlePriority,me=i.log,ge=i.unstable_setDisableYieldValue,ve=null,_e=null;function ye(e){if("function"===typeof me&&ge(e),_e&&"function"===typeof _e.setStrictMode)try{_e.setStrictMode(ve,e)}catch(t){}}var be=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(we(e)/Ee|0)|0},we=Math.log,Ee=Math.LN2;var Se=256,xe=262144,ke=4194304;function Ce(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Te(e,t,n){var i=e.pendingLanes;if(0===i)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var a=134217727&i;return 0!==a?0!==(i=a&~s)?r=Ce(i):0!==(o&=a)?r=Ce(o):n||0!==(n=a&~e)&&(r=Ce(n)):0!==(a=i&~s)?r=Ce(a):0!==o?r=Ce(o):n||0!==(n=i&~e)&&(r=Ce(n)),0===r?0:0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(n=t&-t)||32===s&&0!==(4194048&n))?t:r}function Ie(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ne(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Pe(){var e=ke;return 0===(62914560&(ke<<=1))&&(ke=4194304),e}function Ae(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Le(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Re(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-be(t);e.entangledLanes|=t,e.entanglements[i]=1073741824|e.entanglements[i]|261930&n}function Oe(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-be(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function Me(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:De(n))&(e.suspendedLanes|t))?0:n}function De(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function je(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Fe(){var e=M.p;return 0!==e?e:void 0===(e=window.event)?32:Cd(e.type)}function ze(e,t){var n=M.p;try{return M.p=e,t()}finally{M.p=n}}var Ue=Math.random().toString(36).slice(2),Ve="__reactFiber$"+Ue,Be="__reactProps$"+Ue,He="__reactContainer$"+Ue,qe="__reactEvents$"+Ue,We="__reactListeners$"+Ue,Ze="__reactHandles$"+Ue,Ke="__reactResources$"+Ue,Ge="__reactMarker$"+Ue;function Ye(e){delete e[Ve],delete e[Be],delete e[qe],delete e[We],delete e[Ze]}function Qe(e){var t=e[Ve];if(t)return t;for(var n=e.parentNode;n;){if(t=n[He]||n[Ve]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Dh(e);null!==e;){if(n=e[Ve])return n;e=Dh(e)}return t}n=(e=n).parentNode}return null}function $e(e){if(e=e[Ve]||e[He]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Je(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function Xe(e){var t=e[Ke];return t||(t=e[Ke]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Ge]=!0}var tt=new Set,nt={};function it(e,t){rt(e,t),rt(e+"Capture",t)}function rt(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var st=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ot={},at={};function lt(e,t,n){if(r=t,ie.call(at,r)||!ie.call(ot,r)&&(st.test(r)?at[r]=!0:(ot[r]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var i=t.toLowerCase().slice(0,5);if("data-"!==i&&"aria-"!==i)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var r}function ct(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ut(e,t,n,i){if(null===i)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+i)}}function ht(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function dt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){if(!e._valueTracker){var t=dt(e)?"checked":"value";e._valueTracker=function(e,t,n){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var r=i.get,s=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function pt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=dt(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function vt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function _t(e,t,n,i,r,s,o,a){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ht(t)):e.value!==""+ht(t)&&(e.value=""+ht(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?bt(e,o,ht(t)):null!=n?bt(e,o,ht(n)):null!=i&&e.removeAttribute("value"),null==r&&null!=s&&(e.defaultChecked=!!s),null!=r&&(e.checked=r&&"function"!==typeof r&&"symbol"!==typeof r),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ht(a):e.removeAttribute("name")}function yt(e,t,n,i,r,s,o,a){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return void ft(e);n=null!=n?""+ht(n):"",t=null!=t?""+ht(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}i="function"!==typeof(i=null!=i?i:r)&&"symbol"!==typeof i&&!!i,e.checked=a?e.checked:!!i,e.defaultChecked=!!i,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o),ft(e)}function bt(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function wt(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+ht(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function Et(e,t,n){null==t||((t=""+ht(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ht(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function St(e,t,n,i){if(null==t){if(null!=i){if(null!=n)throw Error(o(92));if(R(i)){if(1<i.length)throw Error(o(93));i=i[0]}n=i}null==n&&(n=""),t=n}n=ht(t),e.defaultValue=n,(i=e.textContent)===n&&""!==i&&null!==i&&(e.value=i),ft(e)}function xt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var kt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ct(e,t,n){var i=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?i?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":i?e.setProperty(t,n):"number"!==typeof n||0===n||kt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Tt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var i in n)!n.hasOwnProperty(i)||null!=t&&t.hasOwnProperty(i)||(0===i.indexOf("--")?e.setProperty(i,""):"float"===i?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&Ct(e,r,i)}else for(var s in t)t.hasOwnProperty(s)&&Ct(e,s,t[s])}function It(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function At(e){return Pt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Lt(){}var Rt=null;function Ot(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Mt=null,Dt=null;function jt(e){var t=$e(e);if(t&&(e=t.stateNode)){var n=e[Be]||null;e:switch(e=t.stateNode,t.type){case"input":if(_t(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+vt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[Be]||null;if(!r)throw Error(o(90));_t(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)(i=n[t]).form===e.form&&pt(i)}break e;case"textarea":Et(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&wt(e,!!n.multiple,t,!1)}}}var Ft=!1;function zt(e,t,n){if(Ft)return e(t,n);Ft=!0;try{return e(t)}finally{if(Ft=!1,(null!==Mt||null!==Dt)&&(Xc(),Mt&&(t=Mt,e=Dt,Dt=Mt=null,jt(t),e)))for(t=0;t<e.length;t++)jt(e[t])}}function Ut(e,t){var n=e.stateNode;if(null===n)return null;var i=n[Be]||null;if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Vt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Bt=!1;if(Vt)try{var Ht={};Object.defineProperty(Ht,"passive",{get:function(){Bt=!0}}),window.addEventListener("test",Ht,Ht),window.removeEventListener("test",Ht,Ht)}catch($d){Bt=!1}var qt=null,Wt=null,Zt=null;function Kt(){if(Zt)return Zt;var e,t,n=Wt,i=n.length,r="value"in qt?qt.value:qt.textContent,s=r.length;for(e=0;e<i&&n[e]===r[e];e++);var o=i-e;for(t=1;t<=o&&n[i-t]===r[s-t];t++);return Zt=r.slice(e,1<t?1-t:void 0)}function Gt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Yt(){return!0}function Qt(){return!1}function $t(e){function t(t,n,i,r,s){for(var o in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?Yt:Qt,this.isPropagationStopped=Qt,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Yt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Yt)},persist:function(){},isPersistent:Yt}),t}var Jt,Xt,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=$t(tn),rn=f({},tn,{view:0,detail:0}),sn=$t(rn),on=f({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?(Jt=e.screenX-en.screenX,Xt=e.screenY-en.screenY):Xt=Jt=0,en=e),Jt)},movementY:function(e){return"movementY"in e?e.movementY:Xt}}),an=$t(on),ln=$t(f({},on,{dataTransfer:0})),cn=$t(f({},rn,{relatedTarget:0})),un=$t(f({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),hn=$t(f({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),dn=$t(f({},tn,{data:0})),fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=mn[e])&&!!t[e]}function vn(){return gn}var _n=$t(f({},rn,{key:function(e){if(e.key){var t=fn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Gt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?pn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vn,charCode:function(e){return"keypress"===e.type?Gt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Gt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),yn=$t(f({},on,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),bn=$t(f({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vn})),wn=$t(f({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),En=$t(f({},on,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Sn=$t(f({},tn,{newState:0,oldState:0})),xn=[9,13,27,32],kn=Vt&&"CompositionEvent"in window,Cn=null;Vt&&"documentMode"in document&&(Cn=document.documentMode);var Tn=Vt&&"TextEvent"in window&&!Cn,In=Vt&&(!kn||Cn&&8<Cn&&11>=Cn),Nn=String.fromCharCode(32),Pn=!1;function An(e,t){switch(e){case"keyup":return-1!==xn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ln(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Rn=!1;var On={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!On[e.type]:"textarea"===t}function Dn(e,t,n,i){Mt?Dt?Dt.push(i):Dt=[i]:Mt=i,0<(t=ih(t,"onChange")).length&&(n=new nn("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var jn=null,Fn=null;function zn(e){Yu(e,0)}function Un(e){if(pt(Je(e)))return e}function Vn(e,t){if("change"===e)return t}var Bn=!1;if(Vt){var Hn;if(Vt){var qn="oninput"in document;if(!qn){var Wn=document.createElement("div");Wn.setAttribute("oninput","return;"),qn="function"===typeof Wn.oninput}Hn=qn}else Hn=!1;Bn=Hn&&(!document.documentMode||9<document.documentMode)}function Zn(){jn&&(jn.detachEvent("onpropertychange",Kn),Fn=jn=null)}function Kn(e){if("value"===e.propertyName&&Un(Fn)){var t=[];Dn(t,Fn,e,Ot(e)),zt(zn,t)}}function Gn(e,t,n){"focusin"===e?(Zn(),Fn=n,(jn=t).attachEvent("onpropertychange",Kn)):"focusout"===e&&Zn()}function Yn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Un(Fn)}function Qn(e,t){if("click"===e)return Un(t)}function $n(e,t){if("input"===e||"change"===e)return Un(t)}var Jn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Xn(e,t){if(Jn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!ie.call(t,r)||!Jn(e[r],t[r]))return!1}return!0}function ei(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ti(e,t){var n,i=ei(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ei(i)}}function ni(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ni(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ii(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function ri(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var si=Vt&&"documentMode"in document&&11>=document.documentMode,oi=null,ai=null,li=null,ci=!1;function ui(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ci||null==oi||oi!==mt(i)||("selectionStart"in(i=oi)&&ri(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},li&&Xn(li,i)||(li=i,0<(i=ih(ai,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=oi)))}function hi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var di={animationend:hi("Animation","AnimationEnd"),animationiteration:hi("Animation","AnimationIteration"),animationstart:hi("Animation","AnimationStart"),transitionrun:hi("Transition","TransitionRun"),transitionstart:hi("Transition","TransitionStart"),transitioncancel:hi("Transition","TransitionCancel"),transitionend:hi("Transition","TransitionEnd")},fi={},pi={};function mi(e){if(fi[e])return fi[e];if(!di[e])return e;var t,n=di[e];for(t in n)if(n.hasOwnProperty(t)&&t in pi)return fi[e]=n[t];return e}Vt&&(pi=document.createElement("div").style,"AnimationEvent"in window||(delete di.animationend.animation,delete di.animationiteration.animation,delete di.animationstart.animation),"TransitionEvent"in window||delete di.transitionend.transition);var gi=mi("animationend"),vi=mi("animationiteration"),_i=mi("animationstart"),yi=mi("transitionrun"),bi=mi("transitionstart"),wi=mi("transitioncancel"),Ei=mi("transitionend"),Si=new Map,xi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ki(e,t){Si.set(e,t),it(t,[e])}xi.push("scrollEnd");var Ci="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Ti=[],Ii=0,Ni=0;function Pi(){for(var e=Ii,t=Ni=Ii=0;t<e;){var n=Ti[t];Ti[t++]=null;var i=Ti[t];Ti[t++]=null;var r=Ti[t];Ti[t++]=null;var s=Ti[t];if(Ti[t++]=null,null!==i&&null!==r){var o=i.pending;null===o?r.next=r:(r.next=o.next,o.next=r),i.pending=r}0!==s&&Oi(n,r,s)}}function Ai(e,t,n,i){Ti[Ii++]=e,Ti[Ii++]=t,Ti[Ii++]=n,Ti[Ii++]=i,Ni|=i,e.lanes|=i,null!==(e=e.alternate)&&(e.lanes|=i)}function Li(e,t,n,i){return Ai(e,t,n,i),Mi(e)}function Ri(e,t){return Ai(e,null,null,t),Mi(e)}function Oi(e,t,n){e.lanes|=n;var i=e.alternate;null!==i&&(i.lanes|=n);for(var r=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(i=s.alternate)&&(i.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(r=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,r&&null!==t&&(r=31-be(n),null===(i=(e=s.hiddenUpdates)[r])?e[r]=[t]:i.push(t),t.lane=536870912|n),s):null}function Mi(e){if(50<qc)throw qc=0,Wc=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Di={};function ji(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fi(e,t,n,i){return new ji(e,t,n,i)}function zi(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ui(e,t){var n=e.alternate;return null===n?((n=Fi(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Vi(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Bi(e,t,n,i,r,s){var a=0;if(i=e,"function"===typeof e)zi(e)&&(a=1);else if("string"===typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,q.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case T:return(e=Fi(31,n,t,r)).elementType=T,e.lanes=s,e;case v:return Hi(n.children,r,s,t);case _:a=8,r|=24;break;case y:return(e=Fi(12,n,t,2|r)).elementType=y,e.lanes=s,e;case S:return(e=Fi(13,n,t,r)).elementType=S,e.lanes=s,e;case x:return(e=Fi(19,n,t,r)).elementType=x,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case w:a=10;break e;case b:a=9;break e;case E:a=11;break e;case k:a=14;break e;case C:a=16,i=null;break e}a=29,n=Error(o(130,null===e?"null":typeof e,"")),i=null}return(t=Fi(a,n,t,r)).elementType=e,t.type=i,t.lanes=s,t}function Hi(e,t,n,i){return(e=Fi(7,e,i,t)).lanes=n,e}function qi(e,t,n){return(e=Fi(6,e,null,t)).lanes=n,e}function Wi(e){var t=Fi(18,null,null,0);return t.stateNode=e,t}function Zi(e,t,n){return(t=Fi(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ki=new WeakMap;function Gi(e,t){if("object"===typeof e&&null!==e){var n=Ki.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},Ki.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Yi=[],Qi=0,$i=null,Ji=0,Xi=[],er=0,tr=null,nr=1,ir="";function rr(e,t){Yi[Qi++]=Ji,Yi[Qi++]=$i,$i=e,Ji=t}function sr(e,t,n){Xi[er++]=nr,Xi[er++]=ir,Xi[er++]=tr,tr=e;var i=nr;e=ir;var r=32-be(i)-1;i&=~(1<<r),n+=1;var s=32-be(t)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,nr=1<<32-be(t)+r|n<<r|i,ir=s+e}else nr=1<<s|n<<r|i,ir=e}function or(e){null!==e.return&&(rr(e,1),sr(e,1,0))}function ar(e){for(;e===$i;)$i=Yi[--Qi],Yi[Qi]=null,Ji=Yi[--Qi],Yi[Qi]=null;for(;e===tr;)tr=Xi[--er],Xi[er]=null,ir=Xi[--er],Xi[er]=null,nr=Xi[--er],Xi[er]=null}function lr(e,t){Xi[er++]=nr,Xi[er++]=ir,Xi[er++]=tr,nr=t.id,ir=t.overflow,tr=e}var cr=null,ur=null,hr=!1,dr=null,fr=!1,pr=Error(o(519));function mr(e){throw wr(Gi(Error(o(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),pr}function gr(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Ve]=e,t[Be]=i,n){case"dialog":Qu("cancel",t),Qu("close",t);break;case"iframe":case"object":case"embed":Qu("load",t);break;case"video":case"audio":for(n=0;n<Ku.length;n++)Qu(Ku[n],t);break;case"source":Qu("error",t);break;case"img":case"image":case"link":Qu("error",t),Qu("load",t);break;case"details":Qu("toggle",t);break;case"input":Qu("invalid",t),yt(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":Qu("invalid",t);break;case"textarea":Qu("invalid",t),St(t,i.value,i.defaultValue,i.children)}"string"!==typeof(n=i.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===i.suppressHydrationWarning||ch(t.textContent,n)?(null!=i.popover&&(Qu("beforetoggle",t),Qu("toggle",t)),null!=i.onScroll&&Qu("scroll",t),null!=i.onScrollEnd&&Qu("scrollend",t),null!=i.onClick&&(t.onclick=Lt),t=!0):t=!1,t||mr(e,!0)}function vr(e){for(cr=e.return;cr;)switch(cr.tag){case 5:case 31:case 13:return void(fr=!1);case 27:case 3:return void(fr=!0);default:cr=cr.return}}function _r(e){if(e!==cr)return!1;if(!hr)return vr(e),hr=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||yh(e.type,e.memoizedProps)),t=!t),t&&ur&&mr(e),vr(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));ur=Mh(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));ur=Mh(e)}else 27===n?(n=ur,Ch(e.type)?(e=Oh,Oh=null,ur=e):ur=n):ur=cr?Rh(e.stateNode.nextSibling):null;return!0}function yr(){ur=cr=null,hr=!1}function br(){var e=dr;return null!==e&&(null===Pc?Pc=e:Pc.push.apply(Pc,e),dr=null),e}function wr(e){null===dr?dr=[e]:dr.push(e)}var Er=z(null),Sr=null,xr=null;function kr(e,t,n){V(Er,t._currentValue),t._currentValue=n}function Cr(e){e._currentValue=Er.current,U(Er)}function Tr(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Ir(e,t,n,i){var r=e.child;for(null!==r&&(r.return=e);null!==r;){var s=r.dependencies;if(null!==s){var a=r.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=r;for(var c=0;c<t.length;c++)if(l.context===t[c]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Tr(s.return,n,e),i||(a=null);break e}s=l.next}}else if(18===r.tag){if(null===(a=r.return))throw Error(o(341));a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),Tr(a,n,e),a=null}else a=r.child;if(null!==a)a.return=r;else for(a=r;null!==a;){if(a===e){a=null;break}if(null!==(r=a.sibling)){r.return=a.return,a=r;break}a=a.return}r=a}}function Nr(e,t,n,i){e=null;for(var r=t,s=!1;null!==r;){if(!s)if(0!==(524288&r.flags))s=!0;else if(0!==(262144&r.flags))break;if(10===r.tag){var a=r.alternate;if(null===a)throw Error(o(387));if(null!==(a=a.memoizedProps)){var l=r.type;Jn(r.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(r===K.current){if(null===(a=r.alternate))throw Error(o(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(null!==e?e.push(ud):e=[ud])}r=r.return}null!==e&&Ir(t,e,n,i),t.flags|=262144}function Pr(e){for(e=e.firstContext;null!==e;){if(!Jn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ar(e){Sr=e,xr=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Lr(e){return Or(Sr,e)}function Rr(e,t){return null===Sr&&Ar(e),Or(e,t)}function Or(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===xr){if(null===e)throw Error(o(308));xr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else xr=xr.next=t;return n}var Mr="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Dr=i.unstable_scheduleCallback,jr=i.unstable_NormalPriority,Fr={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zr(){return{controller:new Mr,data:new Map,refCount:0}}function Ur(e){e.refCount--,0===e.refCount&&Dr(jr,function(){e.controller.abort()})}var Vr=null,Br=0,Hr=0,qr=null;function Wr(){if(0===--Br&&null!==Vr){null!==qr&&(qr.status="fulfilled");var e=Vr;Vr=null,Hr=0,qr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Zr=O.S;O.S=function(e,t){Rc=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Vr){var n=Vr=[];Br=0,Hr=Bu(),qr={status:"pending",value:void 0,then:function(e){n.push(e)}}}Br++,t.then(Wr,Wr)}(0,t),null!==Zr&&Zr(e,t)};var Kr=z(null);function Gr(){var e=Kr.current;return null!==e?e:pc.pooledCache}function Yr(e,t){V(Kr,null===t?Kr.current:t.pool)}function Qr(){var e=Gr();return null===e?null:{parent:Fr._currentValue,pool:e}}var $r=Error(o(460)),Jr=Error(o(474)),Xr=Error(o(542)),es={then:function(){}};function ts(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ns(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Lt,Lt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw os(e=t.reason),e;default:if("string"===typeof t.status)t.then(Lt,Lt);else{if(null!==(e=pc)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw os(e=t.reason),e}throw rs=t,$r}}function is(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"===typeof t&&"function"===typeof t.then)throw rs=t,$r;throw t}}var rs=null;function ss(){if(null===rs)throw Error(o(459));var e=rs;return rs=null,e}function os(e){if(e===$r||e===Xr)throw Error(o(483))}var as=null,ls=0;function cs(e){var t=ls;return ls+=1,null===as&&(as=[]),ns(as,e,t)}function us(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function hs(e,t){if(t.$$typeof===p)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ds(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(e,t){return(e=Ui(e,t)).index=0,e.sibling=null,e}function s(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=67108866,n):i:(t.flags|=67108866,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=qi(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var s=n.type;return s===v?h(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===C&&is(s)===t.type)?(us(t=r(t,n.props),n),t.return=e,t):(us(t=Bi(n.type,n.key,n.props,null,e.mode,i),n),t.return=e,t)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Zi(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function h(e,t,n,i,s){return null===t||7!==t.tag?((t=Hi(n,e.mode,i,s)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=qi(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return us(n=Bi(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Zi(t,e.mode,n)).return=e,t;case C:return d(e,t=is(t),n)}if(R(t)||P(t))return(t=Hi(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return d(e,cs(t),n);if(t.$$typeof===w)return d(e,Rr(e,t),n);hs(e,t)}return null}function f(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===r?c(e,t,n,i):null;case g:return n.key===r?u(e,t,n,i):null;case C:return f(e,t,n=is(n),i)}if(R(n)||P(n))return null!==r?null:h(e,t,n,i,null);if("function"===typeof n.then)return f(e,t,cs(n),i);if(n.$$typeof===w)return f(e,t,Rr(e,n),i);hs(e,n)}return null}function p(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i||"bigint"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case m:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case g:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case C:return p(e,t,n,i=is(i),r)}if(R(i)||P(i))return h(t,e=e.get(n)||null,i,r,null);if("function"===typeof i.then)return p(e,t,n,cs(i),r);if(i.$$typeof===w)return p(e,t,n,Rr(t,i),r);hs(t,i)}return null}function _(l,c,u,h){if("object"===typeof u&&null!==u&&u.type===v&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case m:e:{for(var y=u.key;null!==c;){if(c.key===y){if((y=u.type)===v){if(7===c.tag){n(l,c.sibling),(h=r(c,u.props.children)).return=l,l=h;break e}}else if(c.elementType===y||"object"===typeof y&&null!==y&&y.$$typeof===C&&is(y)===c.type){n(l,c.sibling),us(h=r(c,u.props),u),h.return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===v?((h=Hi(u.props.children,l.mode,h,u.key)).return=l,l=h):(us(h=Bi(u.type,u.key,u.props,null,l.mode,h),u),h.return=l,l=h)}return a(l);case g:e:{for(y=u.key;null!==c;){if(c.key===y){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(h=r(c,u.children||[])).return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}(h=Zi(u,l.mode,h)).return=l,l=h}return a(l);case C:return _(l,c,u=is(u),h)}if(R(u))return function(r,o,a,l){for(var c=null,u=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(r,h,a[m],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(r,h),o=s(v,o,m),null===u?c=v:u.sibling=v,u=v,h=g}if(m===a.length)return n(r,h),hr&&rr(r,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(r,a[m],l))&&(o=s(h,o,m),null===u?c=h:u.sibling=h,u=h);return hr&&rr(r,m),c}for(h=i(h);m<a.length;m++)null!==(g=p(h,r,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach(function(e){return t(r,e)}),hr&&rr(r,m),c}(l,c,u,h);if(P(u)){if("function"!==typeof(y=P(u)))throw Error(o(150));return function(r,a,l,c){if(null==l)throw Error(o(151));for(var u=null,h=null,m=a,g=a=0,v=null,_=l.next();null!==m&&!_.done;g++,_=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var y=f(r,m,_.value,c);if(null===y){null===m&&(m=v);break}e&&m&&null===y.alternate&&t(r,m),a=s(y,a,g),null===h?u=y:h.sibling=y,h=y,m=v}if(_.done)return n(r,m),hr&&rr(r,g),u;if(null===m){for(;!_.done;g++,_=l.next())null!==(_=d(r,_.value,c))&&(a=s(_,a,g),null===h?u=_:h.sibling=_,h=_);return hr&&rr(r,g),u}for(m=i(m);!_.done;g++,_=l.next())null!==(_=p(m,r,g,_.value,c))&&(e&&null!==_.alternate&&m.delete(null===_.key?g:_.key),a=s(_,a,g),null===h?u=_:h.sibling=_,h=_);return e&&m.forEach(function(e){return t(r,e)}),hr&&rr(r,g),u}(l,c,u=y.call(u),h)}if("function"===typeof u.then)return _(l,c,cs(u),h);if(u.$$typeof===w)return _(l,c,Rr(l,u),h);hs(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(h=r(c,u)).return=l,l=h):(n(l,c),(h=qi(u,l.mode,h)).return=l,l=h),a(l)):n(l,c)}return function(e,t,n,i){try{ls=0;var r=_(e,t,n,i);return as=null,r}catch(o){if(o===$r||o===Xr)throw o;var s=Fi(29,o,null,e.mode);return s.lanes=i,s.return=e,s}}}var fs=ds(!0),ps=ds(!1),ms=!1;function gs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function _s(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ys(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&fc)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=Mi(e),Oi(e,null,n),t}return Ai(e,i,t,n),Mi(e)}function bs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Oe(e,n)}}function ws(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?r=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Es=!1;function Ss(){if(Es){if(null!==qr)throw qr}}function xs(e,t,n,i){Es=!1;var r=e.updateQueue;ms=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=r.baseState;for(o=0,u=c=l=null,a=s;;){var d=-536870913&a.lane,p=d!==a.lane;if(p?(gc&d)===d:(i&d)===d){0!==d&&d===Hr&&(Es=!0),null!==u&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var m=e,g=a;d=t;var v=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){h=m.call(v,h,d);break e}h=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(d="function"===typeof(m=g.payload)?m.call(v,h,d):m)||void 0===d)break e;h=f({},h,d);break e;case 2:ms=!0}}null!==(d=a.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=r.callbacks)?r.callbacks=[d]:p.push(d))}else p={lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,o|=d;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(p=a).next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}null===u&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null===s&&(r.shared.lanes=0),xc|=o,e.lanes=o,e.memoizedState=h}}function ks(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function Cs(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)ks(n[e],t)}var Ts=z(null),Is=z(0);function Ns(e,t){V(Is,e=Ec),V(Ts,t),Ec=e|t.baseLanes}function Ps(){V(Is,Ec),V(Ts,Ts.current)}function As(){Ec=Is.current,U(Ts),U(Is)}var Ls=z(null),Rs=null;function Os(e){var t=e.alternate;V(zs,1&zs.current),V(Ls,e),null===Rs&&(null===t||null!==Ts.current||null!==t.memoizedState)&&(Rs=e)}function Ms(e){V(zs,zs.current),V(Ls,e),null===Rs&&(Rs=e)}function Ds(e){22===e.tag?(V(zs,zs.current),V(Ls,e),null===Rs&&(Rs=e)):js()}function js(){V(zs,zs.current),V(Ls,Ls.current)}function Fs(e){U(Ls),Rs===e&&(Rs=null),U(zs)}var zs=z(0);function Us(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Ah(n)||Lh(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Vs=0,Bs=null,Hs=null,qs=null,Ws=!1,Zs=!1,Ks=!1,Gs=0,Ys=0,Qs=null,$s=0;function Js(){throw Error(o(321))}function Xs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Jn(e[n],t[n]))return!1;return!0}function eo(e,t,n,i,r,s){return Vs=s,Bs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=null===e||null===e.memoizedState?ga:va,Ks=!1,s=n(i,r),Ks=!1,Zs&&(s=no(t,n,i,r)),to(e),s}function to(e){O.H=ma;var t=null!==Hs&&null!==Hs.next;if(Vs=0,qs=Hs=Bs=null,Ws=!1,Ys=0,Qs=null,t)throw Error(o(300));null===e||Ra||null!==(e=e.dependencies)&&Pr(e)&&(Ra=!0)}function no(e,t,n,i){Bs=e;var r=0;do{if(Zs&&(Qs=null),Ys=0,Zs=!1,25<=r)throw Error(o(301));if(r+=1,qs=Hs=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}O.H=_a,s=t(n,i)}while(Zs);return s}function io(){var e=O.H,t=e.useState()[0];return t="function"===typeof t.then?co(t):t,e=e.useState()[0],(null!==Hs?Hs.memoizedState:null)!==e&&(Bs.flags|=1024),t}function ro(){var e=0!==Gs;return Gs=0,e}function so(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function oo(e){if(Ws){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ws=!1}Vs=0,qs=Hs=Bs=null,Zs=!1,Ys=Gs=0,Qs=null}function ao(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===qs?Bs.memoizedState=qs=e:qs=qs.next=e,qs}function lo(){if(null===Hs){var e=Bs.alternate;e=null!==e?e.memoizedState:null}else e=Hs.next;var t=null===qs?Bs.memoizedState:qs.next;if(null!==t)qs=t,Hs=e;else{if(null===e){if(null===Bs.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(Hs=e).memoizedState,baseState:Hs.baseState,baseQueue:Hs.baseQueue,queue:Hs.queue,next:null},null===qs?Bs.memoizedState=qs=e:qs=qs.next=e}return qs}function co(e){var t=Ys;return Ys+=1,null===Qs&&(Qs=[]),e=ns(Qs,e,t),t=Bs,null===(null===qs?t.memoizedState:qs.next)&&(t=t.alternate,O.H=null===t||null===t.memoizedState?ga:va),e}function uo(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return co(e);if(e.$$typeof===w)return Lr(e)}throw Error(o(438,String(e)))}function ho(e){var t=null,n=Bs.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var i=Bs.alternate;null!==i&&(null!==(i=i.updateQueue)&&(null!=(i=i.memoCache)&&(t={data:i.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Bs.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=I;return t.index++,n}function fo(e,t){return"function"===typeof t?t(e):t}function po(e){return mo(lo(),Hs,e)}function mo(e,t,n){var i=e.queue;if(null===i)throw Error(o(311));i.lastRenderedReducer=n;var r=e.baseQueue,s=i.pending;if(null!==s){if(null!==r){var a=r.next;r.next=s.next,s.next=a}t.baseQueue=r=s,i.pending=null}if(s=e.baseState,null===r)e.memoizedState=s;else{var l=a=null,c=null,u=t=r.next,h=!1;do{var d=-536870913&u.lane;if(d!==u.lane?(gc&d)===d:(Vs&d)===d){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===Hr&&(h=!0);else{if((Vs&f)===f){u=u.next,f===Hr&&(h=!0);continue}d={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=d,a=s):c=c.next=d,Bs.lanes|=f,xc|=f}d=u.action,Ks&&n(s,d),s=u.hasEagerState?u.eagerState:n(s,d)}else f={lane:d,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,a=s):c=c.next=f,Bs.lanes|=d,xc|=d;u=u.next}while(null!==u&&u!==t);if(null===c?a=s:c.next=l,!Jn(s,e.memoizedState)&&(Ra=!0,h&&null!==(n=qr)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=c,i.lastRenderedState=s}return null===r&&(i.lanes=0),[e.memoizedState,i.dispatch]}function go(e){var t=lo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{s=e(s,a.action),a=a.next}while(a!==r);Jn(s,t.memoizedState)||(Ra=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function vo(e,t,n){var i=Bs,r=lo(),s=hr;if(s){if(void 0===n)throw Error(o(407));n=n()}else n=t();var a=!Jn((Hs||r).memoizedState,n);if(a&&(r.memoizedState=n,Ra=!0),r=r.queue,Bo(bo.bind(null,i,r,e),[e]),r.getSnapshot!==t||a||null!==qs&&1&qs.memoizedState.tag){if(i.flags|=2048,jo(9,{destroy:void 0},yo.bind(null,i,r,n,t),null),null===pc)throw Error(o(349));s||0!==(127&Vs)||_o(i,t,n)}return n}function _o(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Bs.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Bs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function yo(e,t,n,i){t.value=n,t.getSnapshot=i,wo(t)&&Eo(e)}function bo(e,t,n){return n(function(){wo(t)&&Eo(e)})}function wo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Jn(e,n)}catch(i){return!0}}function Eo(e){var t=Ri(e,2);null!==t&&Gc(t,e,2)}function So(e){var t=ao();if("function"===typeof e){var n=e;if(e=n(),Ks){ye(!0);try{n()}finally{ye(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:e},t}function xo(e,t,n,i){return e.baseState=n,mo(e,Hs,"function"===typeof i?i:fo)}function ko(e,t,n,i,r){if(da(e))throw Error(o(485));if(null!==(e=t.action)){var s={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==O.T?n(!0):s.isTransition=!1,i(s),null===(n=t.pending)?(s.next=t.pending=s,Co(t,s)):(s.next=n.next,t.pending=n.next=s)}}function Co(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var s=O.T,o={};O.T=o;try{var a=n(r,i),l=O.S;null!==l&&l(o,a),To(e,t,a)}catch(c){No(e,t,c)}finally{null!==s&&null!==o.types&&(s.types=o.types),O.T=s}}else try{To(e,t,s=n(r,i))}catch(u){No(e,t,u)}}function To(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){Io(e,t,n)},function(n){return No(e,t,n)}):Io(e,t,n)}function Io(e,t,n){t.status="fulfilled",t.value=n,Po(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Co(e,n)))}function No(e,t,n){var i=e.pending;if(e.pending=null,null!==i){i=i.next;do{t.status="rejected",t.reason=n,Po(t),t=t.next}while(t!==i)}e.action=null}function Po(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ao(e,t){return t}function Lo(e,t){if(hr){var n=pc.formState;if(null!==n){e:{var i=Bs;if(hr){if(ur){t:{for(var r=ur,s=fr;8!==r.nodeType;){if(!s){r=null;break t}if(null===(r=Rh(r.nextSibling))){r=null;break t}}r="F!"===(s=r.data)||"F"===s?r:null}if(r){ur=Rh(r.nextSibling),i="F!"===r.data;break e}}mr(i)}i=!1}i&&(t=n[0])}}return(n=ao()).memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ao,lastRenderedState:t},n.queue=i,n=ca.bind(null,Bs,i),i.dispatch=n,i=So(!1),s=ha.bind(null,Bs,!1,i.queue),r={state:t,dispatch:null,action:e,pending:null},(i=ao()).queue=r,n=ko.bind(null,Bs,r,s,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function Ro(e){return Oo(lo(),Hs,e)}function Oo(e,t,n){if(t=mo(e,t,Ao)[0],e=po(fo)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var i=co(t)}catch(o){if(o===$r)throw Xr;throw o}else i=t;var r=(t=lo()).queue,s=r.dispatch;return n!==t.memoizedState&&(Bs.flags|=2048,jo(9,{destroy:void 0},Mo.bind(null,r,n),null)),[i,s,e]}function Mo(e,t){e.action=t}function Do(e){var t=lo(),n=Hs;if(null!==n)return Oo(t,n,e);lo(),t=t.memoizedState;var i=(n=lo()).queue.dispatch;return n.memoizedState=e,[t,i,!1]}function jo(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},null===(t=Bs.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Bs.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Fo(){return lo().memoizedState}function zo(e,t,n,i){var r=ao();Bs.flags|=e,r.memoizedState=jo(1|t,{destroy:void 0},n,void 0===i?null:i)}function Uo(e,t,n,i){var r=lo();i=void 0===i?null:i;var s=r.memoizedState.inst;null!==Hs&&null!==i&&Xs(i,Hs.memoizedState.deps)?r.memoizedState=jo(t,s,n,i):(Bs.flags|=e,r.memoizedState=jo(1|t,s,n,i))}function Vo(e,t){zo(8390656,8,e,t)}function Bo(e,t){Uo(2048,8,e,t)}function Ho(e){var t=lo().memoizedState;return function(e){Bs.flags|=4;var t=Bs.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Bs.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&fc))throw Error(o(440));return t.impl.apply(void 0,arguments)}}function qo(e,t){return Uo(4,2,e,t)}function Wo(e,t){return Uo(4,4,e,t)}function Zo(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Ko(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Uo(4,4,Zo.bind(null,t,e),n)}function Go(){}function Yo(e,t){var n=lo();t=void 0===t?null:t;var i=n.memoizedState;return null!==t&&Xs(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Qo(e,t){var n=lo();t=void 0===t?null:t;var i=n.memoizedState;if(null!==t&&Xs(t,i[1]))return i[0];if(i=e(),Ks){ye(!0);try{e()}finally{ye(!1)}}return n.memoizedState=[i,t],i}function $o(e,t,n){return void 0===n||0!==(1073741824&Vs)&&0===(261930&gc)?e.memoizedState=t:(e.memoizedState=n,e=Kc(),Bs.lanes|=e,xc|=e,n)}function Jo(e,t,n,i){return Jn(n,t)?n:null!==Ts.current?(e=$o(e,n,i),Jn(e,t)||(Ra=!0),e):0===(42&Vs)||0!==(1073741824&Vs)&&0===(261930&gc)?(Ra=!0,e.memoizedState=n):(e=Kc(),Bs.lanes|=e,xc|=e,t)}function Xo(e,t,n,i,r){var s=M.p;M.p=0!==s&&8>s?s:8;var o=O.T,a={};O.T=a,ha(e,!1,t,n);try{var l=r(),c=O.S;if(null!==c&&c(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)ua(e,t,function(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(i.status="rejected",i.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),i}(l,i),Zc());else ua(e,t,i,Zc())}catch(u){ua(e,t,{then:function(){},status:"rejected",reason:u},Zc())}finally{M.p=s,null!==o&&null!==a.types&&(o.types=a.types),O.T=o}}function ea(){}function ta(e,t,n,i){if(5!==e.tag)throw Error(o(476));var r=na(e).queue;Xo(e,r,t,D,null===n?ea:function(){return ia(e),n(i)})}function na(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:D,baseState:D,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:D},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function ia(e){var t=na(e);null===t.next&&(t=e.alternate.memoizedState),ua(e,t.next.queue,{},Zc())}function ra(){return Lr(ud)}function sa(){return lo().memoizedState}function oa(){return lo().memoizedState}function aa(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Zc(),i=ys(t,e=_s(n),n);return null!==i&&(Gc(i,t,n),bs(i,t,n)),t={cache:zr()},void(e.payload=t)}t=t.return}}function la(e,t,n){var i=Zc();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},da(e)?fa(t,n):null!==(n=Li(e,t,n,i))&&(Gc(n,e,i),pa(n,t,i))}function ca(e,t,n){ua(e,t,n,Zc())}function ua(e,t,n,i){var r={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(da(e))fa(t,r);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Jn(a,o))return Ai(e,t,r,0),null===pc&&Pi(),!1}catch(l){}if(null!==(n=Li(e,t,r,i)))return Gc(n,e,i),pa(n,t,i),!0}return!1}function ha(e,t,n,i){if(i={lane:2,revertLane:Bu(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},da(e)){if(t)throw Error(o(479))}else null!==(t=Li(e,n,i,2))&&Gc(t,e,2)}function da(e){var t=e.alternate;return e===Bs||null!==t&&t===Bs}function fa(e,t){Zs=Ws=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function pa(e,t,n){if(0!==(4194048&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Oe(e,n)}}var ma={readContext:Lr,use:uo,useCallback:Js,useContext:Js,useEffect:Js,useImperativeHandle:Js,useLayoutEffect:Js,useInsertionEffect:Js,useMemo:Js,useReducer:Js,useRef:Js,useState:Js,useDebugValue:Js,useDeferredValue:Js,useTransition:Js,useSyncExternalStore:Js,useId:Js,useHostTransitionStatus:Js,useFormState:Js,useActionState:Js,useOptimistic:Js,useMemoCache:Js,useCacheRefresh:Js};ma.useEffectEvent=Js;var ga={readContext:Lr,use:uo,useCallback:function(e,t){return ao().memoizedState=[e,void 0===t?null:t],e},useContext:Lr,useEffect:Vo,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Zo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){zo(4,2,e,t)},useMemo:function(e,t){var n=ao();t=void 0===t?null:t;var i=e();if(Ks){ye(!0);try{e()}finally{ye(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=ao();if(void 0!==n){var r=n(t);if(Ks){ye(!0);try{n(t)}finally{ye(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=la.bind(null,Bs,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},ao().memoizedState=e},useState:function(e){var t=(e=So(e)).queue,n=ca.bind(null,Bs,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Go,useDeferredValue:function(e,t){return $o(ao(),e,t)},useTransition:function(){var e=So(!1);return e=Xo.bind(null,Bs,e.queue,!0,!1),ao().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=Bs,r=ao();if(hr){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===pc)throw Error(o(349));0!==(127&gc)||_o(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,Vo(bo.bind(null,i,s,e),[e]),i.flags|=2048,jo(9,{destroy:void 0},yo.bind(null,i,s,n,t),null),n},useId:function(){var e=ao(),t=pc.identifierPrefix;if(hr){var n=ir;t="_"+t+"R_"+(n=(nr&~(1<<32-be(nr)-1)).toString(32)+n),0<(n=Gs++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=$s++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ra,useFormState:Lo,useActionState:Lo,useOptimistic:function(e){var t=ao();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=ha.bind(null,Bs,!0,n),n.dispatch=t,[e,t]},useMemoCache:ho,useCacheRefresh:function(){return ao().memoizedState=aa.bind(null,Bs)},useEffectEvent:function(e){var t=ao(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&fc))throw Error(o(440));return n.impl.apply(void 0,arguments)}}},va={readContext:Lr,use:uo,useCallback:Yo,useContext:Lr,useEffect:Bo,useImperativeHandle:Ko,useInsertionEffect:qo,useLayoutEffect:Wo,useMemo:Qo,useReducer:po,useRef:Fo,useState:function(){return po(fo)},useDebugValue:Go,useDeferredValue:function(e,t){return Jo(lo(),Hs.memoizedState,e,t)},useTransition:function(){var e=po(fo)[0],t=lo().memoizedState;return["boolean"===typeof e?e:co(e),t]},useSyncExternalStore:vo,useId:sa,useHostTransitionStatus:ra,useFormState:Ro,useActionState:Ro,useOptimistic:function(e,t){return xo(lo(),0,e,t)},useMemoCache:ho,useCacheRefresh:oa};va.useEffectEvent=Ho;var _a={readContext:Lr,use:uo,useCallback:Yo,useContext:Lr,useEffect:Bo,useImperativeHandle:Ko,useInsertionEffect:qo,useLayoutEffect:Wo,useMemo:Qo,useReducer:go,useRef:Fo,useState:function(){return go(fo)},useDebugValue:Go,useDeferredValue:function(e,t){var n=lo();return null===Hs?$o(n,e,t):Jo(n,Hs.memoizedState,e,t)},useTransition:function(){var e=go(fo)[0],t=lo().memoizedState;return["boolean"===typeof e?e:co(e),t]},useSyncExternalStore:vo,useId:sa,useHostTransitionStatus:ra,useFormState:Do,useActionState:Do,useOptimistic:function(e,t){var n=lo();return null!==Hs?xo(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:ho,useCacheRefresh:oa};function ya(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:f({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}_a.useEffectEvent=Ho;var ba={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Zc(),r=_s(i);r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=ys(e,r,i))&&(Gc(t,e,i),bs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Zc(),r=_s(i);r.tag=1,r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=ys(e,r,i))&&(Gc(t,e,i),bs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Zc(),i=_s(n);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=ys(e,i,n))&&(Gc(t,e,n),bs(t,e,n))}};function wa(e,t,n,i,r,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!Xn(n,i)||!Xn(r,s))}function Ea(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&ba.enqueueReplaceState(t,t.state,null)}function Sa(e,t){var n=t;if("ref"in t)for(var i in n={},t)"ref"!==i&&(n[i]=t[i]);if(e=e.defaultProps)for(var r in n===t&&(n=f({},n)),e)void 0===n[r]&&(n[r]=e[r]);return n}function xa(e){Ci(e)}function ka(e){console.error(e)}function Ca(e){Ci(e)}function Ta(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Ia(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function Na(e,t,n){return(n=_s(n)).tag=3,n.payload={element:null},n.callback=function(){Ta(e,t)},n}function Pa(e){return(e=_s(e)).tag=3,e}function Aa(e,t,n,i){var r=n.type.getDerivedStateFromError;if("function"===typeof r){var s=i.value;e.payload=function(){return r(s)},e.callback=function(){Ia(t,n,i)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){Ia(t,n,i),"function"!==typeof r&&(null===Dc?Dc=new Set([this]):Dc.add(this));var e=i.stack;this.componentDidCatch(i.value,{componentStack:null!==e?e:""})})}var La=Error(o(461)),Ra=!1;function Oa(e,t,n,i){t.child=null===e?ps(t,null,n,i):fs(t,e.child,n,i)}function Ma(e,t,n,i,r){n=n.render;var s=t.ref;if("ref"in i){var o={};for(var a in i)"ref"!==a&&(o[a]=i[a])}else o=i;return Ar(t),i=eo(e,t,n,o,s,r),a=ro(),null===e||Ra?(hr&&a&&or(t),t.flags|=1,Oa(e,t,i,r),t.child):(so(e,t,r),rl(e,t,r))}function Da(e,t,n,i,r){if(null===e){var s=n.type;return"function"!==typeof s||zi(s)||void 0!==s.defaultProps||null!==n.compare?((e=Bi(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,ja(e,t,s,i,r))}if(s=e.child,!sl(e,r)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:Xn)(o,i)&&e.ref===t.ref)return rl(e,t,r)}return t.flags|=1,(e=Ui(s,i)).ref=t.ref,e.return=t,t.child=e}function ja(e,t,n,i,r){if(null!==e){var s=e.memoizedProps;if(Xn(s,i)&&e.ref===t.ref){if(Ra=!1,t.pendingProps=i=s,!sl(e,r))return t.lanes=e.lanes,rl(e,t,r);0!==(131072&e.flags)&&(Ra=!0)}}return qa(e,t,n,i,r)}function Fa(e,t,n,i){var r=i.children,s=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===i.mode){if(0!==(128&t.flags)){if(s=null!==s?s.baseLanes|n:n,null!==e){for(i=t.child=e.child,r=0;null!==i;)r=r|i.lanes|i.childLanes,i=i.sibling;i=r&~s}else i=0,t.child=null;return Ua(e,t,s,n,i)}if(0===(536870912&n))return i=t.lanes=536870912,Ua(e,t,null!==s?s.baseLanes|n:n,n,i);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Yr(0,null!==s?s.cachePool:null),null!==s?Ns(t,s):Ps(),Ds(t)}else null!==s?(Yr(0,s.cachePool),Ns(t,s),js(),t.memoizedState=null):(null!==e&&Yr(0,null),Ps(),js());return Oa(e,t,r,n),t.child}function za(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Ua(e,t,n,i,r){var s=Gr();return s=null===s?null:{parent:Fr._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&Yr(0,null),Ps(),Ds(t),null!==e&&Nr(e,t,i,!0),t.childLanes=r,null}function Va(e,t){return(t=Xa({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Ba(e,t,n){return fs(t,e.child,null,n),(e=Va(t,t.pendingProps)).flags|=2,Fs(t),t.memoizedState=null,e}function Ha(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function qa(e,t,n,i,r){return Ar(t),n=eo(e,t,n,i,void 0,r),i=ro(),null===e||Ra?(hr&&i&&or(t),t.flags|=1,Oa(e,t,n,r),t.child):(so(e,t,r),rl(e,t,r))}function Wa(e,t,n,i,r,s){return Ar(t),t.updateQueue=null,n=no(t,i,n,r),to(e),i=ro(),null===e||Ra?(hr&&i&&or(t),t.flags|=1,Oa(e,t,n,s),t.child):(so(e,t,s),rl(e,t,s))}function Za(e,t,n,i,r){if(Ar(t),null===t.stateNode){var s=Di,o=n.contextType;"object"===typeof o&&null!==o&&(s=Lr(o)),s=new n(i,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=ba,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=i,s.state=t.memoizedState,s.refs={},gs(t),o=n.contextType,s.context="object"===typeof o&&null!==o?Lr(o):Di,s.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(ya(t,n,o,i),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(o=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),o!==s.state&&ba.enqueueReplaceState(s,s.state,null),xs(t,i,s,r),Ss(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),i=!0}else if(null===e){s=t.stateNode;var a=t.memoizedProps,l=Sa(n,a);s.props=l;var c=s.context,u=n.contextType;o=Di,"object"===typeof u&&null!==u&&(o=Lr(u));var h=n.getDerivedStateFromProps;u="function"===typeof h||"function"===typeof s.getSnapshotBeforeUpdate,a=t.pendingProps!==a,u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a||c!==o)&&Ea(t,s,i,o),ms=!1;var d=t.memoizedState;s.state=d,xs(t,i,s,r),Ss(),c=t.memoizedState,a||d!==c||ms?("function"===typeof h&&(ya(t,n,h,i),c=t.memoizedState),(l=ms||wa(t,n,l,i,d,c,o))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),s.props=i,s.state=c,s.context=o,i=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,vs(e,t),u=Sa(n,o=t.memoizedProps),s.props=u,h=t.pendingProps,d=s.context,c=n.contextType,l=Di,"object"===typeof c&&null!==c&&(l=Lr(c)),(c="function"===typeof(a=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==h||d!==l)&&Ea(t,s,i,l),ms=!1,d=t.memoizedState,s.state=d,xs(t,i,s,r),Ss();var f=t.memoizedState;o!==h||d!==f||ms||null!==e&&null!==e.dependencies&&Pr(e.dependencies)?("function"===typeof a&&(ya(t,n,a,i),f=t.memoizedState),(u=ms||wa(t,n,u,i,d,f,l)||null!==e&&null!==e.dependencies&&Pr(e.dependencies))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(i,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),s.props=i,s.state=f,s.context=l,i=u):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,Ha(e,t),i=0!==(128&t.flags),s||i?(s=t.stateNode,n=i&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&i?(t.child=fs(t,e.child,null,r),t.child=fs(t,null,n,r)):Oa(e,t,n,r),t.memoizedState=s.state,e=t.child):e=rl(e,t,r),e}function Ka(e,t,n,i){return yr(),t.flags|=256,Oa(e,t,n,i),t.child}var Ga={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ya(e){return{baseLanes:e,cachePool:Qr()}}function Qa(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Tc),e}function $a(e,t,n){var i,r=t.pendingProps,s=!1,a=0!==(128&t.flags);if((i=a)||(i=(null===e||null!==e.memoizedState)&&0!==(2&zs.current)),i&&(s=!0,t.flags&=-129),i=0!==(32&t.flags),t.flags&=-33,null===e){if(hr){if(s?Os(t):js(),(e=ur)?null!==(e=null!==(e=Ph(e,fr))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==tr?{id:nr,overflow:ir}:null,retryLane:536870912,hydrationErrors:null},(n=Wi(e)).return=t,t.child=n,cr=t,ur=null):e=null,null===e)throw mr(t);return Lh(e)?t.lanes=32:t.lanes=536870912,null}var l=r.children;return r=r.fallback,s?(js(),l=Xa({mode:"hidden",children:l},s=t.mode),r=Hi(r,s,n,null),l.return=t,r.return=t,l.sibling=r,t.child=l,(r=t.child).memoizedState=Ya(n),r.childLanes=Qa(e,i,n),t.memoizedState=Ga,za(null,r)):(Os(t),Ja(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(a)256&t.flags?(Os(t),t.flags&=-257,t=el(e,t,n)):null!==t.memoizedState?(js(),t.child=e.child,t.flags|=128,t=null):(js(),l=r.fallback,s=t.mode,r=Xa({mode:"visible",children:r.children},s),(l=Hi(l,s,n,null)).flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,fs(t,e.child,null,n),(r=t.child).memoizedState=Ya(n),r.childLanes=Qa(e,i,n),t.memoizedState=Ga,t=za(null,r));else if(Os(t),Lh(l)){if(i=l.nextSibling&&l.nextSibling.dataset)var u=i.dgst;i=u,(r=Error(o(419))).stack="",r.digest=i,wr({value:r,source:null,stack:null}),t=el(e,t,n)}else if(Ra||Nr(e,t,n,!1),i=0!==(n&e.childLanes),Ra||i){if(null!==(i=pc)&&(0!==(r=Me(i,n))&&r!==c.retryLane))throw c.retryLane=r,Ri(e,r),Gc(i,e,r),La;Ah(l)||ou(),t=el(e,t,n)}else Ah(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,ur=Rh(l.nextSibling),cr=t,hr=!0,dr=null,fr=!1,null!==e&&lr(t,e),(t=Ja(t,r.children)).flags|=4096);return t}return s?(js(),l=r.fallback,s=t.mode,u=(c=e.child).sibling,(r=Ui(c,{mode:"hidden",children:r.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=Ui(u,l):(l=Hi(l,s,n,null)).flags|=2,l.return=t,r.return=t,r.sibling=l,t.child=r,za(null,r),r=t.child,null===(l=e.child.memoizedState)?l=Ya(n):(null!==(s=l.cachePool)?(c=Fr._currentValue,s=s.parent!==c?{parent:c,pool:c}:s):s=Qr(),l={baseLanes:l.baseLanes|n,cachePool:s}),r.memoizedState=l,r.childLanes=Qa(e,i,n),t.memoizedState=Ga,za(e.child,r)):(Os(t),e=(n=e.child).sibling,(n=Ui(n,{mode:"visible",children:r.children})).return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n,t.memoizedState=null,n)}function Ja(e,t){return(t=Xa({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Xa(e,t){return(e=Fi(22,e,null,t)).lanes=0,e}function el(e,t,n){return fs(t,e.child,null,n),(e=Ja(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function tl(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Tr(e.return,t,n)}function nl(e,t,n,i,r,s){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,treeForkCount:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r,o.treeForkCount=s)}function il(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;i=i.children;var o=zs.current,a=0!==(2&o);if(a?(o=1&o|2,t.flags|=128):o&=1,V(zs,o),Oa(e,t,i,n),i=hr?Ji:0,!a&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&tl(e,n,t);else if(19===e.tag)tl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===Us(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),nl(t,!1,r,n,s,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===Us(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}nl(t,!0,n,null,s,i);break;case"together":nl(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function rl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),xc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Nr(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ui(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ui(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function sl(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Pr(e))}function ol(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ra=!0;else{if(!sl(e,n)&&0===(128&t.flags))return Ra=!1,function(e,t,n){switch(t.tag){case 3:G(t,t.stateNode.containerInfo),kr(0,Fr,e.memoizedState.cache),yr();break;case 27:case 5:Q(t);break;case 4:G(t,t.stateNode.containerInfo);break;case 10:kr(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Ms(t),null;break;case 13:var i=t.memoizedState;if(null!==i)return null!==i.dehydrated?(Os(t),t.flags|=128,null):0!==(n&t.child.childLanes)?$a(e,t,n):(Os(t),null!==(e=rl(e,t,n))?e.sibling:null);Os(t);break;case 19:var r=0!==(128&e.flags);if((i=0!==(n&t.childLanes))||(Nr(e,t,n,!1),i=0!==(n&t.childLanes)),r){if(i)return il(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),V(zs,zs.current),i)break;return null;case 22:return t.lanes=0,Fa(e,t,n,t.pendingProps);case 24:kr(0,Fr,e.memoizedState.cache)}return rl(e,t,n)}(e,t,n);Ra=0!==(131072&e.flags)}else Ra=!1,hr&&0!==(1048576&t.flags)&&sr(t,Ji,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=is(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var r=e.$$typeof;if(r===E){t.tag=11,t=Ma(null,t,e,i,n);break e}if(r===k){t.tag=14,t=Da(null,t,e,i,n);break e}}throw t=L(e)||e,Error(o(306,t,""))}zi(e)?(i=Sa(e,i),t.tag=1,t=Za(null,t,e,i,n)):(t.tag=0,t=qa(null,t,e,i,n))}return t;case 0:return qa(e,t,t.type,t.pendingProps,n);case 1:return Za(e,t,i=t.type,r=Sa(i,t.pendingProps),n);case 3:e:{if(G(t,t.stateNode.containerInfo),null===e)throw Error(o(387));i=t.pendingProps;var s=t.memoizedState;r=s.element,vs(e,t),xs(t,i,null,n);var a=t.memoizedState;if(i=a.cache,kr(0,Fr,i),i!==s.cache&&Ir(t,[Fr],n,!0),Ss(),i=a.element,s.isDehydrated){if(s={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ka(e,t,i,n);break e}if(i!==r){wr(r=Gi(Error(o(424)),t)),t=Ka(e,t,i,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ur=Rh(e.firstChild),cr=t,hr=!0,dr=null,fr=!0,n=ps(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(yr(),i===r){t=rl(e,t,n);break e}Oa(e,t,i,n)}t=t.child}return t;case 26:return Ha(e,t),null===e?(n=Wh(t.type,null,t.pendingProps,null))?t.memoizedState=n:hr||(n=t.type,e=t.pendingProps,(i=gh(Z.current).createElement(n))[Ve]=t,i[Be]=e,dh(i,n,e),et(i),t.stateNode=i):t.memoizedState=Wh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Q(t),null===e&&hr&&(i=t.stateNode=jh(t.type,t.pendingProps,Z.current),cr=t,fr=!0,r=ur,Ch(t.type)?(Oh=r,ur=Rh(i.firstChild)):ur=r),Oa(e,t,t.pendingProps.children,n),Ha(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&hr&&((r=i=ur)&&(null!==(i=function(e,t,n,i){for(;1===e.nodeType;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(i){if(!e[Ge])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==r.rel||e.getAttribute("href")!==(null==r.href||""===r.href?null:r.href)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin)||e.getAttribute("title")!==(null==r.title?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==r.src?null:r.src)||e.getAttribute("type")!==(null==r.type?null:r.type)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==r.name?null:""+r.name;if("hidden"===r.type&&e.getAttribute("name")===s)return e}if(null===(e=Rh(e.nextSibling)))break}return null}(i,t.type,t.pendingProps,fr))?(t.stateNode=i,cr=t,ur=Rh(i.firstChild),fr=!1,r=!0):r=!1),r||mr(t)),Q(t),r=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,i=s.children,yh(r,s)?i=null:null!==a&&yh(r,a)&&(t.flags|=32),null!==t.memoizedState&&(r=eo(e,t,io,null,null,n),ud._currentValue=r),Ha(e,t),Oa(e,t,i,n),t.child;case 6:return null===e&&hr&&((e=n=ur)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Rh(e.nextSibling)))return null}return e}(n,t.pendingProps,fr))?(t.stateNode=n,cr=t,ur=null,e=!0):e=!1),e||mr(t)),null;case 13:return $a(e,t,n);case 4:return G(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=fs(t,null,i,n):Oa(e,t,i,n),t.child;case 11:return Ma(e,t,t.type,t.pendingProps,n);case 7:return Oa(e,t,t.pendingProps,n),t.child;case 8:case 12:return Oa(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,kr(0,t.type,i.value),Oa(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,Ar(t),i=i(r=Lr(r)),t.flags|=1,Oa(e,t,i,n),t.child;case 14:return Da(e,t,t.type,t.pendingProps,n);case 15:return ja(e,t,t.type,t.pendingProps,n);case 19:return il(e,t,n);case 31:return function(e,t,n){var i=t.pendingProps,r=0!==(128&t.flags);if(t.flags&=-129,null===e){if(hr){if("hidden"===i.mode)return e=Va(t,i),t.lanes=536870912,za(null,e);if(Ms(t),(e=ur)?null!==(e=null!==(e=Ph(e,fr))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==tr?{id:nr,overflow:ir}:null,retryLane:536870912,hydrationErrors:null},(n=Wi(e)).return=t,t.child=n,cr=t,ur=null):e=null,null===e)throw mr(t);return t.lanes=536870912,null}return Va(t,i)}var s=e.memoizedState;if(null!==s){var a=s.dehydrated;if(Ms(t),r)if(256&t.flags)t.flags&=-257,t=Ba(e,t,n);else{if(null===t.memoizedState)throw Error(o(558));t.child=e.child,t.flags|=128,t=null}else if(Ra||Nr(e,t,n,!1),r=0!==(n&e.childLanes),Ra||r){if(null!==(i=pc)&&0!==(a=Me(i,n))&&a!==s.retryLane)throw s.retryLane=a,Ri(e,a),Gc(i,e,a),La;ou(),t=Ba(e,t,n)}else e=s.treeContext,ur=Rh(a.nextSibling),cr=t,hr=!0,dr=null,fr=!1,null!==e&&lr(t,e),(t=Va(t,i)).flags|=4096;return t}return(e=Ui(e.child,{mode:i.mode,children:i.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Fa(e,t,n,t.pendingProps);case 24:return Ar(t),i=Lr(Fr),null===e?(null===(r=Gr())&&(r=pc,s=zr(),r.pooledCache=s,s.refCount++,null!==s&&(r.pooledCacheLanes|=n),r=s),t.memoizedState={parent:i,cache:r},gs(t),kr(0,Fr,r)):(0!==(e.lanes&n)&&(vs(e,t),xs(t,null,null,n),Ss()),r=e.memoizedState,s=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=r),kr(0,Fr,i)):(i=s.cache,kr(0,Fr,i),i!==r.cache&&Ir(t,[Fr],n,!0))),Oa(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function al(e){e.flags|=4}function ll(e,t,n,i,r){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&r)===r)if(e.stateNode.complete)e.flags|=8192;else{if(!iu())throw rs=es,Jr;e.flags|=8192}}else e.flags&=-16777217}function cl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!rd(t)){if(!iu())throw rs=es,Jr;e.flags|=8192}}function ul(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Pe():536870912,e.lanes|=t,Ic|=t)}function hl(e,t){if(!hr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function dl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=65011712&r.subtreeFlags,i|=65011712&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function fl(e,t,n){var i=t.pendingProps;switch(ar(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return dl(t),null;case 3:return n=t.stateNode,i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Cr(Fr),Y(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(_r(t)?al(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,br())),dl(t),null;case 26:var r=t.type,s=t.memoizedState;return null===e?(al(t),null!==s?(dl(t),cl(t,s)):(dl(t),ll(t,r,0,0,n))):s?s!==e.memoizedState?(al(t),dl(t),cl(t,s)):(dl(t),t.flags&=-16777217):((e=e.memoizedProps)!==i&&al(t),dl(t),ll(t,r,0,0,n)),null;case 27:if($(t),n=Z.current,r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==i&&al(t);else{if(!i){if(null===t.stateNode)throw Error(o(166));return dl(t),null}e=q.current,_r(t)?gr(t):(e=jh(r,i,n),t.stateNode=e,al(t))}return dl(t),null;case 5:if($(t),r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==i&&al(t);else{if(!i){if(null===t.stateNode)throw Error(o(166));return dl(t),null}if(s=q.current,_r(t))gr(t);else{var a=gh(Z.current);switch(s){case 1:s=a.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:s=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":s=a.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":s=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":(s=a.createElement("div")).innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s="string"===typeof i.is?a.createElement("select",{is:i.is}):a.createElement("select"),i.multiple?s.multiple=!0:i.size&&(s.size=i.size);break;default:s="string"===typeof i.is?a.createElement(r,{is:i.is}):a.createElement(r)}}s[Ve]=t,s[Be]=i;e:for(a=t.child;null!==a;){if(5===a.tag||6===a.tag)s.appendChild(a.stateNode);else if(4!==a.tag&&27!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;null===a.sibling;){if(null===a.return||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=s;e:switch(dh(s,r,i),r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&al(t)}}return dl(t),ll(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==i&&al(t);else{if("string"!==typeof i&&null===t.stateNode)throw Error(o(166));if(e=Z.current,_r(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,null!==(r=cr))switch(r.tag){case 27:case 5:i=r.memoizedProps}e[Ve]=t,(e=!!(e.nodeValue===n||null!==i&&!0===i.suppressHydrationWarning||ch(e.nodeValue,n)))||mr(t,!0)}else(e=gh(e).createTextNode(i))[Ve]=t,t.stateNode=e}return dl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(i=_r(t),null!==n){if(null===e){if(!i)throw Error(o(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(o(557));e[Ve]=t}else yr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;dl(t),e=!1}else n=br(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Fs(t),t):(Fs(t),null);if(0!==(128&t.flags))throw Error(o(558))}return dl(t),null;case 13:if(i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(r=_r(t),null!==i&&null!==i.dehydrated){if(null===e){if(!r)throw Error(o(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(o(317));r[Ve]=t}else yr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;dl(t),r=!1}else r=br(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return 256&t.flags?(Fs(t),t):(Fs(t),null)}return Fs(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==i,e=null!==e&&null!==e.memoizedState,n&&(r=null,null!==(i=t.child).alternate&&null!==i.alternate.memoizedState&&null!==i.alternate.memoizedState.cachePool&&(r=i.alternate.memoizedState.cachePool.pool),s=null,null!==i.memoizedState&&null!==i.memoizedState.cachePool&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),ul(t,t.updateQueue),dl(t),null);case 4:return Y(),null===e&&Xu(t.stateNode.containerInfo),dl(t),null;case 10:return Cr(t.type),dl(t),null;case 19:if(U(zs),null===(i=t.memoizedState))return dl(t),null;if(r=0!==(128&t.flags),null===(s=i.rendering))if(r)hl(i,!1);else{if(0!==Sc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=Us(e))){for(t.flags|=128,hl(i,!1),e=s.updateQueue,t.updateQueue=e,ul(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Vi(n,e),n=n.sibling;return V(zs,1&zs.current|2),hr&&rr(t,i.treeForkCount),t.child}e=e.sibling}null!==i.tail&&le()>Oc&&(t.flags|=128,r=!0,hl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Us(s))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,ul(t,e),hl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!hr)return dl(t),null}else 2*le()-i.renderingStartTime>Oc&&536870912!==n&&(t.flags|=128,r=!0,hl(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=i.last)?e.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=le(),e.sibling=null,n=zs.current,V(zs,r?1&n|2:1&n),hr&&rr(t,i.treeForkCount),e):(dl(t),null);case 22:case 23:return Fs(t),As(),i=null!==t.memoizedState,null!==e?null!==e.memoizedState!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?0!==(536870912&n)&&0===(128&t.flags)&&(dl(t),6&t.subtreeFlags&&(t.flags|=8192)):dl(t),null!==(n=t.updateQueue)&&ul(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),i=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),null!==e&&U(Kr),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Cr(Fr),dl(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function pl(e,t){switch(ar(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Cr(Fr),Y(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return $(t),null;case 31:if(null!==t.memoizedState){if(Fs(t),null===t.alternate)throw Error(o(340));yr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Fs(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));yr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return U(zs),null;case 4:return Y(),null;case 10:return Cr(t.type),null;case 22:case 23:return Fs(t),As(),null!==e&&U(Kr),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Cr(Fr),null;default:return null}}function ml(e,t){switch(ar(t),t.tag){case 3:Cr(Fr),Y();break;case 26:case 27:case 5:$(t);break;case 4:Y();break;case 31:null!==t.memoizedState&&Fs(t);break;case 13:Fs(t);break;case 19:U(zs);break;case 10:Cr(t.type);break;case 22:case 23:Fs(t),As(),null!==e&&U(Kr);break;case 24:Cr(Fr)}}function gl(e,t){try{var n=t.updateQueue,i=null!==n?n.lastEffect:null;if(null!==i){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var s=n.create,o=n.inst;i=s(),o.destroy=i}n=n.next}while(n!==r)}}catch(a){Su(t,t.return,a)}}function vl(e,t,n){try{var i=t.updateQueue,r=null!==i?i.lastEffect:null;if(null!==r){var s=r.next;i=s;do{if((i.tag&e)===e){var o=i.inst,a=o.destroy;if(void 0!==a){o.destroy=void 0,r=t;var l=n,c=a;try{c()}catch(u){Su(r,l,u)}}}i=i.next}while(i!==s)}}catch(u){Su(t,t.return,u)}}function _l(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Cs(t,n)}catch(i){Su(e,e.return,i)}}}function yl(e,t,n){n.props=Sa(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Su(e,t,i)}}function bl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;default:i=e.stateNode}"function"===typeof n?e.refCleanup=n(i):n.current=i}}catch(r){Su(e,t,r)}}function wl(e,t){var n=e.ref,i=e.refCleanup;if(null!==n)if("function"===typeof i)try{i()}catch(r){Su(e,t,r)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(s){Su(e,t,s)}else n.current=null}function El(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Su(e,e.return,r)}}function Sl(e,t,n){try{var i=e.stateNode;!function(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,l=null,c=null,u=null,h=null;for(p in n){var d=n[p];if(n.hasOwnProperty(p)&&null!=d)switch(p){case"checked":case"value":break;case"defaultValue":c=d;default:i.hasOwnProperty(p)||uh(e,t,p,null,i,d)}}for(var f in i){var p=i[f];if(d=n[f],i.hasOwnProperty(f)&&(null!=p||null!=d))switch(f){case"type":s=p;break;case"name":r=p;break;case"checked":u=p;break;case"defaultChecked":h=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:p!==d&&uh(e,t,f,p,i,d)}}return void _t(e,a,l,c,u,h,s,r);case"select":for(s in p=a=l=f=null,n)if(c=n[s],n.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":p=c;default:i.hasOwnProperty(s)||uh(e,t,s,null,i,c)}for(r in i)if(s=i[r],c=n[r],i.hasOwnProperty(r)&&(null!=s||null!=c))switch(r){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==c&&uh(e,t,r,s,i,c)}return t=l,n=a,i=p,void(null!=f?wt(e,!!n,f,!1):!!i!==!!n&&(null!=t?wt(e,!!n,t,!0):wt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(r=n[l],n.hasOwnProperty(l)&&null!=r&&!i.hasOwnProperty(l))switch(l){case"value":case"children":break;default:uh(e,t,l,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(null!=r||null!=s))switch(a){case"value":f=r;break;case"defaultValue":p=r;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=r)throw Error(o(91));break;default:r!==s&&uh(e,t,a,r,i,s)}return void Et(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!i.hasOwnProperty(m))if("selected"===m)e.selected=!1;else uh(e,t,m,null,i,f);for(c in i)if(f=i[c],p=n[c],i.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else uh(e,t,c,f,i,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!i.hasOwnProperty(g)&&uh(e,t,g,null,i,f);for(u in i)if(f=i[u],p=n[u],i.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,t));break;default:uh(e,t,u,f,i,p)}return;default:if(It(t)){for(var v in n)f=n[v],n.hasOwnProperty(v)&&void 0!==f&&!i.hasOwnProperty(v)&&hh(e,t,v,void 0,i,f);for(h in i)f=i[h],p=n[h],!i.hasOwnProperty(h)||f===p||void 0===f&&void 0===p||hh(e,t,h,f,i,p);return}}for(var _ in n)f=n[_],n.hasOwnProperty(_)&&null!=f&&!i.hasOwnProperty(_)&&uh(e,t,_,null,i,f);for(d in i)f=i[d],p=n[d],!i.hasOwnProperty(d)||f===p||null==f&&null==p||uh(e,t,d,f,i,p)}(i,e.type,n,t),i[Be]=t}catch(r){Su(e,e.return,r)}}function xl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Ch(e.type)||4===e.tag}function kl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||xl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Ch(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Cl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Lt));else if(4!==i&&(27===i&&Ch(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Cl(e,t,n),e=e.sibling;null!==e;)Cl(e,t,n),e=e.sibling}function Tl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&(27===i&&Ch(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Tl(e,t,n),e=e.sibling;null!==e;)Tl(e,t,n),e=e.sibling}function Il(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);dh(t,i,n),t[Ve]=e,t[Be]=n}catch(s){Su(e,e.return,s)}}var Nl=!1,Pl=!1,Al=!1,Ll="function"===typeof WeakSet?WeakSet:Set,Rl=null;function Ol(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Gl(e,n),4&i&&gl(5,n);break;case 1:if(Gl(e,n),4&i)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(o){Su(n,n.return,o)}else{var r=Sa(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){Su(n,n.return,a)}}64&i&&_l(n),512&i&&bl(n,n.return);break;case 3:if(Gl(e,n),64&i&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Cs(e,t)}catch(o){Su(n,n.return,o)}}break;case 27:null===t&&4&i&&Il(n);case 26:case 5:Gl(e,n),null===t&&4&i&&El(n),512&i&&bl(n,n.return);break;case 12:Gl(e,n);break;case 31:Gl(e,n),4&i&&Ul(e,n);break;case 13:Gl(e,n),4&i&&Vl(e,n),64&i&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}(e,n=Tu.bind(null,n))));break;case 22:if(!(i=null!==n.memoizedState||Nl)){t=null!==t&&null!==t.memoizedState||Pl,r=Nl;var s=Pl;Nl=i,(Pl=t)&&!s?Ql(e,n,0!==(8772&n.subtreeFlags)):Gl(e,n),Nl=r,Pl=s}break;case 30:break;default:Gl(e,n)}}function Ml(e){var t=e.alternate;null!==t&&(e.alternate=null,Ml(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ye(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Dl=null,jl=!1;function Fl(e,t,n){for(n=n.child;null!==n;)zl(e,t,n),n=n.sibling}function zl(e,t,n){if(_e&&"function"===typeof _e.onCommitFiberUnmount)try{_e.onCommitFiberUnmount(ve,n)}catch(s){}switch(n.tag){case 26:Pl||wl(n,t),Fl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Pl||wl(n,t);var i=Dl,r=jl;Ch(n.type)&&(Dl=n.stateNode,jl=!1),Fl(e,t,n),Fh(n.stateNode),Dl=i,jl=r;break;case 5:Pl||wl(n,t);case 6:if(i=Dl,r=jl,Dl=null,Fl(e,t,n),jl=r,null!==(Dl=i))if(jl)try{(9===Dl.nodeType?Dl.body:"HTML"===Dl.nodeName?Dl.ownerDocument.body:Dl).removeChild(n.stateNode)}catch(o){Su(n,t,o)}else try{Dl.removeChild(n.stateNode)}catch(o){Su(n,t,o)}break;case 18:null!==Dl&&(jl?(Th(9===(e=Dl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),qd(e)):Th(Dl,n.stateNode));break;case 4:i=Dl,r=jl,Dl=n.stateNode.containerInfo,jl=!0,Fl(e,t,n),Dl=i,jl=r;break;case 0:case 11:case 14:case 15:vl(2,n,t),Pl||vl(4,n,t),Fl(e,t,n);break;case 1:Pl||(wl(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount&&yl(n,t,i)),Fl(e,t,n);break;case 21:Fl(e,t,n);break;case 22:Pl=(i=Pl)||null!==n.memoizedState,Fl(e,t,n),Pl=i;break;default:Fl(e,t,n)}}function Ul(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{qd(e)}catch(n){Su(t,t.return,n)}}}function Vl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{qd(e)}catch(n){Su(t,t.return,n)}}function Bl(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Ll),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Ll),t;default:throw Error(o(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var i=Iu.bind(null,e,t);t.then(i,i)}})}function Hl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i],s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(Ch(l.type)){Dl=l.stateNode,jl=!1;break e}break;case 5:Dl=l.stateNode,jl=!1;break e;case 3:case 4:Dl=l.stateNode.containerInfo,jl=!0;break e}l=l.return}if(null===Dl)throw Error(o(160));zl(s,a,r),Dl=null,jl=!1,null!==(s=r.alternate)&&(s.return=null),r.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Wl(t,e),t=t.sibling}var ql=null;function Wl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Hl(t,e),Zl(e),4&i&&(vl(3,e,e.return),gl(3,e),vl(5,e,e.return));break;case 1:Hl(t,e),Zl(e),512&i&&(Pl||null===n||wl(n,n.return)),64&i&&Nl&&(null!==(e=e.updateQueue)&&(null!==(i=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?i:n.concat(i))));break;case 26:var r=ql;if(Hl(t,e),Zl(e),512&i&&(Pl||null===n||wl(n,n.return)),4&i){var s=null!==n?n.memoizedState:null;if(i=e.memoizedState,null===n)if(null===i)if(null===e.stateNode){e:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":(!(s=r.getElementsByTagName("title")[0])||s[Ge]||s[Ve]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),dh(s,i,n),s[Ve]=e,et(s),i=s;break e;case"link":var a=nd("link","href",r).get(i+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((s=a[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}dh(s=r.createElement(i),i,n),r.head.appendChild(s);break;case"meta":if(a=nd("meta","content",r).get(i+(n.content||"")))for(l=0;l<a.length;l++)if((s=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}dh(s=r.createElement(i),i,n),r.head.appendChild(s);break;default:throw Error(o(468,i))}s[Ve]=e,et(s),i=s}e.stateNode=i}else id(r,e.type,e.stateNode);else e.stateNode=$h(r,i,e.memoizedProps);else s!==i?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===i?id(r,e.type,e.stateNode):$h(r,i,e.memoizedProps)):null===i&&null!==e.stateNode&&Sl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Hl(t,e),Zl(e),512&i&&(Pl||null===n||wl(n,n.return)),null!==n&&4&i&&Sl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Hl(t,e),Zl(e),512&i&&(Pl||null===n||wl(n,n.return)),32&e.flags){r=e.stateNode;try{xt(r,"")}catch(m){Su(e,e.return,m)}}4&i&&null!=e.stateNode&&Sl(e,r=e.memoizedProps,null!==n?n.memoizedProps:r),1024&i&&(Al=!0);break;case 6:if(Hl(t,e),Zl(e),4&i){if(null===e.stateNode)throw Error(o(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(m){Su(e,e.return,m)}}break;case 3:if(td=null,r=ql,ql=Vh(t.containerInfo),Hl(t,e),ql=r,Zl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{qd(t.containerInfo)}catch(m){Su(e,e.return,m)}Al&&(Al=!1,Kl(e));break;case 4:i=ql,ql=Vh(e.stateNode.containerInfo),Hl(t,e),Zl(e),ql=i;break;case 12:default:Hl(t,e),Zl(e);break;case 31:case 19:Hl(t,e),Zl(e),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,Bl(e,i)));break;case 13:Hl(t,e),Zl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Lc=le()),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,Bl(e,i)));break;case 22:r=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=Nl,h=Pl;if(Nl=u||r,Pl=h||c,Hl(t,e),Pl=h,Nl=u,Zl(e),8192&i)e:for(t=e.stateNode,t._visibility=r?-2&t._visibility:1|t._visibility,r&&(null===n||c||Nl||Pl||Yl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(s=c.stateNode,r)"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=c.stateNode;var d=c.memoizedProps.style,f=void 0!==d&&null!==d&&d.hasOwnProperty("display")?d.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(m){Su(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=r?"":c.memoizedProps}catch(m){Su(c,c.return,m)}}}else if(18===t.tag){if(null===n){c=t;try{var p=c.stateNode;r?Ih(p,!0):Ih(c.stateNode,!1)}catch(m){Su(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&i&&(null!==(i=e.updateQueue)&&(null!==(n=i.retryQueue)&&(i.retryQueue=null,Bl(e,n))));case 30:case 21:}}function Zl(e){var t=e.flags;if(2&t){try{for(var n,i=e.return;null!==i;){if(xl(i)){n=i;break}i=i.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var r=n.stateNode;Tl(e,kl(e),r);break;case 5:var s=n.stateNode;32&n.flags&&(xt(s,""),n.flags&=-33),Tl(e,kl(e),s);break;case 3:case 4:var a=n.stateNode.containerInfo;Cl(e,kl(e),a);break;default:throw Error(o(161))}}catch(l){Su(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Kl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Kl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Gl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ol(e,t.alternate,t),t=t.sibling}function Yl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:vl(4,t,t.return),Yl(t);break;case 1:wl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&yl(t,t.return,n),Yl(t);break;case 27:Fh(t.stateNode);case 26:case 5:wl(t,t.return),Yl(t);break;case 22:null===t.memoizedState&&Yl(t);break;default:Yl(t)}e=e.sibling}}function Ql(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var i=t.alternate,r=e,s=t,o=s.flags;switch(s.tag){case 0:case 11:case 15:Ql(r,s,n),gl(4,s);break;case 1:if(Ql(r,s,n),"function"===typeof(r=(i=s).stateNode).componentDidMount)try{r.componentDidMount()}catch(c){Su(i,i.return,c)}if(null!==(r=(i=s).updateQueue)){var a=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(null!==l)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)ks(l[r],a)}catch(c){Su(i,i.return,c)}}n&&64&o&&_l(s),bl(s,s.return);break;case 27:Il(s);case 26:case 5:Ql(r,s,n),n&&null===i&&4&o&&El(s),bl(s,s.return);break;case 12:Ql(r,s,n);break;case 31:Ql(r,s,n),n&&4&o&&Ul(r,s);break;case 13:Ql(r,s,n),n&&4&o&&Vl(r,s);break;case 22:null===s.memoizedState&&Ql(r,s,n),bl(s,s.return);break;case 30:break;default:Ql(r,s,n)}t=t.sibling}}function $l(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ur(n))}function Jl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ur(e))}function Xl(e,t,n,i){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ec(e,t,n,i),t=t.sibling}function ec(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:Xl(e,t,n,i),2048&r&&gl(9,t);break;case 1:case 31:case 13:default:Xl(e,t,n,i);break;case 3:Xl(e,t,n,i),2048&r&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ur(e)));break;case 12:if(2048&r){Xl(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,o=s.id,a=s.onPostCommit;"function"===typeof a&&a(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Su(t,t.return,l)}}else Xl(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,o=t.alternate,null!==t.memoizedState?2&s._visibility?Xl(e,t,n,i):nc(e,t):2&s._visibility?Xl(e,t,n,i):(s._visibility|=2,tc(e,t,n,i,0!==(10256&t.subtreeFlags)||!1)),2048&r&&$l(o,t);break;case 24:Xl(e,t,n,i),2048&r&&Jl(t.alternate,t)}}function tc(e,t,n,i,r){for(r=r&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var s=e,o=t,a=n,l=i,c=o.flags;switch(o.tag){case 0:case 11:case 15:tc(s,o,a,l,r),gl(8,o);break;case 23:break;case 22:var u=o.stateNode;null!==o.memoizedState?2&u._visibility?tc(s,o,a,l,r):nc(s,o):(u._visibility|=2,tc(s,o,a,l,r)),r&&2048&c&&$l(o.alternate,o);break;case 24:tc(s,o,a,l,r),r&&2048&c&&Jl(o.alternate,o);break;default:tc(s,o,a,l,r)}t=t.sibling}}function nc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:nc(n,i),2048&r&&$l(i.alternate,i);break;case 24:nc(n,i),2048&r&&Jl(i.alternate,i);break;default:nc(n,i)}t=t.sibling}}var ic=8192;function rc(e,t,n){if(e.subtreeFlags&ic)for(e=e.child;null!==e;)sc(e,t,n),e=e.sibling}function sc(e,t,n){switch(e.tag){case 26:rc(e,t,n),e.flags&ic&&null!==e.memoizedState&&function(e,t,n,i){if("stylesheet"===n.type&&("string"!==typeof i.media||!1!==matchMedia(i.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var r=Zh(i.href),s=t.querySelector(Kh(r));if(s)return null!==(t=s._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=od.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=s,void et(s);s=t.ownerDocument||t,i=Gh(i),(r=zh.get(r))&&Xh(i,r),et(s=s.createElement("link"));var o=s;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),dh(s,"link",i),n.instance=s}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=od.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,ql,e.memoizedState,e.memoizedProps);break;case 5:default:rc(e,t,n);break;case 3:case 4:var i=ql;ql=Vh(e.stateNode.containerInfo),rc(e,t,n),ql=i;break;case 22:null===e.memoizedState&&(null!==(i=e.alternate)&&null!==i.memoizedState?(i=ic,ic=16777216,rc(e,t,n),ic=i):rc(e,t,n))}}function oc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function ac(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var i=t[n];Rl=i,uc(i,e)}oc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)lc(e),e=e.sibling}function lc(e){switch(e.tag){case 0:case 11:case 15:ac(e),2048&e.flags&&vl(9,e,e.return);break;case 3:case 12:default:ac(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,cc(e)):ac(e)}}function cc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var i=t[n];Rl=i,uc(i,e)}oc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:vl(8,t,t.return),cc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,cc(t));break;default:cc(t)}e=e.sibling}}function uc(e,t){for(;null!==Rl;){var n=Rl;switch(n.tag){case 0:case 11:case 15:vl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var i=n.memoizedState.cachePool.pool;null!=i&&i.refCount++}break;case 24:Ur(n.memoizedState.cache)}if(null!==(i=n.child))i.return=n,Rl=i;else e:for(n=e;null!==Rl;){var r=(i=Rl).sibling,s=i.return;if(Ml(i),i===n){Rl=null;break e}if(null!==r){r.return=s,Rl=r;break e}Rl=s}}}var hc={getCacheForType:function(e){var t=Lr(Fr),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Lr(Fr).controller.signal}},dc="function"===typeof WeakMap?WeakMap:Map,fc=0,pc=null,mc=null,gc=0,vc=0,_c=null,yc=!1,bc=!1,wc=!1,Ec=0,Sc=0,xc=0,kc=0,Cc=0,Tc=0,Ic=0,Nc=null,Pc=null,Ac=!1,Lc=0,Rc=0,Oc=1/0,Mc=null,Dc=null,jc=0,Fc=null,zc=null,Uc=0,Vc=0,Bc=null,Hc=null,qc=0,Wc=null;function Zc(){return 0!==(2&fc)&&0!==gc?gc&-gc:null!==O.T?Bu():Fe()}function Kc(){if(0===Tc)if(0===(536870912&gc)||hr){var e=xe;0===(3932160&(xe<<=1))&&(xe=262144),Tc=e}else Tc=536870912;return null!==(e=Ls.current)&&(e.flags|=32),Tc}function Gc(e,t,n){(e!==pc||2!==vc&&9!==vc)&&null===e.cancelPendingCommit||(tu(e,0),Jc(e,gc,Tc,!1)),Le(e,n),0!==(2&fc)&&e===pc||(e===pc&&(0===(2&fc)&&(kc|=n),4===Sc&&Jc(e,gc,Tc,!1)),Mu(e))}function Yc(e,t,n){if(0!==(6&fc))throw Error(o(327));for(var i=!n&&0===(127&t)&&0===(t&e.expiredLanes)||Ie(e,t),r=i?function(e,t){var n=fc;fc|=2;var i=ru(),r=su();pc!==e||gc!==t?(Mc=null,Oc=le()+500,tu(e,t)):bc=Ie(e,t);e:for(;;)try{if(0!==vc&&null!==mc){t=mc;var s=_c;t:switch(vc){case 1:vc=0,_c=null,du(e,t,s,1);break;case 2:case 9:if(ts(s)){vc=0,_c=null,hu(t);break}t=function(){2!==vc&&9!==vc||pc!==e||(vc=7),Mu(e)},s.then(t,t);break e;case 3:vc=7;break e;case 4:vc=5;break e;case 7:ts(s)?(vc=0,_c=null,hu(t)):(vc=0,_c=null,du(e,t,s,7));break;case 5:var a=null;switch(mc.tag){case 26:a=mc.memoizedState;case 5:case 27:var l=mc;if(a?rd(a):l.stateNode.complete){vc=0,_c=null;var c=l.sibling;if(null!==c)mc=c;else{var u=l.return;null!==u?(mc=u,fu(u)):mc=null}break t}}vc=0,_c=null,du(e,t,s,5);break;case 6:vc=0,_c=null,du(e,t,s,6);break;case 8:eu(),Sc=6;break e;default:throw Error(o(462))}}cu();break}catch(h){nu(e,h)}return xr=Sr=null,O.H=i,O.A=r,fc=n,null!==mc?0:(pc=null,gc=0,Pi(),Sc)}(e,t):au(e,t,!0),s=i;;){if(0===r){bc&&!i&&Jc(e,t,0,!1);break}if(n=e.current.alternate,!s||$c(n)){if(2===r){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;r=Nc;var c=l.current.memoizedState.isDehydrated;if(c&&(tu(l,a).flags|=256),2!==(a=au(l,a,!1))){if(wc&&!c){l.errorRecoveryDisabledLanes|=s,kc|=s,r=4;break e}s=Pc,Pc=r,null!==s&&(null===Pc?Pc=s:Pc.push.apply(Pc,s))}r=a}if(s=!1,2!==r)continue}}if(1===r){tu(e,0),Jc(e,t,0,!0);break}e:{switch(i=e,s=r){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:Jc(i,t,Tc,!yc);break e;case 2:Pc=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(r=Lc+300-le())){if(Jc(i,t,Tc,!yc),0!==Te(i,0,!0))break e;Uc=t,i.timeoutHandle=wh(Qc.bind(null,i,n,Pc,Mc,Ac,t,Tc,kc,Ic,yc,s,"Throttled",-0,0),r)}else Qc(i,n,Pc,Mc,Ac,t,Tc,kc,Ic,yc,s,null,-0,0)}break}r=au(e,t,!1),s=!1}Mu(e)}function Qc(e,t,n,i,r,s,o,a,l,c,u,h,d,f){if(e.timeoutHandle=-1,8192&(h=t.subtreeFlags)||16785408===(16785408&h)){sc(t,s,h={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Lt});var p=(62914560&s)===s?Lc-le():(4194048&s)===s?Rc-le():0;if(null!==(p=function(e,t){return e.stylesheets&&0===e.count&&ld(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var i=setTimeout(function(){if(e.stylesheets&&ld(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===sd&&(sd=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var r=n[i],s=r.transferSize,o=r.initiatorType,a=r.duration;if(s&&a&&fh(o)){for(o=0,a=r.responseEnd,i+=1;i<n.length;i++){var l=n[i],c=l.startTime;if(c>a)break;var u=l.transferSize,h=l.initiatorType;u&&fh(h)&&(o+=u*((l=l.responseEnd)<a?1:(a-c)/(l-c)))}if(--i,t+=8*(s+o)/(r.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"===typeof(e=navigator.connection.downlink)?e:5}());var r=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&ld(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>sd?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(r)}}:null}(h,p)))return Uc=s,e.cancelPendingCommit=p(mu.bind(null,e,t,s,n,i,r,o,a,l,u,h,null,d,f)),void Jc(e,s,o,!c)}mu(e,t,s,n,i,r,o,a,l)}function $c(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Jn(s(),r))return!1}catch(o){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Jc(e,t,n,i){t&=~Cc,t&=~kc,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var s=31-be(r),o=1<<s;i[s]=-1,r&=~o}0!==n&&Re(e,n,t)}function Xc(){return 0!==(6&fc)||(Du(0,!1),!1)}function eu(){if(null!==mc){if(0===vc)var e=mc.return;else xr=Sr=null,oo(e=mc),as=null,ls=0,e=mc;for(;null!==e;)ml(e.alternate,e),e=e.return;mc=null}}function tu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Eh(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Uc=0,eu(),pc=e,mc=n=Ui(e.current,null),gc=t,vc=0,_c=null,yc=!1,bc=Ie(e,t),wc=!1,Ic=Tc=Cc=kc=xc=Sc=0,Pc=Nc=null,Ac=!1,0!==(8&t)&&(t|=32&t);var i=e.entangledLanes;if(0!==i)for(e=e.entanglements,i&=t;0<i;){var r=31-be(i),s=1<<r;t|=e[r],i&=~s}return Ec=t,Pi(),n}function nu(e,t){Bs=null,O.H=ma,t===$r||t===Xr?(t=ss(),vc=3):t===Jr?(t=ss(),vc=4):vc=t===La?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,_c=t,null===mc&&(Sc=1,Ta(e,Gi(t,e.current)))}function iu(){var e=Ls.current;return null===e||((4194048&gc)===gc?null===Rs:((62914560&gc)===gc||0!==(536870912&gc))&&e===Rs)}function ru(){var e=O.H;return O.H=ma,null===e?ma:e}function su(){var e=O.A;return O.A=hc,e}function ou(){Sc=4,yc||(4194048&gc)!==gc&&null!==Ls.current||(bc=!0),0===(134217727&xc)&&0===(134217727&kc)||null===pc||Jc(pc,gc,Tc,!1)}function au(e,t,n){var i=fc;fc|=2;var r=ru(),s=su();pc===e&&gc===t||(Mc=null,tu(e,t)),t=!1;var o=Sc;e:for(;;)try{if(0!==vc&&null!==mc){var a=mc,l=_c;switch(vc){case 8:eu(),o=6;break e;case 3:case 2:case 9:case 6:null===Ls.current&&(t=!0);var c=vc;if(vc=0,_c=null,du(e,a,l,c),n&&bc){o=0;break e}break;default:c=vc,vc=0,_c=null,du(e,a,l,c)}}lu(),o=Sc;break}catch(u){nu(e,u)}return t&&e.shellSuspendCounter++,xr=Sr=null,fc=i,O.H=r,O.A=s,null===mc&&(pc=null,gc=0,Pi()),o}function lu(){for(;null!==mc;)uu(mc)}function cu(){for(;null!==mc&&!oe();)uu(mc)}function uu(e){var t=ol(e.alternate,e,Ec);e.memoizedProps=e.pendingProps,null===t?fu(e):mc=t}function hu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Wa(n,t,t.pendingProps,t.type,void 0,gc);break;case 11:t=Wa(n,t,t.pendingProps,t.type.render,t.ref,gc);break;case 5:oo(t);default:ml(n,t),t=ol(n,t=mc=Vi(t,Ec),Ec)}e.memoizedProps=e.pendingProps,null===t?fu(e):mc=t}function du(e,t,n,i){xr=Sr=null,oo(t),as=null,ls=0;var r=t.return;try{if(function(e,t,n,i,r){if(n.flags|=32768,null!==i&&"object"===typeof i&&"function"===typeof i.then){if(null!==(t=n.alternate)&&Nr(t,n,r,!0),null!==(n=Ls.current)){switch(n.tag){case 31:case 13:return null===Rs?ou():null===n.alternate&&0===Sc&&(Sc=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===es?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([i]):t.add(i),xu(e,i,r)),!1;case 22:return n.flags|=65536,i===es?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([i]):n.add(i),xu(e,i,r)),!1}throw Error(o(435,n.tag))}return xu(e,i,r),ou(),!1}if(hr)return null!==(t=Ls.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==pr&&wr(Gi(e=Error(o(422),{cause:i}),n))):(i!==pr&&wr(Gi(t=Error(o(423),{cause:i}),n)),(e=e.current.alternate).flags|=65536,r&=-r,e.lanes|=r,i=Gi(i,n),ws(e,r=Na(e.stateNode,i,r)),4!==Sc&&(Sc=2)),!1;var s=Error(o(520),{cause:i});if(s=Gi(s,n),null===Nc?Nc=[s]:Nc.push(s),4!==Sc&&(Sc=2),null===t)return!0;i=Gi(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,ws(n,e=Na(n.stateNode,i,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===Dc||!Dc.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,Aa(r=Pa(r),e,n,i),ws(n,r),!1}n=n.return}while(null!==n);return!1}(e,r,t,n,gc))return Sc=1,Ta(e,Gi(n,e.current)),void(mc=null)}catch(s){if(null!==r)throw mc=r,s;return Sc=1,Ta(e,Gi(n,e.current)),void(mc=null)}32768&t.flags?(hr||1===i?e=!0:bc||0!==(536870912&gc)?e=!1:(yc=e=!0,(2===i||9===i||3===i||6===i)&&(null!==(i=Ls.current)&&13===i.tag&&(i.flags|=16384))),pu(t,e)):fu(t)}function fu(e){var t=e;do{if(0!==(32768&t.flags))return void pu(t,yc);e=t.return;var n=fl(t.alternate,t,Ec);if(null!==n)return void(mc=n);if(null!==(t=t.sibling))return void(mc=t);mc=t=e}while(null!==t);0===Sc&&(Sc=5)}function pu(e,t){do{var n=pl(e.alternate,e);if(null!==n)return n.flags&=32767,void(mc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(mc=e);mc=e=n}while(null!==e);Sc=6,mc=null}function mu(e,t,n,i,r,s,a,l,c){e.cancelPendingCommit=null;do{bu()}while(0!==jc);if(0!==(6&fc))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(s=t.lanes|t.childLanes,function(e,t,n,i,r,s){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-be(n),h=1<<u;a[u]=0,l[u]=-1;var d=c[u];if(null!==d)for(c[u]=null,u=0;u<d.length;u++){var f=d[u];null!==f&&(f.lane&=-536870913)}n&=~h}0!==i&&Re(e,i,0),0!==s&&0===r&&0!==e.tag&&(e.suspendedLanes|=s&~(o&~t))}(e,n,s|=Ni,a,l,c),e===pc&&(mc=pc=null,gc=0),zc=t,Fc=e,Uc=n,Vc=s,Bc=r,Hc=i,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,re(de,function(){return wu(),null})):(e.callbackNode=null,e.callbackPriority=0),i=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||i){i=O.T,O.T=null,r=M.p,M.p=2,a=fc,fc|=4;try{!function(e,t){if(e=e.containerInfo,ph=yd,ri(e=ii(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch(g){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==r&&3!==d.nodeType||(l=a+r),d!==s||0!==i&&3!==d.nodeType||(c=a+i),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===r&&(l=a),f===s&&++h===i&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(mh={focusedElem:e,selectionRange:n},yd=!1,Rl=t;null!==Rl;)if(e=(t=Rl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Rl=e;else for(;null!==Rl;){switch(s=(t=Rl).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(r=e[n]).ref.impl=r.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var m=Sa(n.type,r);e=i.getSnapshotBeforeUpdate(m,s),i.__reactInternalSnapshotBeforeUpdate=e}catch(v){Su(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))Nh(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Nh(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,Rl=e;break}Rl=t.return}}(e,t)}finally{fc=a,M.p=r,O.T=i}}jc=1,gu(),vu(),_u()}}function gu(){if(1===jc){jc=0;var e=Fc,t=zc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=O.T,O.T=null;var i=M.p;M.p=2;var r=fc;fc|=4;try{Wl(t,e);var s=mh,o=ii(e.containerInfo),a=s.focusedElem,l=s.selectionRange;if(o!==a&&a&&a.ownerDocument&&ni(a.ownerDocument.documentElement,a)){if(null!==l&&ri(a)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(u,a.value.length);else{var h=a.ownerDocument||document,d=h&&h.defaultView||window;if(d.getSelection){var f=d.getSelection(),p=a.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(o=g,g=m,m=o);var v=ti(a,m),_=ti(a,g);if(v&&_&&(1!==f.rangeCount||f.anchorNode!==v.node||f.anchorOffset!==v.offset||f.focusNode!==_.node||f.focusOffset!==_.offset)){var y=h.createRange();y.setStart(v.node,v.offset),f.removeAllRanges(),m>g?(f.addRange(y),f.extend(_.node,_.offset)):(y.setEnd(_.node,_.offset),f.addRange(y))}}}}for(h=[],f=a;f=f.parentNode;)1===f.nodeType&&h.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<h.length;a++){var b=h[a];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}yd=!!ph,mh=ph=null}finally{fc=r,M.p=i,O.T=n}}e.current=t,jc=2}}function vu(){if(2===jc){jc=0;var e=Fc,t=zc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=O.T,O.T=null;var i=M.p;M.p=2;var r=fc;fc|=4;try{Ol(e,t.alternate,t)}finally{fc=r,M.p=i,O.T=n}}jc=3}}function _u(){if(4===jc||3===jc){jc=0,ae();var e=Fc,t=zc,n=Uc,i=Hc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?jc=5:(jc=0,zc=Fc=null,yu(e,e.pendingLanes));var r=e.pendingLanes;if(0===r&&(Dc=null),je(n),t=t.stateNode,_e&&"function"===typeof _e.onCommitFiberRoot)try{_e.onCommitFiberRoot(ve,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==i){t=O.T,r=M.p,M.p=2,O.T=null;try{for(var s=e.onRecoverableError,o=0;o<i.length;o++){var a=i[o];s(a.value,{componentStack:a.stack})}}finally{O.T=t,M.p=r}}0!==(3&Uc)&&bu(),Mu(e),r=e.pendingLanes,0!==(261930&n)&&0!==(42&r)?e===Wc?qc++:(qc=0,Wc=e):qc=0,Du(0,!1)}}function yu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ur(t)))}function bu(){return gu(),vu(),_u(),wu()}function wu(){if(5!==jc)return!1;var e=Fc,t=Vc;Vc=0;var n=je(Uc),i=O.T,r=M.p;try{M.p=32>n?32:n,O.T=null,n=Bc,Bc=null;var s=Fc,a=Uc;if(jc=0,zc=Fc=null,Uc=0,0!==(6&fc))throw Error(o(331));var l=fc;if(fc|=4,lc(s.current),ec(s,s.current,a,n),fc=l,Du(0,!1),_e&&"function"===typeof _e.onPostCommitFiberRoot)try{_e.onPostCommitFiberRoot(ve,s)}catch(c){}return!0}finally{M.p=r,O.T=i,yu(e,t)}}function Eu(e,t,n){t=Gi(n,t),null!==(e=ys(e,t=Na(e.stateNode,t,2),2))&&(Le(e,2),Mu(e))}function Su(e,t,n){if(3===e.tag)Eu(e,e,n);else for(;null!==t;){if(3===t.tag){Eu(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Dc||!Dc.has(i))){e=Gi(n,e),null!==(i=ys(t,n=Pa(2),2))&&(Aa(n,i,t,e),Le(i,2),Mu(i));break}}t=t.return}}function xu(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new dc;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(wc=!0,r.add(n),e=ku.bind(null,e,t,n),t.then(e,e))}function ku(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,pc===e&&(gc&n)===n&&(4===Sc||3===Sc&&(62914560&gc)===gc&&300>le()-Lc?0===(2&fc)&&tu(e,0):Cc|=n,Ic===gc&&(Ic=0)),Mu(e)}function Cu(e,t){0===t&&(t=Pe()),null!==(e=Ri(e,t))&&(Le(e,t),Mu(e))}function Tu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cu(e,n)}function Iu(e,t){var n=0;switch(e.tag){case 31:case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==i&&i.delete(t),Cu(e,n)}var Nu=null,Pu=null,Au=!1,Lu=!1,Ru=!1,Ou=0;function Mu(e){e!==Pu&&null===e.next&&(null===Pu?Nu=Pu=e:Pu=Pu.next=e),Lu=!0,Au||(Au=!0,xh(function(){0!==(6&fc)?re(ue,ju):Fu()}))}function Du(e,t){if(!Ru&&Lu){Ru=!0;do{for(var n=!1,i=Nu;null!==i;){if(!t)if(0!==e){var r=i.pendingLanes;if(0===r)var s=0;else{var o=i.suspendedLanes,a=i.pingedLanes;s=(1<<31-be(42|e)+1)-1,s=201326741&(s&=r&~(o&~a))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,Vu(i,s))}else s=gc,0===(3&(s=Te(i,i===pc?s:0,null!==i.cancelPendingCommit||-1!==i.timeoutHandle)))||Ie(i,s)||(n=!0,Vu(i,s));i=i.next}}while(n);Ru=!1}}function ju(){Fu()}function Fu(){Lu=Au=!1;var e=0;0!==Ou&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==bh&&(bh=e,!0);return bh=null,!1}()&&(e=Ou);for(var t=le(),n=null,i=Nu;null!==i;){var r=i.next,s=zu(i,t);0===s?(i.next=null,null===n?Nu=r:n.next=r,null===r&&(Pu=n)):(n=i,(0!==e||0!==(3&s))&&(Lu=!0)),i=r}0!==jc&&5!==jc||Du(e,!1),0!==Ou&&(Ou=0)}function zu(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var o=31-be(s),a=1<<o,l=r[o];-1===l?0!==(a&n)&&0===(a&i)||(r[o]=Ne(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}if(n=gc,n=Te(e,e===(t=pc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),i=e.callbackNode,0===n||e===t&&(2===vc||9===vc)||null!==e.cancelPendingCommit)return null!==i&&null!==i&&se(i),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Ie(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==i&&se(i),je(n)){case 2:case 8:n=he;break;case 32:default:n=de;break;case 268435456:n=pe}return i=Uu.bind(null,e),n=re(n,i),e.callbackPriority=t,e.callbackNode=n,t}return null!==i&&null!==i&&se(i),e.callbackPriority=2,e.callbackNode=null,2}function Uu(e,t){if(0!==jc&&5!==jc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(bu()&&e.callbackNode!==n)return null;var i=gc;return 0===(i=Te(e,e===pc?i:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Yc(e,i,t),zu(e,le()),null!=e.callbackNode&&e.callbackNode===n?Uu.bind(null,e):null)}function Vu(e,t){if(bu())return null;Yc(e,t,!0)}function Bu(){if(0===Ou){var e=Hr;0===e&&(e=Se,0===(261888&(Se<<=1))&&(Se=256)),Ou=e}return Ou}function Hu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:At(""+e)}function qu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Wu=0;Wu<xi.length;Wu++){var Zu=xi[Wu];ki(Zu.toLowerCase(),"on"+(Zu[0].toUpperCase()+Zu.slice(1)))}ki(gi,"onAnimationEnd"),ki(vi,"onAnimationIteration"),ki(_i,"onAnimationStart"),ki("dblclick","onDoubleClick"),ki("focusin","onFocus"),ki("focusout","onBlur"),ki(yi,"onTransitionRun"),ki(bi,"onTransitionStart"),ki(wi,"onTransitionCancel"),ki(Ei,"onTransitionEnd"),rt("onMouseEnter",["mouseout","mouseover"]),rt("onMouseLeave",["mouseout","mouseover"]),rt("onPointerEnter",["pointerout","pointerover"]),rt("onPointerLeave",["pointerout","pointerover"]),it("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),it("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),it("onBeforeInput",["compositionend","keypress","textInput","paste"]),it("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),it("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),it("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ku));function Yu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;s=a,r.currentTarget=c;try{s(r)}catch(u){Ci(u)}r.currentTarget=null,s=l}else for(o=0;o<i.length;o++){if(l=(a=i[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;s=a,r.currentTarget=c;try{s(r)}catch(u){Ci(u)}r.currentTarget=null,s=l}}}}function Qu(e,t){var n=t[qe];void 0===n&&(n=t[qe]=new Set);var i=e+"__bubble";n.has(i)||(eh(t,e,2,!1),n.add(i))}function $u(e,t,n){var i=0;t&&(i|=4),eh(n,e,i,t)}var Ju="_reactListening"+Math.random().toString(36).slice(2);function Xu(e){if(!e[Ju]){e[Ju]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Gu.has(t)||$u(t,!1,e),$u(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ju]||(t[Ju]=!0,$u("selectionchange",!1,t))}}function eh(e,t,n,i){switch(Cd(t)){case 2:var r=bd;break;case 8:r=wd;break;default:r=Ed}n=r.bind(null,t,n,e),r=void 0,!Bt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function th(e,t,n,i,r){var s=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var a=i.stateNode.containerInfo;if(a===r)break;if(4===o)for(o=i.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===r)return;o=o.return}for(;null!==a;){if(null===(o=Qe(a)))return;if(5===(c=o.tag)||6===c||26===c||27===c){i=s=o;continue e}a=a.parentNode}}i=i.return}zt(function(){var i=s,r=Ot(n),o=[];e:{var a=Si.get(e);if(void 0!==a){var c=nn,u=e;switch(e){case"keypress":if(0===Gt(n))break e;case"keydown":case"keyup":c=_n;break;case"focusin":u="focus",c=cn;break;case"focusout":u="blur",c=cn;break;case"beforeblur":case"afterblur":c=cn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=an;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=bn;break;case gi:case vi:case _i:c=un;break;case Ei:c=wn;break;case"scroll":case"scrollend":c=sn;break;case"wheel":c=En;break;case"copy":case"cut":case"paste":c=hn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=yn;break;case"toggle":case"beforetoggle":c=Sn}var h=0!==(4&t),d=!h&&("scroll"===e||"scrollend"===e),f=h?null!==a?a+"Capture":null:a;h=[];for(var p,m=i;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=Ut(m,f))&&h.push(nh(m,g,p)),d)break;m=m.return}0<h.length&&(a=new c(a,u,null,n,r),o.push({event:a,listeners:h}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===Rt||!(u=n.relatedTarget||n.fromElement)||!Qe(u)&&!u[He])&&(c||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=i,null!==(u=(u=n.relatedTarget||n.toElement)?Qe(u):null)&&(d=l(u),h=u.tag,u!==d||5!==h&&27!==h&&6!==h)&&(u=null)):(c=null,u=i),c!==u)){if(h=an,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(h=yn,g="onPointerLeave",f="onPointerEnter",m="pointer"),d=null==c?a:Je(c),p=null==u?a:Je(u),(a=new h(g,m+"leave",c,n,r)).target=d,a.relatedTarget=p,g=null,Qe(r)===i&&((h=new h(f,m+"enter",u,n,r)).target=p,h.relatedTarget=d,g=h),d=g,c&&u)e:{for(h=rh,m=u,p=0,g=f=c;g;g=h(g))p++;g=0;for(var v=m;v;v=h(v))g++;for(;0<p-g;)f=h(f),p--;for(;0<g-p;)m=h(m),g--;for(;p--;){if(f===m||null!==m&&f===m.alternate){h=f;break e}f=h(f),m=h(m)}h=null}else h=null;null!==c&&sh(o,a,c,h,!1),null!==u&&null!==d&&sh(o,d,u,h,!0)}if("select"===(c=(a=i?Je(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var _=Vn;else if(Mn(a))if(Bn)_=$n;else{_=Yn;var y=Gn}else!(c=a.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?i&&It(i.elementType)&&(_=Vn):_=Qn;switch(_&&(_=_(e,i))?Dn(o,_,n,r):(y&&y(e,a,i),"focusout"===e&&i&&"number"===a.type&&null!=i.memoizedProps.value&&bt(a,"number",a.value)),y=i?Je(i):window,e){case"focusin":(Mn(y)||"true"===y.contentEditable)&&(oi=y,ai=i,li=null);break;case"focusout":li=ai=oi=null;break;case"mousedown":ci=!0;break;case"contextmenu":case"mouseup":case"dragend":ci=!1,ui(o,n,r);break;case"selectionchange":if(si)break;case"keydown":case"keyup":ui(o,n,r)}var b;if(kn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Rn?An(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(In&&"ko"!==n.locale&&(Rn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Rn&&(b=Kt()):(Wt="value"in(qt=r)?qt.value:qt.textContent,Rn=!0)),0<(y=ih(i,w)).length&&(w=new dn(w,e,null,n,r),o.push({event:w,listeners:y}),b?w.data=b:null!==(b=Ln(n))&&(w.data=b))),(b=Tn?function(e,t){switch(e){case"compositionend":return Ln(t);case"keypress":return 32!==t.which?null:(Pn=!0,Nn);case"textInput":return(e=t.data)===Nn&&Pn?null:e;default:return null}}(e,n):function(e,t){if(Rn)return"compositionend"===e||!kn&&An(e,t)?(e=Kt(),Zt=Wt=qt=null,Rn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return In&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=ih(i,"onBeforeInput")).length&&(y=new dn("onBeforeInput","beforeinput",null,n,r),o.push({event:y,listeners:w}),y.data=b)),function(e,t,n,i,r){if("submit"===t&&n&&n.stateNode===r){var s=Hu((r[Be]||null).action),o=i.submitter;o&&null!==(t=(t=o[Be]||null)?Hu(t.formAction):o.getAttribute("formAction"))&&(s=t,o=null);var a=new nn("action","action",null,i,r);e.push({event:a,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(0!==Ou){var e=o?qu(r,o):new FormData(r);ta(n,{pending:!0,data:e,method:r.method,action:s},null,e)}}else"function"===typeof s&&(a.preventDefault(),e=o?qu(r,o):new FormData(r),ta(n,{pending:!0,data:e,method:r.method,action:s},s,e))},currentTarget:r}]})}}(o,e,i,n,r)}Yu(o,t)})}function nh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ih(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,s=r.stateNode;if(5!==(r=r.tag)&&26!==r&&27!==r||null===s||(null!=(r=Ut(e,n))&&i.unshift(nh(e,r,s)),null!=(r=Ut(e,t))&&i.push(nh(e,r,s))),3===e.tag)return i;e=e.return}return[]}function rh(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function sh(e,t,n,i,r){for(var s=t._reactName,o=[];null!==n&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,null!==l&&l===i)break;5!==a&&26!==a&&27!==a||null===c||(l=c,r?null!=(c=Ut(n,s))&&o.unshift(nh(n,c,l)):r||null!=(c=Ut(n,s))&&o.push(nh(n,c,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var oh=/\r\n?/g,ah=/\u0000|\uFFFD/g;function lh(e){return("string"===typeof e?e:""+e).replace(oh,"\n").replace(ah,"")}function ch(e,t){return t=lh(t),lh(e)===t}function uh(e,t,n,i,r,s){switch(n){case"children":"string"===typeof i?"body"===t||"textarea"===t&&""===i||xt(e,i):("number"===typeof i||"bigint"===typeof i)&&"body"!==t&&xt(e,""+i);break;case"className":ct(e,"class",i);break;case"tabIndex":ct(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,n,i);break;case"style":Tt(e,i,s);break;case"data":if("object"!==t){ct(e,"data",i);break}case"src":case"href":if(""===i&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==i||"function"===typeof i||"symbol"===typeof i||"boolean"===typeof i){e.removeAttribute(n);break}i=At(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if("function"===typeof i){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&uh(e,t,"name",r.name,r,null),uh(e,t,"formEncType",r.formEncType,r,null),uh(e,t,"formMethod",r.formMethod,r,null),uh(e,t,"formTarget",r.formTarget,r,null)):(uh(e,t,"encType",r.encType,r,null),uh(e,t,"method",r.method,r,null),uh(e,t,"target",r.target,r,null))),null==i||"symbol"===typeof i||"boolean"===typeof i){e.removeAttribute(n);break}i=At(""+i),e.setAttribute(n,i);break;case"onClick":null!=i&&(e.onclick=Lt);break;case"onScroll":null!=i&&Qu("scroll",e);break;case"onScrollEnd":null!=i&&Qu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!==typeof i||!("__html"in i))throw Error(o(61));if(null!=(n=i.__html)){if(null!=r.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&"function"!==typeof i&&"symbol"!==typeof i;break;case"muted":e.muted=i&&"function"!==typeof i&&"symbol"!==typeof i;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==i||"function"===typeof i||"boolean"===typeof i||"symbol"===typeof i){e.removeAttribute("xlink:href");break}n=At(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=i&&"function"!==typeof i&&"symbol"!==typeof i?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&"function"!==typeof i&&"symbol"!==typeof i?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===i?e.setAttribute(n,""):!1!==i&&null!=i&&"function"!==typeof i&&"symbol"!==typeof i?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":null==i||"function"===typeof i||"symbol"===typeof i||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":Qu("beforetoggle",e),Qu("toggle",e),lt(e,"popover",i);break;case"xlinkActuate":ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":ut(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":ut(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":ut(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":ut(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":lt(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&lt(e,n=Nt.get(n)||n,i)}}function hh(e,t,n,i,r,s){switch(n){case"style":Tt(e,i,s);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!==typeof i||!("__html"in i))throw Error(o(61));if(null!=(n=i.__html)){if(null!=r.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"===typeof i?xt(e,i):("number"===typeof i||"bigint"===typeof i)&&xt(e,""+i);break;case"onScroll":null!=i&&Qu("scroll",e);break;case"onScrollEnd":null!=i&&Qu("scrollend",e);break;case"onClick":null!=i&&(e.onclick=Lt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),"function"===typeof(s=null!=(s=e[Be]||null)?s[n]:null)&&e.removeEventListener(t,s,r),"function"!==typeof i)?n in e?e[n]=i:!0===i?e.setAttribute(n,""):lt(e,n,i):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r)))}}function dh(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qu("error",e),Qu("load",e);var i,r=!1,s=!1;for(i in n)if(n.hasOwnProperty(i)){var a=n[i];if(null!=a)switch(i){case"src":r=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:uh(e,t,i,a,n,null)}}return s&&uh(e,t,"srcSet",n.srcSet,n,null),void(r&&uh(e,t,"src",n.src,n,null));case"input":Qu("invalid",e);var l=i=a=s=null,c=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var h=n[r];if(null!=h)switch(r){case"name":s=h;break;case"type":a=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":i=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(o(137,t));break;default:uh(e,t,r,h,n,null)}}return void yt(e,i,l,c,u,a,s,!1);case"select":for(s in Qu("invalid",e),r=a=i=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":i=l;break;case"defaultValue":a=l;break;case"multiple":r=l;default:uh(e,t,s,l,n,null)}return t=i,n=a,e.multiple=!!r,void(null!=t?wt(e,!!r,t,!1):null!=n&&wt(e,!!r,n,!0));case"textarea":for(a in Qu("invalid",e),i=s=r=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":r=l;break;case"defaultValue":s=l;break;case"children":i=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:uh(e,t,a,l,n,null)}return void St(e,r,s,i);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(r=n[c]))if("selected"===c)e.selected=r&&"function"!==typeof r&&"symbol"!==typeof r;else uh(e,t,c,r,n,null);return;case"dialog":Qu("beforetoggle",e),Qu("toggle",e),Qu("cancel",e),Qu("close",e);break;case"iframe":case"object":Qu("load",e);break;case"video":case"audio":for(r=0;r<Ku.length;r++)Qu(Ku[r],e);break;case"image":Qu("error",e),Qu("load",e);break;case"details":Qu("toggle",e);break;case"embed":case"source":case"link":Qu("error",e),Qu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(r=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:uh(e,t,u,r,n,null)}return;default:if(It(t)){for(h in n)n.hasOwnProperty(h)&&(void 0!==(r=n[h])&&hh(e,t,h,r,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(r=n[l])&&uh(e,t,l,r,n,null))}function fh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var ph=null,mh=null;function gh(e){return 9===e.nodeType?e:e.ownerDocument}function vh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _h(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function yh(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var bh=null;var wh="function"===typeof setTimeout?setTimeout:void 0,Eh="function"===typeof clearTimeout?clearTimeout:void 0,Sh="function"===typeof Promise?Promise:void 0,xh="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Sh?function(e){return Sh.resolve(null).then(e).catch(kh)}:wh;function kh(e){setTimeout(function(){throw e})}function Ch(e){return"head"===e}function Th(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)||"/&"===n){if(0===i)return e.removeChild(r),void qd(t);i--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)i++;else if("html"===n)Fh(e.ownerDocument.documentElement);else if("head"===n){Fh(n=e.ownerDocument.head);for(var s=n.firstChild;s;){var o=s.nextSibling,a=s.nodeName;s[Ge]||"SCRIPT"===a||"STYLE"===a||"LINK"===a&&"stylesheet"===s.rel.toLowerCase()||n.removeChild(s),s=o}}else"body"===n&&Fh(e.ownerDocument.body);n=r}while(n);qd(t)}function Ih(e,t){var n=e;e=0;do{var i=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=i}while(n)}function Nh(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Nh(n),Ye(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Ph(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Rh(e.nextSibling)))return null}return e}function Ah(e){return"$?"===e.data||"$~"===e.data}function Lh(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Rh(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Oh=null;function Mh(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Rh(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Dh(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function jh(e,t,n){switch(t=gh(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function Fh(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ye(e)}var zh=new Map,Uh=new Set;function Vh(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Bh=M.d;M.d={f:function(){var e=Bh.f(),t=Xc();return e||t},r:function(e){var t=$e(e);null!==t&&5===t.tag&&"form"===t.type?ia(t):Bh.r(e)},D:function(e){Bh.D(e),qh("dns-prefetch",e,null)},C:function(e,t){Bh.C(e,t),qh("preconnect",e,t)},L:function(e,t,n){Bh.L(e,t,n);var i=Hh;if(i&&e&&t){var r='link[rel="preload"][as="'+vt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(r+='[imagesrcset="'+vt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(r+='[imagesizes="'+vt(n.imageSizes)+'"]')):r+='[href="'+vt(e)+'"]';var s=r;switch(t){case"style":s=Zh(e);break;case"script":s=Yh(e)}zh.has(s)||(e=f({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),zh.set(s,e),null!==i.querySelector(r)||"style"===t&&i.querySelector(Kh(s))||"script"===t&&i.querySelector(Qh(s))||(dh(t=i.createElement("link"),"link",e),et(t),i.head.appendChild(t)))}},m:function(e,t){Bh.m(e,t);var n=Hh;if(n&&e){var i=t&&"string"===typeof t.as?t.as:"script",r='link[rel="modulepreload"][as="'+vt(i)+'"][href="'+vt(e)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Yh(e)}if(!zh.has(s)&&(e=f({rel:"modulepreload",href:e},t),zh.set(s,e),null===n.querySelector(r))){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Qh(s)))return}dh(i=n.createElement("link"),"link",e),et(i),n.head.appendChild(i)}}},X:function(e,t){Bh.X(e,t);var n=Hh;if(n&&e){var i=Xe(n).hoistableScripts,r=Yh(e),s=i.get(r);s||((s=n.querySelector(Qh(r)))||(e=f({src:e,async:!0},t),(t=zh.get(r))&&ed(e,t),et(s=n.createElement("script")),dh(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}},S:function(e,t,n){Bh.S(e,t,n);var i=Hh;if(i&&e){var r=Xe(i).hoistableStyles,s=Zh(e);t=t||"default";var o=r.get(s);if(!o){var a={loading:0,preload:null};if(o=i.querySelector(Kh(s)))a.loading=5;else{e=f({rel:"stylesheet",href:e,"data-precedence":t},n),(n=zh.get(s))&&Xh(e,n);var l=o=i.createElement("link");et(l),dh(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,Jh(o,t,i)}o={type:"stylesheet",instance:o,count:1,state:a},r.set(s,o)}}},M:function(e,t){Bh.M(e,t);var n=Hh;if(n&&e){var i=Xe(n).hoistableScripts,r=Yh(e),s=i.get(r);s||((s=n.querySelector(Qh(r)))||(e=f({src:e,async:!0,type:"module"},t),(t=zh.get(r))&&ed(e,t),et(s=n.createElement("script")),dh(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}};var Hh="undefined"===typeof document?null:document;function qh(e,t,n){var i=Hh;if(i&&"string"===typeof t&&t){var r=vt(t);r='link[rel="'+e+'"][href="'+r+'"]',"string"===typeof n&&(r+='[crossorigin="'+n+'"]'),Uh.has(r)||(Uh.add(r),e={rel:e,crossOrigin:n,href:t},null===i.querySelector(r)&&(dh(t=i.createElement("link"),"link",e),et(t),i.head.appendChild(t)))}}function Wh(e,t,n,i){var r,s,a,l,c=(c=Z.current)?Vh(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Zh(n.href),(i=(n=Xe(c).hoistableStyles).get(t))||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Zh(n.href);var u=Xe(c).hoistableStyles,h=u.get(e);if(h||(c=c.ownerDocument||c,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,h),(u=c.querySelector(Kh(e)))&&!u._p&&(h.instance=u,h.state.loading=5),zh.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},zh.set(e,n),u||(r=c,s=e,a=n,l=h.state,r.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=r.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),dh(s,"link",a),et(s),r.head.appendChild(s))))),t&&null===i)throw Error(o(528,""));return h}if(t&&null!==i)throw Error(o(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Yh(n),(i=(n=Xe(c).hoistableScripts).get(t))||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Zh(e){return'href="'+vt(e)+'"'}function Kh(e){return'link[rel="stylesheet"]['+e+"]"}function Gh(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function Yh(e){return'[src="'+vt(e)+'"]'}function Qh(e){return"script[async]"+e}function $h(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+vt(n.href)+'"]');if(i)return t.instance=i,et(i),i;var r=f({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(i=(e.ownerDocument||e).createElement("style")),dh(i,"style",r),Jh(i,n.precedence,e),t.instance=i;case"stylesheet":r=Zh(n.href);var s=e.querySelector(Kh(r));if(s)return t.state.loading|=4,t.instance=s,et(s),s;i=Gh(n),(r=zh.get(r))&&Xh(i,r),et(s=(e.ownerDocument||e).createElement("link"));var a=s;return a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),dh(s,"link",i),t.state.loading|=4,Jh(s,n.precedence,e),t.instance=s;case"script":return s=Yh(n.src),(r=e.querySelector(Qh(s)))?(t.instance=r,et(r),r):(i=n,(r=zh.get(s))&&ed(i=f({},n),r),et(r=(e=e.ownerDocument||e).createElement("script")),dh(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(i=t.instance,t.state.loading|=4,Jh(i,n.precedence,e));return t.instance}function Jh(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,o=0;o<i.length;o++){var a=i[o];if(a.dataset.precedence===t)s=a;else if(s!==r)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Xh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function ed(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var td=null;function nd(e,t,n){if(null===td){var i=new Map,r=td=new Map;r.set(n,i)}else(i=(r=td).get(n))||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var s=n[r];if(!(s[Ge]||s[Ve]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var o=s.getAttribute(t)||"";o=e+o;var a=i.get(o);a?a.push(s):i.set(o,[s])}}return i}function id(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function rd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var sd=0;function od(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)ld(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var ad=null;function ld(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,ad=new Map,t.forEach(cd,e),ad=null,od.call(e))}function cd(e,t){if(!(4&t.state.loading)){var n=ad.get(e);if(n)var i=n.get(null);else{n=new Map,ad.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var o=r[s];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),i=o)}i&&n.set(null,i)}o=(r=t.instance).getAttribute("data-precedence"),(s=n.get(o)||i)===i&&n.set(null,r),n.set(o,r),this.count++,i=od.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(r,e.firstChild),t.state.loading|=4}}var ud={$$typeof:w,Provider:null,Consumer:null,_currentValue:D,_currentValue2:D,_threadCount:0};function hd(e,t,n,i,r,s,o,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ae(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ae(0),this.hiddenUpdates=Ae(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function dd(e,t,n,i,r,s,o,a,l,c,u,h){return e=new hd(e,t,n,o,l,c,u,h,a),t=1,!0===s&&(t|=24),s=Fi(3,null,null,t),e.current=s,s.stateNode=e,(t=zr()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},gs(s),e}function fd(e){return e?e=Di:Di}function pd(e,t,n,i,r,s){r=fd(r),null===i.context?i.context=r:i.pendingContext=r,(i=_s(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(i.callback=s),null!==(n=ys(e,i,t))&&(Gc(n,0,t),bs(n,e,t))}function md(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function gd(e,t){md(e,t),(e=e.alternate)&&md(e,t)}function vd(e){if(13===e.tag||31===e.tag){var t=Ri(e,67108864);null!==t&&Gc(t,0,67108864),gd(e,67108864)}}function _d(e){if(13===e.tag||31===e.tag){var t=Zc(),n=Ri(e,t=De(t));null!==n&&Gc(n,0,t),gd(e,t)}}var yd=!0;function bd(e,t,n,i){var r=O.T;O.T=null;var s=M.p;try{M.p=2,Ed(e,t,n,i)}finally{M.p=s,O.T=r}}function wd(e,t,n,i){var r=O.T;O.T=null;var s=M.p;try{M.p=8,Ed(e,t,n,i)}finally{M.p=s,O.T=r}}function Ed(e,t,n,i){if(yd){var r=Sd(i);if(null===r)th(e,t,i,xd,n),Md(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Id=Dd(Id,e,t,n,i,r),!0;case"dragenter":return Nd=Dd(Nd,e,t,n,i,r),!0;case"mouseover":return Pd=Dd(Pd,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return Ad.set(s,Dd(Ad.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Ld.set(s,Dd(Ld.get(s)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Md(e,i),4&t&&-1<Od.indexOf(e)){for(;null!==r;){var s=$e(r);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var o=Ce(s.pendingLanes);if(0!==o){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-be(o);a.entanglements[1]|=l,o&=~l}Mu(s),0===(6&fc)&&(Oc=le()+500,Du(0,!1))}}break;case 31:case 13:null!==(a=Ri(s,2))&&Gc(a,0,2),Xc(),gd(s,2)}if(null===(s=Sd(i))&&th(e,t,i,xd,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else th(e,t,i,null,n)}}function Sd(e){return kd(e=Ot(e))}var xd=null;function kd(e){if(xd=null,null!==(e=Qe(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(31===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return xd=e,null}function Cd(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case he:return 8;case de:case fe:return 32;case pe:return 268435456;default:return 32}default:return 32}}var Td=!1,Id=null,Nd=null,Pd=null,Ad=new Map,Ld=new Map,Rd=[],Od="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Md(e,t){switch(e){case"focusin":case"focusout":Id=null;break;case"dragenter":case"dragleave":Nd=null;break;case"mouseover":case"mouseout":Pd=null;break;case"pointerover":case"pointerout":Ad.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ld.delete(t.pointerId)}}function Dd(e,t,n,i,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==t&&(null!==(t=$e(t))&&vd(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function jd(e){var t=Qe(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void ze(e.priority,function(){_d(n)})}else if(31===t){if(null!==(t=u(n)))return e.blockedOn=t,void ze(e.priority,function(){_d(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Fd(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Sd(e.nativeEvent);if(null!==n)return null!==(t=$e(n))&&vd(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);Rt=i,n.target.dispatchEvent(i),Rt=null,t.shift()}return!0}function zd(e,t,n){Fd(e)&&n.delete(t)}function Ud(){Td=!1,null!==Id&&Fd(Id)&&(Id=null),null!==Nd&&Fd(Nd)&&(Nd=null),null!==Pd&&Fd(Pd)&&(Pd=null),Ad.forEach(zd),Ld.forEach(zd)}function Vd(e,t){e.blockedOn===t&&(e.blockedOn=null,Td||(Td=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ud)))}var Bd=null;function Hd(e){Bd!==e&&(Bd=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Bd===e&&(Bd=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if("function"!==typeof i){if(null===kd(i||n))continue;break}var s=$e(n);null!==s&&(e.splice(t,3),t-=3,ta(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function qd(e){function t(t){return Vd(t,e)}null!==Id&&Vd(Id,e),null!==Nd&&Vd(Nd,e),null!==Pd&&Vd(Pd,e),Ad.forEach(t),Ld.forEach(t);for(var n=0;n<Rd.length;n++){var i=Rd[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Rd.length&&null===(n=Rd[0]).blockedOn;)jd(n),null===n.blockedOn&&Rd.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],o=r[Be]||null;if("function"===typeof s)o||Hd(n);else if(o){var a=null;if(s&&s.hasAttribute("formAction")){if(r=s,o=s[Be]||null)a=o.formAction;else if(null!==kd(r))continue}else a=o.action;"function"===typeof a?n[i+1]=a:(n.splice(i,3),i-=3),Hd(n)}}}function Wd(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return r=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==r&&(r(),r=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var i=!1,r=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==r&&(r(),r=null)}}}function Zd(e){this._internalRoot=e}function Kd(e){this._internalRoot=e}Kd.prototype.render=Zd.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));pd(t.current,Zc(),e,t,null,null)},Kd.prototype.unmount=Zd.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;pd(e.current,2,null,e,null,null),Xc(),t[He]=null}},Kd.prototype.unstable_scheduleHydration=function(e){if(e){var t=Fe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rd.length&&0!==t&&t<Rd[n].priority;n++);Rd.splice(n,0,e),0===n&&jd(e)}};var Gd=r.version;if("19.2.0"!==Gd)throw Error(o(527,Gd,"19.2.0"));M.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var s=r.alternate;if(null===s){if(null!==(i=r.return)){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return h(r),e;if(s===i)return h(r),t;s=s.sibling}throw Error(o(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,c=r.child;c;){if(c===n){a=!0,n=r,i=s;break}if(c===i){a=!0,i=r,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,i=r;break}if(c===i){a=!0,i=s,n=r;break}c=c.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==i)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Yd={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Qd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qd.isDisabled&&Qd.supportsFiber)try{ve=Qd.inject(Yd),_e=Qd}catch(Jd){}}t.createRoot=function(e,t){if(!a(e))throw Error(o(299));var n=!1,i="",r=xa,s=ka,l=Ca;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onUncaughtError&&(r=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=dd(e,1,!1,null,0,n,i,null,r,s,l,Wd),e[He]=t.current,Xu(e),new Zd(t)},t.hydrateRoot=function(e,t,n){if(!a(e))throw Error(o(299));var i=!1,r="",s=xa,l=ka,c=Ca,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(r=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=dd(e,1,!0,t,0,i,r,u,s,l,c,Wd)).context=fd(null),n=t.current,(r=_s(i=De(i=Zc()))).callback=null,ys(n,r,i),n=i,t.current.lanes=n,Le(t,n),Mu(t),e[He]=t.current,Xu(e),new Kd(t)},t.version="19.2.0"},43:(e,t,n)=>{"use strict";e.exports=n(288)},228:function(e,t){!function(e){"use strict";var t="1.9.4";function n(e){var t,n,i,r;for(n=1,i=arguments.length;n<i;n++)for(t in r=arguments[n])e[t]=r[t];return e}var i=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function r(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var i=n.call(arguments,2);return function(){return e.apply(t,i.length?i.concat(n.call(arguments)):arguments)}}var s=0;function o(e){return"_leaflet_id"in e||(e._leaflet_id=++s),e._leaflet_id}function a(e,t,n){var i,r,s,o;return o=function(){i=!1,r&&(s.apply(n,r),r=!1)},s=function(){i?r=arguments:(e.apply(n,arguments),setTimeout(o,t),i=!0)},s}function l(e,t,n){var i=t[1],r=t[0],s=i-r;return e===i&&n?e:((e-r)%s+s)%s+r}function c(){return!1}function u(e,t){if(!1===t)return e;var n=Math.pow(10,void 0===t?6:t);return Math.round(e*n)/n}function h(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function d(e){return h(e).split(/\s+/)}function f(e,t){for(var n in Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?i(e.options):{}),t)e.options[n]=t[n];return e.options}function p(e,t,n){var i=[];for(var r in e)i.push(encodeURIComponent(n?r.toUpperCase():r)+"="+encodeURIComponent(e[r]));return(t&&-1!==t.indexOf("?")?"&":"?")+i.join("&")}var m=/\{ *([\w_ -]+) *\}/g;function g(e,t){return e.replace(m,function(e,n){var i=t[n];if(void 0===i)throw new Error("No value provided for variable "+e);return"function"===typeof i&&(i=i(t)),i})}var v=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function _(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}var y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var w=0;function E(e){var t=+new Date,n=Math.max(0,16-(t-w));return w=t+n,window.setTimeout(e,n)}var S=window.requestAnimationFrame||b("RequestAnimationFrame")||E,x=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function k(e,t,n){if(!n||S!==E)return S.call(window,r(e,t));e.call(t)}function C(e){e&&x.call(window,e)}var T={__proto__:null,extend:n,create:i,bind:r,get lastId(){return s},stamp:o,throttle:a,wrapNum:l,falseFn:c,formatNum:u,trim:h,splitWords:d,setOptions:f,getParamString:p,template:g,isArray:v,indexOf:_,emptyImageUrl:y,requestFn:S,cancelFn:x,requestAnimFrame:k,cancelAnimFrame:C};function I(){}function N(e){if("undefined"!==typeof L&&L&&L.Mixin){e=v(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}I.extend=function(e){var t=function(){f(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=t.__super__=this.prototype,s=i(r);for(var o in s.constructor=t,t.prototype=s,this)Object.prototype.hasOwnProperty.call(this,o)&&"prototype"!==o&&"__super__"!==o&&(t[o]=this[o]);return e.statics&&n(t,e.statics),e.includes&&(N(e.includes),n.apply(null,[s].concat(e.includes))),n(s,e),delete s.statics,delete s.includes,s.options&&(s.options=r.options?i(r.options):{},n(s.options,e.options)),s._initHooks=[],s.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=s._initHooks.length;e<t;e++)s._initHooks[e].call(this)}},t},I.include=function(e){var t=this.prototype.options;return n(this.prototype,e),e.options&&(this.prototype.options=t,this.mergeOptions(e.options)),this},I.mergeOptions=function(e){return n(this.prototype.options,e),this},I.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n="function"===typeof e?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var P={on:function(e,t,n){if("object"===typeof e)for(var i in e)this._on(i,e[i],t);else for(var r=0,s=(e=d(e)).length;r<s;r++)this._on(e[r],t,n);return this},off:function(e,t,n){if(arguments.length)if("object"===typeof e)for(var i in e)this._off(i,e[i],t);else{e=d(e);for(var r=1===arguments.length,s=0,o=e.length;s<o;s++)r?this._off(e[s]):this._off(e[s],t,n)}else delete this._events;return this},_on:function(e,t,n,i){if("function"===typeof t){if(!1===this._listens(e,t,n)){n===this&&(n=void 0);var r={fn:t,ctx:n};i&&(r.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(r)}}else console.warn("wrong listener type: "+typeof t)},_off:function(e,t,n){var i,r,s;if(this._events&&(i=this._events[e]))if(1!==arguments.length)if("function"===typeof t){var o=this._listens(e,t,n);if(!1!==o){var a=i[o];this._firingCount&&(a.fn=c,this._events[e]=i=i.slice()),i.splice(o,1)}}else console.warn("wrong listener type: "+typeof t);else{if(this._firingCount)for(r=0,s=i.length;r<s;r++)i[r].fn=c;delete this._events[e]}},fire:function(e,t,i){if(!this.listens(e,i))return this;var r=n({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var s=this._events[e];if(s){this._firingCount=this._firingCount+1||1;for(var o=0,a=s.length;o<a;o++){var l=s[o],c=l.fn;l.once&&this.off(e,c,l.ctx),c.call(l.ctx||this,r)}this._firingCount--}}return i&&this._propagateEvent(r),this},listens:function(e,t,n,i){"string"!==typeof e&&console.warn('"string" type argument expected');var r=t;"function"!==typeof t&&(i=!!t,r=void 0,n=void 0);var s=this._events&&this._events[e];if(s&&s.length&&!1!==this._listens(e,r,n))return!0;if(i)for(var o in this._eventParents)if(this._eventParents[o].listens(e,t,n,i))return!0;return!1},_listens:function(e,t,n){if(!this._events)return!1;var i=this._events[e]||[];if(!t)return!!i.length;n===this&&(n=void 0);for(var r=0,s=i.length;r<s;r++)if(i[r].fn===t&&i[r].ctx===n)return r;return!1},once:function(e,t,n){if("object"===typeof e)for(var i in e)this._on(i,e[i],t,!0);else for(var r=0,s=(e=d(e)).length;r<s;r++)this._on(e[r],t,n,!0);return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[o(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[o(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,n({layer:e.target,propagatedFrom:e.target},e),!0)}};P.addEventListener=P.on,P.removeEventListener=P.clearAllEventListeners=P.off,P.addOneTimeEventListener=P.once,P.fireEvent=P.fire,P.hasEventListeners=P.listens;var A=I.extend(P);function R(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t}var O=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};function M(e,t,n){return e instanceof R?e:v(e)?new R(e[0],e[1]):void 0===e||null===e?e:"object"===typeof e&&"x"in e&&"y"in e?new R(e.x,e.y):new R(e,t,n)}function D(e,t){if(e)for(var n=t?[e,t]:e,i=0,r=n.length;i<r;i++)this.extend(n[i])}function j(e,t){return!e||e instanceof D?e:new D(e,t)}function F(e,t){if(e)for(var n=t?[e,t]:e,i=0,r=n.length;i<r;i++)this.extend(n[i])}function z(e,t){return e instanceof F?e:new F(e,t)}function U(e,t,n){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,void 0!==n&&(this.alt=+n)}function V(e,t,n){return e instanceof U?e:v(e)&&"object"!==typeof e[0]?3===e.length?new U(e[0],e[1],e[2]):2===e.length?new U(e[0],e[1]):null:void 0===e||null===e?e:"object"===typeof e&&"lat"in e?new U(e.lat,"lng"in e?e.lng:e.lon,e.alt):void 0===t?null:new U(e,t,n)}R.prototype={clone:function(){return new R(this.x,this.y)},add:function(e){return this.clone()._add(M(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(M(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new R(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new R(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=O(this.x),this.y=O(this.y),this},distanceTo:function(e){var t=(e=M(e)).x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},equals:function(e){return(e=M(e)).x===this.x&&e.y===this.y},contains:function(e){return e=M(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}},D.prototype={extend:function(e){var t,n;if(!e)return this;if(e instanceof R||"number"===typeof e[0]||"x"in e)t=n=M(e);else if(t=(e=j(e)).min,n=e.max,!t||!n)return this;return this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)):(this.min=t.clone(),this.max=n.clone()),this},getCenter:function(e){return M((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return M(this.min.x,this.max.y)},getTopRight:function(){return M(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return(e="number"===typeof e[0]||e instanceof R?M(e):j(e))instanceof D?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=j(e);var t=this.min,n=this.max,i=e.min,r=e.max,s=r.x>=t.x&&i.x<=n.x,o=r.y>=t.y&&i.y<=n.y;return s&&o},overlaps:function(e){e=j(e);var t=this.min,n=this.max,i=e.min,r=e.max,s=r.x>t.x&&i.x<n.x,o=r.y>t.y&&i.y<n.y;return s&&o},isValid:function(){return!(!this.min||!this.max)},pad:function(e){var t=this.min,n=this.max,i=Math.abs(t.x-n.x)*e,r=Math.abs(t.y-n.y)*e;return j(M(t.x-i,t.y-r),M(n.x+i,n.y+r))},equals:function(e){return!!e&&(e=j(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight()))}},F.prototype={extend:function(e){var t,n,i=this._southWest,r=this._northEast;if(e instanceof U)t=e,n=e;else{if(!(e instanceof F))return e?this.extend(V(e)||z(e)):this;if(t=e._southWest,n=e._northEast,!t||!n)return this}return i||r?(i.lat=Math.min(t.lat,i.lat),i.lng=Math.min(t.lng,i.lng),r.lat=Math.max(n.lat,r.lat),r.lng=Math.max(n.lng,r.lng)):(this._southWest=new U(t.lat,t.lng),this._northEast=new U(n.lat,n.lng)),this},pad:function(e){var t=this._southWest,n=this._northEast,i=Math.abs(t.lat-n.lat)*e,r=Math.abs(t.lng-n.lng)*e;return new F(new U(t.lat-i,t.lng-r),new U(n.lat+i,n.lng+r))},getCenter:function(){return new U((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new U(this.getNorth(),this.getWest())},getSouthEast:function(){return new U(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"===typeof e[0]||e instanceof U||"lat"in e?V(e):z(e);var t,n,i=this._southWest,r=this._northEast;return e instanceof F?(t=e.getSouthWest(),n=e.getNorthEast()):t=n=e,t.lat>=i.lat&&n.lat<=r.lat&&t.lng>=i.lng&&n.lng<=r.lng},intersects:function(e){e=z(e);var t=this._southWest,n=this._northEast,i=e.getSouthWest(),r=e.getNorthEast(),s=r.lat>=t.lat&&i.lat<=n.lat,o=r.lng>=t.lng&&i.lng<=n.lng;return s&&o},overlaps:function(e){e=z(e);var t=this._southWest,n=this._northEast,i=e.getSouthWest(),r=e.getNorthEast(),s=r.lat>t.lat&&i.lat<n.lat,o=r.lng>t.lng&&i.lng<n.lng;return s&&o},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return!!e&&(e=z(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t))},isValid:function(){return!(!this._southWest||!this._northEast)}},U.prototype={equals:function(e,t){return!!e&&(e=V(e),Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng))<=(void 0===t?1e-9:t))},toString:function(e){return"LatLng("+u(this.lat,e)+", "+u(this.lng,e)+")"},distanceTo:function(e){return H.distance(this,V(e))},wrap:function(){return H.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return z([this.lat-t,this.lng-n],[this.lat+t,this.lng+n])},clone:function(){return new U(this.lat,this.lng,this.alt)}};var B={latLngToPoint:function(e,t){var n=this.projection.project(e),i=this.scale(t);return this.transformation._transform(n,i)},pointToLatLng:function(e,t){var n=this.scale(t),i=this.transformation.untransform(e,n);return this.projection.unproject(i)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,n=this.scale(e);return new D(this.transformation.transform(t.min,n),this.transformation.transform(t.max,n))},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?l(e.lng,this.wrapLng,!0):e.lng;return new U(this.wrapLat?l(e.lat,this.wrapLat,!0):e.lat,t,e.alt)},wrapLatLngBounds:function(e){var t=e.getCenter(),n=this.wrapLatLng(t),i=t.lat-n.lat,r=t.lng-n.lng;if(0===i&&0===r)return e;var s=e.getSouthWest(),o=e.getNorthEast();return new F(new U(s.lat-i,s.lng-r),new U(o.lat-i,o.lng-r))}},H=n({},B,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var n=Math.PI/180,i=e.lat*n,r=t.lat*n,s=Math.sin((t.lat-e.lat)*n/2),o=Math.sin((t.lng-e.lng)*n/2),a=s*s+Math.cos(i)*Math.cos(r)*o*o,l=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*l}}),q=6378137,W={R:q,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,e.lat),-n),r=Math.sin(i*t);return new R(this.R*e.lng*t,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(e){var t=180/Math.PI;return new U((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:function(){var e=q*Math.PI;return new D([-e,-e],[e,e])}()};function Z(e,t,n,i){if(v(e))return this._a=e[0],this._b=e[1],this._c=e[2],void(this._d=e[3]);this._a=e,this._b=t,this._c=n,this._d=i}function K(e,t,n,i){return new Z(e,t,n,i)}Z.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new R((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};var G=n({},H,{code:"EPSG:3857",projection:W,transformation:function(){var e=.5/(Math.PI*W.R);return K(e,.5,-e,.5)}()}),Y=n({},G,{code:"EPSG:900913"});function Q(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function $(e,t){var n,i,r,s,o,a,l="";for(n=0,r=e.length;n<r;n++){for(i=0,s=(o=e[n]).length;i<s;i++)l+=(i?"L":"M")+(a=o[i]).x+" "+a.y;l+=t?De.svg?"z":"x":""}return l||"M0 0"}var J=document.documentElement.style,X="ActiveXObject"in window,ee=X&&!document.addEventListener,te="msLaunchUri"in navigator&&!("documentMode"in document),ne=Me("webkit"),ie=Me("android"),re=Me("android 2")||Me("android 3"),se=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),oe=ie&&Me("Google")&&se<537&&!("AudioNode"in window),ae=!!window.opera,le=!te&&Me("chrome"),ce=Me("gecko")&&!ne&&!ae&&!X,ue=!le&&Me("safari"),he=Me("phantom"),de="OTransition"in J,fe=0===navigator.platform.indexOf("Win"),pe=X&&"transition"in J,me="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!re,ge="MozPerspective"in J,ve=!window.L_DISABLE_3D&&(pe||me||ge)&&!de&&!he,_e="undefined"!==typeof orientation||Me("mobile"),ye=_e&&ne,be=_e&&me,we=!window.PointerEvent&&window.MSPointerEvent,Ee=!(!window.PointerEvent&&!we),Se="ontouchstart"in window||!!window.TouchEvent,xe=!window.L_NO_TOUCH&&(Se||Ee),ke=_e&&ae,Ce=_e&&ce,Te=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ie=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",c,t),window.removeEventListener("testPassiveEventSupport",c,t)}catch(n){}return e}(),Ne=!!document.createElement("canvas").getContext,Pe=!(!document.createElementNS||!Q("svg").createSVGRect),Ae=!!Pe&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(e.firstChild&&e.firstChild.namespaceURI)}(),Le=!Pe&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"===typeof t.adj}catch(n){return!1}}(),Re=0===navigator.platform.indexOf("Mac"),Oe=0===navigator.platform.indexOf("Linux");function Me(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var De={ie:X,ielt9:ee,edge:te,webkit:ne,android:ie,android23:re,androidStock:oe,opera:ae,chrome:le,gecko:ce,safari:ue,phantom:he,opera12:de,win:fe,ie3d:pe,webkit3d:me,gecko3d:ge,any3d:ve,mobile:_e,mobileWebkit:ye,mobileWebkit3d:be,msPointer:we,pointer:Ee,touch:xe,touchNative:Se,mobileOpera:ke,mobileGecko:Ce,retina:Te,passiveEvents:Ie,canvas:Ne,svg:Pe,vml:Le,inlineSvg:Ae,mac:Re,linux:Oe},je=De.msPointer?"MSPointerDown":"pointerdown",Fe=De.msPointer?"MSPointerMove":"pointermove",ze=De.msPointer?"MSPointerUp":"pointerup",Ue=De.msPointer?"MSPointerCancel":"pointercancel",Ve={touchstart:je,touchmove:Fe,touchend:ze,touchcancel:Ue},Be={touchstart:Je,touchmove:$e,touchend:$e,touchcancel:$e},He={},qe=!1;function We(e,t,n){return"touchstart"===t&&Qe(),Be[t]?(n=Be[t].bind(this,n),e.addEventListener(Ve[t],n,!1),n):(console.warn("wrong event specified:",t),c)}function Ze(e,t,n){Ve[t]?e.removeEventListener(Ve[t],n,!1):console.warn("wrong event specified:",t)}function Ke(e){He[e.pointerId]=e}function Ge(e){He[e.pointerId]&&(He[e.pointerId]=e)}function Ye(e){delete He[e.pointerId]}function Qe(){qe||(document.addEventListener(je,Ke,!0),document.addEventListener(Fe,Ge,!0),document.addEventListener(ze,Ye,!0),document.addEventListener(Ue,Ye,!0),qe=!0)}function $e(e,t){if(t.pointerType!==(t.MSPOINTER_TYPE_MOUSE||"mouse")){for(var n in t.touches=[],He)t.touches.push(He[n]);t.changedTouches=[t],e(t)}}function Je(e,t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&Kt(t),$e(e,t)}function Xe(e){var t,n,i={};for(n in e)t=e[n],i[n]=t&&t.bind?t.bind(e):t;return e=i,i.type="dblclick",i.detail=2,i.isTrusted=!1,i._simulated=!0,i}var et=200;function tt(e,t){e.addEventListener("dblclick",t);var n,i=0;function r(e){if(1===e.detail){if("mouse"!==e.pointerType&&(!e.sourceCapabilities||e.sourceCapabilities.firesTouchEvents)){var r=Yt(e);if(!r.some(function(e){return e instanceof HTMLLabelElement&&e.attributes.for})||r.some(function(e){return e instanceof HTMLInputElement||e instanceof HTMLSelectElement})){var s=Date.now();s-i<=et?2===++n&&t(Xe(e)):n=1,i=s}}}else n=e.detail}return e.addEventListener("click",r),{dblclick:t,simDblclick:r}}function nt(e,t){e.removeEventListener("dblclick",t.dblclick),e.removeEventListener("click",t.simDblclick)}var it,rt,st,ot,at,lt=kt(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ct=kt(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ut="webkitTransition"===ct||"OTransition"===ct?ct+"End":"transitionend";function ht(e){return"string"===typeof e?document.getElementById(e):e}function dt(e,t){var n=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(e,null);n=i?i[t]:null}return"auto"===n?null:n}function ft(e,t,n){var i=document.createElement(e);return i.className=t||"",n&&n.appendChild(i),i}function pt(e){var t=e.parentNode;t&&t.removeChild(e)}function mt(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function gt(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function vt(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function _t(e,t){if(void 0!==e.classList)return e.classList.contains(t);var n=Et(e);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function yt(e,t){if(void 0!==e.classList)for(var n=d(t),i=0,r=n.length;i<r;i++)e.classList.add(n[i]);else if(!_t(e,t)){var s=Et(e);wt(e,(s?s+" ":"")+t)}}function bt(e,t){void 0!==e.classList?e.classList.remove(t):wt(e,h((" "+Et(e)+" ").replace(" "+t+" "," ")))}function wt(e,t){void 0===e.className.baseVal?e.className=t:e.className.baseVal=t}function Et(e){return e.correspondingElement&&(e=e.correspondingElement),void 0===e.className.baseVal?e.className:e.className.baseVal}function St(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&xt(e,t)}function xt(e,t){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(i)}catch(r){if(1===t)return}t=Math.round(100*t),n?(n.Enabled=100!==t,n.Opacity=t):e.style.filter+=" progid:"+i+"(opacity="+t+")"}function kt(e){for(var t=document.documentElement.style,n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1}function Ct(e,t,n){var i=t||new R(0,0);e.style[lt]=(De.ie3d?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function Tt(e,t){e._leaflet_pos=t,De.any3d?Ct(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function It(e){return e._leaflet_pos||new R(0,0)}if("onselectstart"in document)it=function(){jt(window,"selectstart",Kt)},rt=function(){zt(window,"selectstart",Kt)};else{var Nt=kt(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);it=function(){if(Nt){var e=document.documentElement.style;st=e[Nt],e[Nt]="none"}},rt=function(){Nt&&(document.documentElement.style[Nt]=st,st=void 0)}}function Pt(){jt(window,"dragstart",Kt)}function At(){zt(window,"dragstart",Kt)}function Lt(e){for(;-1===e.tabIndex;)e=e.parentNode;e.style&&(Rt(),ot=e,at=e.style.outlineStyle,e.style.outlineStyle="none",jt(window,"keydown",Rt))}function Rt(){ot&&(ot.style.outlineStyle=at,ot=void 0,at=void 0,zt(window,"keydown",Rt))}function Ot(e){do{e=e.parentNode}while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function Mt(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var Dt={__proto__:null,TRANSFORM:lt,TRANSITION:ct,TRANSITION_END:ut,get:ht,getStyle:dt,create:ft,remove:pt,empty:mt,toFront:gt,toBack:vt,hasClass:_t,addClass:yt,removeClass:bt,setClass:wt,getClass:Et,setOpacity:St,testProp:kt,setTransform:Ct,setPosition:Tt,getPosition:It,get disableTextSelection(){return it},get enableTextSelection(){return rt},disableImageDrag:Pt,enableImageDrag:At,preventOutline:Lt,restoreOutline:Rt,getSizedParentNode:Ot,getScale:Mt};function jt(e,t,n,i){if(t&&"object"===typeof t)for(var r in t)Bt(e,r,t[r],n);else for(var s=0,o=(t=d(t)).length;s<o;s++)Bt(e,t[s],n,i);return this}var Ft="_leaflet_events";function zt(e,t,n,i){if(1===arguments.length)Ut(e),delete e[Ft];else if(t&&"object"===typeof t)for(var r in t)Ht(e,r,t[r],n);else if(t=d(t),2===arguments.length)Ut(e,function(e){return-1!==_(t,e)});else for(var s=0,o=t.length;s<o;s++)Ht(e,t[s],n,i);return this}function Ut(e,t){for(var n in e[Ft]){var i=n.split(/\d/)[0];t&&!t(i)||Ht(e,i,null,null,n)}}var Vt={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Bt(e,t,n,i){var r=t+o(n)+(i?"_"+o(i):"");if(e[Ft]&&e[Ft][r])return this;var s=function(t){return n.call(i||e,t||window.event)},a=s;!De.touchNative&&De.pointer&&0===t.indexOf("touch")?s=We(e,t,s):De.touch&&"dblclick"===t?s=tt(e,s):"addEventListener"in e?"touchstart"===t||"touchmove"===t||"wheel"===t||"mousewheel"===t?e.addEventListener(Vt[t]||t,s,!!De.passiveEvents&&{passive:!1}):"mouseenter"===t||"mouseleave"===t?(s=function(t){t=t||window.event,Xt(e,t)&&a(t)},e.addEventListener(Vt[t],s,!1)):e.addEventListener(t,a,!1):e.attachEvent("on"+t,s),e[Ft]=e[Ft]||{},e[Ft][r]=s}function Ht(e,t,n,i,r){r=r||t+o(n)+(i?"_"+o(i):"");var s=e[Ft]&&e[Ft][r];if(!s)return this;!De.touchNative&&De.pointer&&0===t.indexOf("touch")?Ze(e,t,s):De.touch&&"dblclick"===t?nt(e,s):"removeEventListener"in e?e.removeEventListener(Vt[t]||t,s,!1):e.detachEvent("on"+t,s),e[Ft][r]=null}function qt(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function Wt(e){return Bt(e,"wheel",qt),this}function Zt(e){return jt(e,"mousedown touchstart dblclick contextmenu",qt),e._leaflet_disable_click=!0,this}function Kt(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function Gt(e){return Kt(e),qt(e),this}function Yt(e){if(e.composedPath)return e.composedPath();for(var t=[],n=e.target;n;)t.push(n),n=n.parentNode;return t}function Qt(e,t){if(!t)return new R(e.clientX,e.clientY);var n=Mt(t),i=n.boundingClientRect;return new R((e.clientX-i.left)/n.x-t.clientLeft,(e.clientY-i.top)/n.y-t.clientTop)}var $t=De.linux&&De.chrome?window.devicePixelRatio:De.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Jt(e){return De.edge?e.wheelDeltaY/2:e.deltaY&&0===e.deltaMode?-e.deltaY/$t:e.deltaY&&1===e.deltaMode?20*-e.deltaY:e.deltaY&&2===e.deltaMode?60*-e.deltaY:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?20*-e.detail:e.detail?e.detail/-32765*60:0}function Xt(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch(i){return!1}return n!==e}var en={__proto__:null,on:jt,off:zt,stopPropagation:qt,disableScrollPropagation:Wt,disableClickPropagation:Zt,preventDefault:Kt,stop:Gt,getPropagationPath:Yt,getMousePosition:Qt,getWheelDelta:Jt,isExternalTarget:Xt,addListener:jt,removeListener:zt},tn=A.extend({run:function(e,t,n,i){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=It(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=k(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,n=1e3*this._duration;t<n?this._runFrame(this._easeOut(t/n),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var n=this._startPos.add(this._offset.multiplyBy(e));t&&n._round(),Tt(this._el,n),this.fire("step")},_complete:function(){C(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),nn=A.extend({options:{crs:G,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=f(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),void 0!==t.zoom&&(this._zoom=this._limitZoom(t.zoom)),t.center&&void 0!==t.zoom&&this.setView(V(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ct&&De.any3d&&!De.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),jt(this._proxy,ut,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,i){return t=void 0===t?this._zoom:this._limitZoom(t),e=this._limitCenter(V(e),t,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=n({animate:i.animate},i.zoom),i.pan=n({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,i.zoom):this._tryAnimatedPan(e,i.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(e,t,i.pan&&i.pan.noMoveStart),this)},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(De.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(De.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,n){var i=this.getZoomScale(t),r=this.getSize().divideBy(2),s=(e instanceof R?e:this.latLngToContainerPoint(e)).subtract(r).multiplyBy(1-1/i),o=this.containerPointToLatLng(r.add(s));return this.setView(o,t,{zoom:n})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():z(e);var n=M(t.paddingTopLeft||t.padding||[0,0]),i=M(t.paddingBottomRight||t.padding||[0,0]),r=this.getBoundsZoom(e,!1,n.add(i));if((r="number"===typeof t.maxZoom?Math.min(t.maxZoom,r):r)===1/0)return{center:e.getCenter(),zoom:r};var s=i.subtract(n).divideBy(2),o=this.project(e.getSouthWest(),r),a=this.project(e.getNorthEast(),r);return{center:this.unproject(o.add(a).divideBy(2).add(s),r),zoom:r}},fitBounds:function(e,t){if(!(e=z(e)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(e,t);return this.setView(n.center,n.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(t=t||{},!(e=M(e).round()).x&&!e.y)return this.fire("moveend");if(!0!==t.animate&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new tn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate){yt(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,t,n){if(!1===(n=n||{}).animate||!De.any3d)return this.setView(e,t,n);this._stop();var i=this.project(this.getCenter()),r=this.project(e),s=this.getSize(),o=this._zoom;e=V(e),t=void 0===t?o:t;var a=Math.max(s.x,s.y),l=a*this.getZoomScale(o,t),c=r.distanceTo(i)||1,u=1.42,h=u*u;function d(e){var t=(l*l-a*a+(e?-1:1)*h*h*c*c)/(2*(e?l:a)*h*c),n=Math.sqrt(t*t+1)-t;return n<1e-9?-18:Math.log(n)}function f(e){return(Math.exp(e)-Math.exp(-e))/2}function p(e){return(Math.exp(e)+Math.exp(-e))/2}function m(e){return f(e)/p(e)}var g=d(0);function v(e){return a*(p(g)/p(g+u*e))}function _(e){return a*(p(g)*m(g+u*e)-f(g))/h}function y(e){return 1-Math.pow(1-e,1.5)}var b=Date.now(),w=(d(1)-g)/u,E=n.duration?1e3*n.duration:1e3*w*.8;function S(){var n=(Date.now()-b)/E,s=y(n)*w;n<=1?(this._flyToFrame=k(S,this),this._move(this.unproject(i.add(r.subtract(i).multiplyBy(_(s)/c)),o),this.getScaleZoom(a/v(s),o),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),S.call(this),this},flyToBounds:function(e,t){var n=this._getBoundsCenterZoom(e,t);return this.flyTo(n.center,n.zoom,t)},setMaxBounds:function(e){return e=z(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,z(e));return n.equals(i)||this.panTo(i,t),this._enforcingBounds=!1,this},panInside:function(e,t){var n=M((t=t||{}).paddingTopLeft||t.padding||[0,0]),i=M(t.paddingBottomRight||t.padding||[0,0]),r=this.project(this.getCenter()),s=this.project(e),o=this.getPixelBounds(),a=j([o.min.add(n),o.max.subtract(i)]),l=a.getSize();if(!a.contains(s)){this._enforcingBounds=!0;var c=s.subtract(a.getCenter()),u=a.extend(s).getSize().subtract(l);r.x+=c.x<0?-u.x:u.x,r.y+=c.y<0?-u.y:u.y,this.panTo(this.unproject(r),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=n({animate:!1,pan:!0},!0===e?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),s=t.divideBy(2).round(),o=i.divideBy(2).round(),a=s.subtract(o);return a.x||a.y?(e.animate&&e.pan?this.panBy(a):(e.pan&&this._rawPanBy(a),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=n({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=r(this._handleGeolocationResponse,this),i=r(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,i,e):navigator.geolocation.getCurrentPosition(t,i,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var t=e.code,n=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var t=new U(e.coords.latitude,e.coords.longitude),n=t.toBounds(2*e.coords.accuracy),i=this._locateOptions;if(i.setView){var r=this.getBoundsZoom(n);this.setView(t,i.maxZoom?Math.min(r,i.maxZoom):r)}var s={latlng:t,bounds:n,timestamp:e.timestamp};for(var o in e.coords)"number"===typeof e.coords[o]&&(s[o]=e.coords[o]);this.fire("locationfound",s)}},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var e;for(e in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),pt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(C(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[e].remove();for(e in this._panes)pt(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var n=ft("div","leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),t||this._mapPane);return e&&(this._panes[e]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds();return new F(this.unproject(e.getBottomLeft()),this.unproject(e.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=z(e),n=M(n||[0,0]);var i=this.getZoom()||0,r=this.getMinZoom(),s=this.getMaxZoom(),o=e.getNorthWest(),a=e.getSouthEast(),l=this.getSize().subtract(n),c=j(this.project(a,i),this.project(o,i)).getSize(),u=De.any3d?this.options.zoomSnap:1,h=l.x/c.x,d=l.y/c.y,f=t?Math.max(h,d):Math.min(h,d);return i=this.getScaleZoom(f,i),u&&(i=Math.round(i/(u/100))*(u/100),i=t?Math.ceil(i/u)*u:Math.floor(i/u)*u),Math.max(r,Math.min(s,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new R(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var n=this._getTopLeftPoint(e,t);return new D(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(void 0===e?this.getZoom():e)},getPane:function(e){return"string"===typeof e?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var n=this.options.crs;return t=void 0===t?this._zoom:t,n.scale(e)/n.scale(t)},getScaleZoom:function(e,t){var n=this.options.crs;t=void 0===t?this._zoom:t;var i=n.zoom(e*n.scale(t));return isNaN(i)?1/0:i},project:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.latLngToPoint(V(e),t)},unproject:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.pointToLatLng(M(e),t)},layerPointToLatLng:function(e){var t=M(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){return this.project(V(e))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(V(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(z(e))},distance:function(e,t){return this.options.crs.distance(V(e),V(t))},containerPointToLayerPoint:function(e){return M(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return M(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(M(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(V(e)))},mouseEventToContainerPoint:function(e){return Qt(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=ht(e);if(!t)throw new Error("Map container not found.");if(t._leaflet_id)throw new Error("Map container is already initialized.");jt(t,"scroll",this._onScroll,this),this._containerId=o(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&De.any3d,yt(e,"leaflet-container"+(De.touch?" leaflet-touch":"")+(De.retina?" leaflet-retina":"")+(De.ielt9?" leaflet-oldie":"")+(De.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=dt(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&"sticky"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Tt(this._mapPane,new R(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(yt(e.markerPane,"leaflet-zoom-hide"),yt(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t,n){Tt(this._mapPane,new R(0,0));var i=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var r=this._zoom!==t;this._moveStart(r,n)._move(e,t)._moveEnd(r),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,n,i){void 0===t&&(t=this._zoom);var r=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),i?n&&n.pinch&&this.fire("zoom",n):((r||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return C(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){Tt(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[o(this._container)]=this;var t=e?zt:jt;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),De.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){C(this._resizeRequest),this._resizeRequest=k(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var n,i=[],r="mouseout"===t||"mouseover"===t,s=e.target||e.srcElement,a=!1;s;){if((n=this._targets[o(s)])&&("click"===t||"preclick"===t)&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(t,!0)){if(r&&!Xt(s,e))break;if(i.push(n),r)break}if(s===this._container)break;s=s.parentNode}return i.length||a||r||!this.listens(t,!0)||(i=[this]),i},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var t=e.target||e.srcElement;if(!(!this._loaded||t._leaflet_disable_events||"click"===e.type&&this._isClickDisabled(t))){var n=e.type;"mousedown"===n&&Lt(t),this._fireDOMEvent(e,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,t,i){if("click"===e.type){var r=n({},e);r.type="preclick",this._fireDOMEvent(r,r.type,i)}var s=this._findEventTargets(e,t);if(i){for(var o=[],a=0;a<i.length;a++)i[a].listens(t,!0)&&o.push(i[a]);s=o.concat(s)}if(s.length){"contextmenu"===t&&Kt(e);var l=s[0],c={originalEvent:e};if("keypress"!==e.type&&"keydown"!==e.type&&"keyup"!==e.type){var u=l.getLatLng&&(!l._radius||l._radius<=10);c.containerPoint=u?this.latLngToContainerPoint(l.getLatLng()):this.mouseEventToContainerPoint(e),c.layerPoint=this.containerPointToLayerPoint(c.containerPoint),c.latlng=u?l.getLatLng():this.layerPointToLatLng(c.layerPoint)}for(a=0;a<s.length;a++)if(s[a].fire(t,c,!0),c.originalEvent._stopped||!1===s[a].options.bubblingMouseEvents&&-1!==_(this._mouseEvents,t))return}},_draggableMoved:function(e){return(e=e.dragging&&e.dragging.enabled()?e:this).dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return It(this._mapPane)||new R(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){return(e&&void 0!==t?this._getNewPixelOrigin(e,t):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,n){var i=this._getNewPixelOrigin(n,t);return this.project(e,t)._subtract(i)},_latLngBoundsToNewLayerBounds:function(e,t,n){var i=this._getNewPixelOrigin(n,t);return j([this.project(e.getSouthWest(),t)._subtract(i),this.project(e.getNorthWest(),t)._subtract(i),this.project(e.getSouthEast(),t)._subtract(i),this.project(e.getNorthEast(),t)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var i=this.project(e,t),r=this.getSize().divideBy(2),s=new D(i.subtract(r),i.add(r)),o=this._getBoundsOffset(s,n,t);return Math.abs(o.x)<=1&&Math.abs(o.y)<=1?e:this.unproject(i.add(o),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),i=new D(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(i,t))},_getBoundsOffset:function(e,t,n){var i=j(this.project(t.getNorthEast(),n),this.project(t.getSouthWest(),n)),r=i.min.subtract(e.min),s=i.max.subtract(e.max);return new R(this._rebound(r.x,-s.x),this._rebound(r.y,-s.y))},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom(),i=De.any3d?this.options.zoomSnap:1;return i&&(e=Math.round(e/i)*i),Math.max(t,Math.min(n,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){bt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._trunc();return!(!0!==(t&&t.animate)&&!this.getSize().contains(n))&&(this.panBy(n,t),!0)},_createAnimProxy:function(){var e=this._proxy=ft("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(e){var t=lt,n=this._proxy.style[t];Ct(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),n===this._proxy.style[t]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){pt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),t=this.getZoom();Ct(this._proxy,this.project(e,t),this.getZoomScale(t,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(t),r=this._getCenterOffset(e)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(r))&&(k(function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(e,t,!0)},this),!0)},_animateZoom:function(e,t,n,i){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,yt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:i}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&bt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function rn(e,t){return new nn(e,t)}var sn=I.extend({options:{position:"topright"},initialize:function(e){f(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),i=e._controlCorners[n];return yt(t,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(t,i.firstChild):i.appendChild(t),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(pt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),on=function(e){return new sn(e)};nn.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},t="leaflet-",n=this._controlContainer=ft("div",t+"control-container",this._container);function i(i,r){var s=t+i+" "+t+r;e[i+r]=ft("div",s,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)pt(this._controlCorners[e]);pt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var an=sn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,n,i){return n<i?-1:i<n?1:0}},initialize:function(e,t,n){for(var i in f(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,e)this._addLayer(e[i],i);for(i in t)this._addLayer(t[i],i,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return sn.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(o(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){yt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(yt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):bt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return bt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=ft("div",e),n=this.options.collapsed;t.setAttribute("aria-haspopup",!0),Zt(t),Wt(t);var i=this._section=ft("section",e+"-list");n&&(this._map.on("click",this.collapse,this),jt(t,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var r=this._layersLink=ft("a",e+"-toggle",t);r.href="#",r.title="Layers",r.setAttribute("role","button"),jt(r,{keydown:function(e){13===e.keyCode&&this._expandSafely()},click:function(e){Kt(e),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=ft("div",e+"-base",i),this._separator=ft("div",e+"-separator",i),this._overlaysList=ft("div",e+"-overlays",i),t.appendChild(i)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&o(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,n){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:n}),this.options.sortLayers&&this._layers.sort(r(function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;mt(this._baseLayersList),mt(this._overlaysList),this._layerControlInputs=[];var e,t,n,i,r=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),t=t||i.overlay,e=e||!i.overlay,r+=i.overlay?0:1;return this.options.hideSingleBase&&(e=e&&r>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(o(e.target)),n=t.overlay?"add"===e.type?"overlayadd":"overlayremove":"add"===e.type?"baselayerchange":null;n&&this._map.fire(n,t)},_createRadioElement:function(e,t){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(e){var t,n=document.createElement("label"),i=this._map.hasLayer(e.layer);e.overlay?((t=document.createElement("input")).type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=i):t=this._createRadioElement("leaflet-base-layers_"+o(this),i),this._layerControlInputs.push(t),t.layerId=o(e.layer),jt(t,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+e.name;var s=document.createElement("span");return n.appendChild(s),s.appendChild(t),s.appendChild(r),(e.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){if(!this._preventClick){var e,t,n=this._layerControlInputs,i=[],r=[];this._handlingClick=!0;for(var s=n.length-1;s>=0;s--)e=n[s],t=this._getLayer(e.layerId).layer,e.checked?i.push(t):e.checked||r.push(t);for(s=0;s<r.length;s++)this._map.hasLayer(r[s])&&this._map.removeLayer(r[s]);for(s=0;s<i.length;s++)this._map.hasLayer(i[s])||this._map.addLayer(i[s]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e,t,n=this._layerControlInputs,i=this._map.getZoom(),r=n.length-1;r>=0;r--)e=n[r],t=this._getLayer(e.layerId).layer,e.disabled=void 0!==t.options.minZoom&&i<t.options.minZoom||void 0!==t.options.maxZoom&&i>t.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,jt(e,"click",Kt),this.expand();var t=this;setTimeout(function(){zt(e,"click",Kt),t._preventClick=!1})}}),ln=function(e,t,n){return new an(e,t,n)},cn=sn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",n=ft("div",t+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,t+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,t+"-out",n,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,n,i,r){var s=ft("a",n,i);return s.innerHTML=e,s.href="#",s.title=t,s.setAttribute("role","button"),s.setAttribute("aria-label",t),Zt(s),jt(s,"click",Gt),jt(s,"click",r,this),jt(s,"click",this._refocusOnMap,this),s},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";bt(this._zoomInButton,t),bt(this._zoomOutButton,t),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(yt(this._zoomOutButton,t),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(yt(this._zoomInButton,t),this._zoomInButton.setAttribute("aria-disabled","true"))}});nn.mergeOptions({zoomControl:!0}),nn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new cn,this.addControl(this.zoomControl))});var un=function(e){return new cn(e)},hn=sn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",n=ft("div",t),i=this.options;return this._addScales(i,t+"-line",n),e.on(i.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),n},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=ft("div",t,n)),e.imperial&&(this._iScale=ft("div",t,n))},_update:function(){var e=this._map,t=e.getSize().y/2,n=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(n)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),n=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,n,t/e)},_updateImperial:function(e){var t,n,i,r=3.2808399*e;r>5280?(t=r/5280,n=this._getRoundNum(t),this._updateScale(this._iScale,n+" mi",n/t)):(i=this._getRoundNum(r),this._updateScale(this._iScale,i+" ft",i/r))},_updateScale:function(e,t,n){e.style.width=Math.round(this.options.maxWidth*n)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return t*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),dn=function(e){return new hn(e)},fn='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',pn=sn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(De.inlineSvg?fn+" ":"")+"Leaflet</a>"},initialize:function(e){f(this,e),this._attributions={}},onAdd:function(e){for(var t in e.attributionControl=this,this._container=ft("div","leaflet-control-attribution"),Zt(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});nn.mergeOptions({attributionControl:!0}),nn.addInitHook(function(){this.options.attributionControl&&(new pn).addTo(this)});var mn=function(e){return new pn(e)};sn.Layers=an,sn.Zoom=cn,sn.Scale=hn,sn.Attribution=pn,on.layers=ln,on.zoom=un,on.scale=dn,on.attribution=mn;var gn=I.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});gn.addTo=function(e,t){return e.addHandler(t,this),this};var vn={Events:P},_n=De.touch?"touchstart mousedown":"mousedown",yn=A.extend({options:{clickTolerance:3},initialize:function(e,t,n,i){f(this,i),this._element=e,this._dragStartTarget=t||e,this._preventOutline=n},enable:function(){this._enabled||(jt(this._dragStartTarget,_n,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(yn._dragging===this&&this.finishDrag(!0),zt(this._dragStartTarget,_n,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!_t(this._element,"leaflet-zoom-anim")))if(e.touches&&1!==e.touches.length)yn._dragging===this&&this.finishDrag();else if(!(yn._dragging||e.shiftKey||1!==e.which&&1!==e.button&&!e.touches)&&(yn._dragging=this,this._preventOutline&&Lt(this._element),Pt(),it(),!this._moving)){this.fire("down");var t=e.touches?e.touches[0]:e,n=Ot(this._element);this._startPoint=new R(t.clientX,t.clientY),this._startPos=It(this._element),this._parentScale=Mt(n);var i="mousedown"===e.type;jt(document,i?"mousemove":"touchmove",this._onMove,this),jt(document,i?"mouseup":"touchend touchcancel",this._onUp,this)}},_onMove:function(e){if(this._enabled)if(e.touches&&e.touches.length>1)this._moved=!0;else{var t=e.touches&&1===e.touches.length?e.touches[0]:e,n=new R(t.clientX,t.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Kt(e),this._moved||(this.fire("dragstart"),this._moved=!0,yt(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),yt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=e,this._updatePosition()))}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),Tt(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){bt(document.body,"leaflet-dragging"),this._lastTarget&&(bt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),zt(document,"mousemove touchmove",this._onMove,this),zt(document,"mouseup touchend touchcancel",this._onUp,this),At(),rt();var t=this._moved&&this._moving;this._moving=!1,yn._dragging=!1,t&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function bn(e,t,n){var i,r,s,o,a,l,c,u,h,d=[1,4,2,8];for(r=0,c=e.length;r<c;r++)e[r]._code=Rn(e[r],t);for(o=0;o<4;o++){for(u=d[o],i=[],r=0,s=(c=e.length)-1;r<c;s=r++)a=e[r],l=e[s],a._code&u?l._code&u||((h=Ln(l,a,u,t,n))._code=Rn(h,t),i.push(h)):(l._code&u&&((h=Ln(l,a,u,t,n))._code=Rn(h,t),i.push(h)),i.push(a));e=i}return e}function wn(e,t){var n,i,r,s,o,a,l,c,u;if(!e||0===e.length)throw new Error("latlngs not passed");Dn(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var h=V([0,0]),d=z(e);d.getNorthWest().distanceTo(d.getSouthWest())*d.getNorthEast().distanceTo(d.getNorthWest())<1700&&(h=En(e));var f=e.length,p=[];for(n=0;n<f;n++){var m=V(e[n]);p.push(t.project(V([m.lat-h.lat,m.lng-h.lng])))}for(a=l=c=0,n=0,i=f-1;n<f;i=n++)r=p[n],s=p[i],o=r.y*s.x-s.y*r.x,l+=(r.x+s.x)*o,c+=(r.y+s.y)*o,a+=3*o;u=0===a?p[0]:[l/a,c/a];var g=t.unproject(M(u));return V([g.lat+h.lat,g.lng+h.lng])}function En(e){for(var t=0,n=0,i=0,r=0;r<e.length;r++){var s=V(e[r]);t+=s.lat,n+=s.lng,i++}return V([t/i,n/i])}var Sn,xn={__proto__:null,clipPolygon:bn,polygonCenter:wn,centroid:En};function kn(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=In(e=Pn(e,n),n)}function Cn(e,t,n){return Math.sqrt(Mn(e,t,n,!0))}function Tn(e,t,n){return Mn(e,t,n)}function In(e,t){var n=e.length,i=new(typeof Uint8Array!==void 0+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,Nn(e,i,t,0,n-1);var r,s=[];for(r=0;r<n;r++)i[r]&&s.push(e[r]);return s}function Nn(e,t,n,i,r){var s,o,a,l=0;for(o=i+1;o<=r-1;o++)(a=Mn(e[o],e[i],e[r],!0))>l&&(s=o,l=a);l>n&&(t[s]=1,Nn(e,t,n,i,s),Nn(e,t,n,s,r))}function Pn(e,t){for(var n=[e[0]],i=1,r=0,s=e.length;i<s;i++)On(e[i],e[r])>t&&(n.push(e[i]),r=i);return r<s-1&&n.push(e[s-1]),n}function An(e,t,n,i,r){var s,o,a,l=i?Sn:Rn(e,n),c=Rn(t,n);for(Sn=c;;){if(!(l|c))return[e,t];if(l&c)return!1;a=Rn(o=Ln(e,t,s=l||c,n,r),n),s===l?(e=o,l=a):(t=o,c=a)}}function Ln(e,t,n,i,r){var s,o,a=t.x-e.x,l=t.y-e.y,c=i.min,u=i.max;return 8&n?(s=e.x+a*(u.y-e.y)/l,o=u.y):4&n?(s=e.x+a*(c.y-e.y)/l,o=c.y):2&n?(s=u.x,o=e.y+l*(u.x-e.x)/a):1&n&&(s=c.x,o=e.y+l*(c.x-e.x)/a),new R(s,o,r)}function Rn(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n}function On(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i}function Mn(e,t,n,i){var r,s=t.x,o=t.y,a=n.x-s,l=n.y-o,c=a*a+l*l;return c>0&&((r=((e.x-s)*a+(e.y-o)*l)/c)>1?(s=n.x,o=n.y):r>0&&(s+=a*r,o+=l*r)),a=e.x-s,l=e.y-o,i?a*a+l*l:new R(s,o)}function Dn(e){return!v(e[0])||"object"!==typeof e[0][0]&&"undefined"!==typeof e[0][0]}function jn(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Dn(e)}function Fn(e,t){var n,i,r,s,o,a,l,c;if(!e||0===e.length)throw new Error("latlngs not passed");Dn(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var u=V([0,0]),h=z(e);h.getNorthWest().distanceTo(h.getSouthWest())*h.getNorthEast().distanceTo(h.getNorthWest())<1700&&(u=En(e));var d=e.length,f=[];for(n=0;n<d;n++){var p=V(e[n]);f.push(t.project(V([p.lat-u.lat,p.lng-u.lng])))}for(n=0,i=0;n<d-1;n++)i+=f[n].distanceTo(f[n+1])/2;if(0===i)c=f[0];else for(n=0,s=0;n<d-1;n++)if(o=f[n],a=f[n+1],(s+=r=o.distanceTo(a))>i){l=(s-i)/r,c=[a.x-l*(a.x-o.x),a.y-l*(a.y-o.y)];break}var m=t.unproject(M(c));return V([m.lat+u.lat,m.lng+u.lng])}var zn={__proto__:null,simplify:kn,pointToSegmentDistance:Cn,closestPointOnSegment:Tn,clipSegment:An,_getEdgeIntersection:Ln,_getBitCode:Rn,_sqClosestPointOnSegment:Mn,isFlat:Dn,_flat:jn,polylineCenter:Fn},Un={project:function(e){return new R(e.lng,e.lat)},unproject:function(e){return new U(e.y,e.x)},bounds:new D([-180,-90],[180,90])},Vn={R:6378137,R_MINOR:6356752.314245179,bounds:new D([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(e){var t=Math.PI/180,n=this.R,i=e.lat*t,r=this.R_MINOR/n,s=Math.sqrt(1-r*r),o=s*Math.sin(i),a=Math.tan(Math.PI/4-i/2)/Math.pow((1-o)/(1+o),s/2);return i=-n*Math.log(Math.max(a,1e-10)),new R(e.lng*t*n,i)},unproject:function(e){for(var t,n=180/Math.PI,i=this.R,r=this.R_MINOR/i,s=Math.sqrt(1-r*r),o=Math.exp(-e.y/i),a=Math.PI/2-2*Math.atan(o),l=0,c=.1;l<15&&Math.abs(c)>1e-7;l++)t=s*Math.sin(a),t=Math.pow((1-t)/(1+t),s/2),a+=c=Math.PI/2-2*Math.atan(o*t)-a;return new U(a*n,e.x*n/i)}},Bn={__proto__:null,LonLat:Un,Mercator:Vn,SphericalMercator:W},Hn=n({},H,{code:"EPSG:3395",projection:Vn,transformation:function(){var e=.5/(Math.PI*Vn.R);return K(e,.5,-e,.5)}()}),qn=n({},H,{code:"EPSG:4326",projection:Un,transformation:K(1/180,1,-1/180,.5)}),Wn=n({},B,{projection:Un,transformation:K(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var n=t.lng-e.lng,i=t.lat-e.lat;return Math.sqrt(n*n+i*i)},infinite:!0});B.Earth=H,B.EPSG3395=Hn,B.EPSG3857=G,B.EPSG900913=Y,B.EPSG4326=qn,B.Simple=Wn;var Zn=A.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[o(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[o(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var n=this.getEvents();t.on(n,this),this.once("remove",function(){t.off(n,this)},this)}this.onAdd(t),this.fire("add"),t.fire("layeradd",{layer:this})}}});nn.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=o(e);return this._layers[t]||(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e)),this},removeLayer:function(e){var t=o(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return o(e)in this._layers},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},_addLayers:function(e){for(var t=0,n=(e=e?v(e)?e:[e]:[]).length;t<n;t++)this.addLayer(e[t])},_addZoomLimit:function(e){isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[o(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=o(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var r=this._zoomBoundLayers[i].options;e=void 0===r.minZoom?e:Math.min(e,r.minZoom),t=void 0===r.maxZoom?t:Math.max(t,r.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Kn=Zn.extend({initialize:function(e,t){var n,i;if(f(this,t),this._layers={},e)for(n=0,i=e.length;n<i;n++)this.addLayer(e[n])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return("number"===typeof e?e:this.getLayerId(e))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t,n,i=Array.prototype.slice.call(arguments,1);for(t in this._layers)(n=this._layers[t])[e]&&n[e].apply(n,i);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return o(e)}}),Gn=function(e,t){return new Kn(e,t)},Yn=Kn.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),Kn.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),Kn.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new F;for(var t in this._layers){var n=this._layers[t];e.extend(n.getBounds?n.getBounds():n.getLatLng())}return e}}),Qn=function(e,t){return new Yn(e,t)},$n=I.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){f(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var n=this._getIconUrl(e);if(!n){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,t&&"IMG"===t.tagName?t:null);return this._setIconStyles(i,e),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),i},_setIconStyles:function(e,t){var n=this.options,i=n[t+"Size"];"number"===typeof i&&(i=[i,i]);var r=M(i),s=M("shadow"===t&&n.shadowAnchor||n.iconAnchor||r&&r.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(n.className||""),s&&(e.style.marginLeft=-s.x+"px",e.style.marginTop=-s.y+"px"),r&&(e.style.width=r.x+"px",e.style.height=r.y+"px")},_createImg:function(e,t){return(t=t||document.createElement("img")).src=e,t},_getIconUrl:function(e){return De.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function Jn(e){return new $n(e)}var Xn=$n.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return"string"!==typeof Xn.imagePath&&(Xn.imagePath=this._detectIconPath()),(this.options.imagePath||Xn.imagePath)+$n.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var t=function(e,t,n){var i=t.exec(e);return i&&i[n]};return(e=t(e,/^url\((['"])?(.+)\1\)$/,2))&&t(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=ft("div","leaflet-default-icon-path",document.body),t=dt(e,"background-image")||dt(e,"backgroundImage");if(document.body.removeChild(e),t=this._stripUrl(t))return t;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),ei=gn.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new yn(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),yt(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&bt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,n=t._map,i=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,s=It(t._icon),o=n.getPixelBounds(),a=n.getPixelOrigin(),l=j(o.min._subtract(a).add(r),o.max._subtract(a).subtract(r));if(!l.contains(s)){var c=M((Math.max(l.max.x,s.x)-l.max.x)/(o.max.x-l.max.x)-(Math.min(l.min.x,s.x)-l.min.x)/(o.min.x-l.min.x),(Math.max(l.max.y,s.y)-l.max.y)/(o.max.y-l.max.y)-(Math.min(l.min.y,s.y)-l.min.y)/(o.min.y-l.min.y)).multiplyBy(i);n.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),Tt(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=k(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(C(this._panRequest),this._panRequest=k(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,n=t._shadow,i=It(t._icon),r=t._map.layerPointToLatLng(i);n&&Tt(n,i),t._latlng=r,e.latlng=r,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){C(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),ti=Zn.extend({options:{icon:new Xn,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){f(this,t),this._latlng=V(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=V(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=e.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,e.title&&(n.title=e.title),"IMG"===n.tagName&&(n.alt=e.alt||"")),yt(n,t),e.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&jt(n,"focus",this._panOnFocus,this);var r=e.icon.createShadow(this._shadow),s=!1;r!==this._shadow&&(this._removeShadow(),s=!0),r&&(yt(r,t),r.alt=""),this._shadow=r,e.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&s&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&zt(this._icon,"focus",this._panOnFocus,this),pt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&pt(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&Tt(this._icon,e),this._shadow&&Tt(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(yt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ei)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ei(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&St(this._icon,e),this._shadow&&St(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var t=this.options.icon.options,n=t.iconSize?M(t.iconSize):M(0,0),i=t.iconAnchor?M(t.iconAnchor):M(0,0);e.panInside(this._latlng,{paddingTopLeft:i,paddingBottomRight:n.subtract(i)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ni(e,t){return new ti(e,t)}var ii=Zn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return f(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ri=ii.extend({options:{fill:!0,radius:10},initialize:function(e,t){f(this,t),this._latlng=V(e),this._radius=this.options.radius},setLatLng:function(e){var t=this._latlng;return this._latlng=V(e),this.redraw(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return ii.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,n=this._clickTolerance(),i=[e+n,t+n];this._pxBounds=new D(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function si(e,t){return new ri(e,t)}var oi=ri.extend({initialize:function(e,t,i){if("number"===typeof t&&(t=n({},i,{radius:t})),f(this,t),this._latlng=V(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new F(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:ii.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===H.distance){var r=Math.PI/180,s=this._mRadius/H.R/r,o=n.project([t+s,e]),a=n.project([t-s,e]),l=o.add(a).divideBy(2),c=n.unproject(l).lat,u=Math.acos((Math.cos(s*r)-Math.sin(t*r)*Math.sin(c*r))/(Math.cos(t*r)*Math.cos(c*r)))/r;(isNaN(u)||0===u)&&(u=s/Math.cos(Math.PI/180*t)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(u)?0:l.x-n.project([c,e-u]).x,this._radiusY=l.y-o.y}else{var h=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}});function ai(e,t,n){return new oi(e,t,n)}var li=ii.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){f(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t,n,i=1/0,r=null,s=Mn,o=0,a=this._parts.length;o<a;o++)for(var l=this._parts[o],c=1,u=l.length;c<u;c++){var h=s(e,t=l[c-1],n=l[c],!0);h<i&&(i=h,r=s(e,t,n))}return r&&(r.distance=Math.sqrt(i)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Fn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=V(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new F,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return Dn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],n=Dn(e),i=0,r=e.length;i<r;i++)n?(t[i]=V(e[i]),this._bounds.extend(t[i])):t[i]=this._convertLatLngs(e[i]);return t},_project:function(){var e=new D;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),t=new R(e,e);this._rawPxBounds&&(this._pxBounds=new D([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)]))},_projectLatlngs:function(e,t,n){var i,r,s=e[0]instanceof U,o=e.length;if(s){for(r=[],i=0;i<o;i++)r[i]=this._map.latLngToLayerPoint(e[i]),n.extend(r[i]);t.push(r)}else for(i=0;i<o;i++)this._projectLatlngs(e[i],t,n)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else{var t,n,i,r,s,o,a,l=this._parts;for(t=0,i=0,r=this._rings.length;t<r;t++)for(n=0,s=(a=this._rings[t]).length;n<s-1;n++)(o=An(a[n],a[n+1],e,n,!0))&&(l[i]=l[i]||[],l[i].push(o[0]),o[1]===a[n+1]&&n!==s-2||(l[i].push(o[1]),i++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,n=0,i=e.length;n<i;n++)e[n]=kn(e[n],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var n,i,r,s,o,a,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(n=0,s=this._parts.length;n<s;n++)for(i=0,r=(o=(a=this._parts[n]).length)-1;i<o;r=i++)if((t||0!==i)&&Cn(e,a[r],a[i])<=l)return!0;return!1}});function ci(e,t){return new li(e,t)}li._flat=jn;var ui=li.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return wn(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var t=li.prototype._convertLatLngs.call(this,e),n=t.length;return n>=2&&t[0]instanceof U&&t[0].equals(t[n-1])&&t.pop(),t},_setLatLngs:function(e){li.prototype._setLatLngs.call(this,e),Dn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Dn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,n=new R(t,t);if(e=new D(e.min.subtract(n),e.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else for(var i,r=0,s=this._rings.length;r<s;r++)(i=bn(this._rings[r],e,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t,n,i,r,s,o,a,l,c=!1;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(r=0,a=this._parts.length;r<a;r++)for(s=0,o=(l=(t=this._parts[r]).length)-1;s<l;o=s++)n=t[s],i=t[o],n.y>e.y!==i.y>e.y&&e.x<(i.x-n.x)*(e.y-n.y)/(i.y-n.y)+n.x&&(c=!c);return c||li.prototype._containsPoint.call(this,e,!0)}});function hi(e,t){return new ui(e,t)}var di=Yn.extend({initialize:function(e,t){f(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,n,i,r=v(e)?e:e.features;if(r){for(t=0,n=r.length;t<n;t++)((i=r[t]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var s=this.options;if(s.filter&&!s.filter(e))return this;var o=fi(e,s);return o?(o.feature=bi(e),o.defaultOptions=o.options,this.resetStyle(o),s.onEachFeature&&s.onEachFeature(e,o),this.addLayer(o)):this},resetStyle:function(e){return void 0===e?this.eachLayer(this.resetStyle,this):(e.options=n({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){e.setStyle&&("function"===typeof t&&(t=t(e.feature)),e.setStyle(t))}});function fi(e,t){var n,i,r,s,o="Feature"===e.type?e.geometry:e,a=o?o.coordinates:null,l=[],c=t&&t.pointToLayer,u=t&&t.coordsToLatLng||mi;if(!a&&!o)return null;switch(o.type){case"Point":return pi(c,e,n=u(a),t);case"MultiPoint":for(r=0,s=a.length;r<s;r++)n=u(a[r]),l.push(pi(c,e,n,t));return new Yn(l);case"LineString":case"MultiLineString":return i=gi(a,"LineString"===o.type?0:1,u),new li(i,t);case"Polygon":case"MultiPolygon":return i=gi(a,"Polygon"===o.type?1:2,u),new ui(i,t);case"GeometryCollection":for(r=0,s=o.geometries.length;r<s;r++){var h=fi({geometry:o.geometries[r],type:"Feature",properties:e.properties},t);h&&l.push(h)}return new Yn(l);case"FeatureCollection":for(r=0,s=o.features.length;r<s;r++){var d=fi(o.features[r],t);d&&l.push(d)}return new Yn(l);default:throw new Error("Invalid GeoJSON object.")}}function pi(e,t,n,i){return e?e(t,n):new ti(n,i&&i.markersInheritOptions&&i)}function mi(e){return new U(e[1],e[0],e[2])}function gi(e,t,n){for(var i,r=[],s=0,o=e.length;s<o;s++)i=t?gi(e[s],t-1,n):(n||mi)(e[s]),r.push(i);return r}function vi(e,t){return void 0!==(e=V(e)).alt?[u(e.lng,t),u(e.lat,t),u(e.alt,t)]:[u(e.lng,t),u(e.lat,t)]}function _i(e,t,n,i){for(var r=[],s=0,o=e.length;s<o;s++)r.push(t?_i(e[s],Dn(e[s])?0:t-1,n,i):vi(e[s],i));return!t&&n&&r.length>0&&r.push(r[0].slice()),r}function yi(e,t){return e.feature?n({},e.feature,{geometry:t}):bi(t)}function bi(e){return"Feature"===e.type||"FeatureCollection"===e.type?e:{type:"Feature",properties:{},geometry:e}}var wi={toGeoJSON:function(e){return yi(this,{type:"Point",coordinates:vi(this.getLatLng(),e)})}};function Ei(e,t){return new di(e,t)}ti.include(wi),oi.include(wi),ri.include(wi),li.include({toGeoJSON:function(e){var t=!Dn(this._latlngs);return yi(this,{type:(t?"Multi":"")+"LineString",coordinates:_i(this._latlngs,t?1:0,!1,e)})}}),ui.include({toGeoJSON:function(e){var t=!Dn(this._latlngs),n=t&&!Dn(this._latlngs[0]),i=_i(this._latlngs,n?2:t?1:0,!0,e);return t||(i=[i]),yi(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),Kn.include({toMultiPoint:function(e){var t=[];return this.eachLayer(function(n){t.push(n.toGeoJSON(e).geometry.coordinates)}),yi(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(e);var n="GeometryCollection"===t,i=[];return this.eachLayer(function(t){if(t.toGeoJSON){var r=t.toGeoJSON(e);if(n)i.push(r.geometry);else{var s=bi(r);"FeatureCollection"===s.type?i.push.apply(i,s.features):i.push(s)}}}),n?yi(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var Si=Ei,xi=Zn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,n){this._url=e,this._bounds=z(t),f(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(yt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){pt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&gt(this._image),this},bringToBack:function(){return this._map&&vt(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=z(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e="IMG"===this._url.tagName,t=this._image=e?this._url:ft("img");yt(t,"leaflet-image-layer"),this._zoomAnimated&&yt(t,"leaflet-zoom-animated"),this.options.className&&yt(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onload=r(this.fire,this,"load"),t.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(t.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e?this._url=t.src:(t.src=this._url,t.alt=this.options.alt)},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;Ct(this._image,n,t)},_reset:function(){var e=this._image,t=new D(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=t.getSize();Tt(e,t.min),e.style.width=n.x+"px",e.style.height=n.y+"px"},_updateOpacity:function(){St(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),ki=function(e,t,n){return new xi(e,t,n)},Ci=xi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e="VIDEO"===this._url.tagName,t=this._image=e?this._url:ft("video");if(yt(t,"leaflet-image-layer"),this._zoomAnimated&&yt(t,"leaflet-zoom-animated"),this.options.className&&yt(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onloadeddata=r(this.fire,this,"load"),e){for(var n=t.getElementsByTagName("source"),i=[],s=0;s<n.length;s++)i.push(n[s].src);this._url=n.length>0?i:[t.src]}else{v(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(t.style,"objectFit")&&(t.style.objectFit="fill"),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop,t.muted=!!this.options.muted,t.playsInline=!!this.options.playsInline;for(var o=0;o<this._url.length;o++){var a=ft("source");a.src=this._url[o],t.appendChild(a)}}}});function Ti(e,t,n){return new Ci(e,t,n)}var Ii=xi.extend({_initImage:function(){var e=this._image=this._url;yt(e,"leaflet-image-layer"),this._zoomAnimated&&yt(e,"leaflet-zoom-animated"),this.options.className&&yt(e,this.options.className),e.onselectstart=c,e.onmousemove=c}});function Ni(e,t,n){return new Ii(e,t,n)}var Pi=Zn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,t){e&&(e instanceof U||v(e))?(this._latlng=V(e),f(this,t)):(f(this,e),this._source=t),this.options.content&&(this._content=this.options.content)},openOn:function(e){return(e=arguments.length?e:this._source._map).hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&St(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&St(this._container,1),this.bringToFront(),this.options.interactive&&(yt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(St(this._container,0),this._removeTimeout=setTimeout(r(pt,void 0,this._container),200)):pt(this._container),this.options.interactive&&(bt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=V(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&gt(this._container),this},bringToBack:function(){return this._map&&vt(this._container),this},_prepareOpen:function(e){var t=this._source;if(!t._map)return!1;if(t instanceof Yn){t=null;var n=this._source._layers;for(var i in n)if(n[i]._map){t=n[i];break}if(!t)return!1;this._source=t}if(!e)if(t.getCenter)e=t.getCenter();else if(t.getLatLng)e=t.getLatLng();else{if(!t.getBounds)throw new Error("Unable to get source layer LatLng.");e=t.getBounds().getCenter()}return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,t="function"===typeof this._content?this._content(this._source||this):this._content;if("string"===typeof t)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=M(this.options.offset),n=this._getAnchor();this._zoomAnimated?Tt(this._container,e.add(n)):t=t.add(e).add(n);var i=this._containerBottom=-t.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=i+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}});nn.include({_initOverlay:function(e,t,n,i){var r=t;return r instanceof e||(r=new e(i).setContent(t)),n&&r.setLatLng(n),r}}),Zn.include({_initOverlay:function(e,t,n,i){var r=n;return r instanceof e?(f(r,i),r._source=this):(r=t&&!i?t:new e(i,this)).setContent(n),r}});var Ai=Pi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return!(e=arguments.length?e:this._source._map).hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,Pi.prototype.openOn.call(this,e)},onAdd:function(e){Pi.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ii||this._source.on("preclick",qt))},onRemove:function(e){Pi.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ii||this._source.off("preclick",qt))},getEvents:function(){var e=Pi.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",t=this._container=ft("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=ft("div",e+"-content-wrapper",t);if(this._contentNode=ft("div",e+"-content",n),Zt(t),Wt(this._contentNode),jt(t,"contextmenu",qt),this._tipContainer=ft("div",e+"-tip-container",t),this._tip=ft("div",e+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=ft("a",e+"-close-button",t);i.setAttribute("role","button"),i.setAttribute("aria-label","Close popup"),i.href="#close",i.innerHTML='<span aria-hidden="true">&#215;</span>',jt(i,"click",function(e){Kt(e),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var n=e.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),t.width=n+1+"px",t.whiteSpace="",t.height="";var i=e.offsetHeight,r=this.options.maxHeight,s="leaflet-popup-scrolled";r&&i>r?(t.height=r+"px",yt(e,s)):bt(e,s),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),n=this._getAnchor();Tt(this._container,t.add(n))},_adjustPan:function(){if(this.options.autoPan)if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)this._autopanning=!1;else{var e=this._map,t=parseInt(dt(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+t,i=this._containerWidth,r=new R(this._containerLeft,-n-this._containerBottom);r._add(It(this._container));var s=e.layerPointToContainerPoint(r),o=M(this.options.autoPanPadding),a=M(this.options.autoPanPaddingTopLeft||o),l=M(this.options.autoPanPaddingBottomRight||o),c=e.getSize(),u=0,h=0;s.x+i+l.x>c.x&&(u=s.x+i-c.x+l.x),s.x-u-a.x<0&&(u=s.x-a.x),s.y+n+l.y>c.y&&(h=s.y+n-c.y+l.y),s.y-h-a.y<0&&(h=s.y-a.y),(u||h)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([u,h]))}},_getAnchor:function(){return M(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Li=function(e,t){return new Ai(e,t)};nn.mergeOptions({closePopupOnClick:!0}),nn.include({openPopup:function(e,t,n){return this._initOverlay(Ai,e,t,n).openOn(this),this},closePopup:function(e){return(e=arguments.length?e:this._popup)&&e.close(),this}}),Zn.include({bindPopup:function(e,t){return this._popup=this._initOverlay(Ai,this._popup,e,t),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof Yn||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(this._popup&&this._map){Gt(e);var t=e.layer||e.target;this._popup._source!==t||t instanceof ii?(this._popup._source=t,this.openPopup(e.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){13===e.originalEvent.keyCode&&this._openPopup(e)}});var Ri=Pi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){Pi.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){Pi.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=Pi.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ft("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+o(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t,n,i=this._map,r=this._container,s=i.latLngToContainerPoint(i.getCenter()),o=i.layerPointToContainerPoint(e),a=this.options.direction,l=r.offsetWidth,c=r.offsetHeight,u=M(this.options.offset),h=this._getAnchor();"top"===a?(t=l/2,n=c):"bottom"===a?(t=l/2,n=0):"center"===a?(t=l/2,n=c/2):"right"===a?(t=0,n=c/2):"left"===a?(t=l,n=c/2):o.x<s.x?(a="right",t=0,n=c/2):(a="left",t=l+2*(u.x+h.x),n=c/2),e=e.subtract(M(t,n,!0)).add(u).add(h),bt(r,"leaflet-tooltip-right"),bt(r,"leaflet-tooltip-left"),bt(r,"leaflet-tooltip-top"),bt(r,"leaflet-tooltip-bottom"),yt(r,"leaflet-tooltip-"+a),Tt(r,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&St(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return M(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Oi=function(e,t){return new Ri(e,t)};nn.include({openTooltip:function(e,t,n){return this._initOverlay(Ri,e,t,n).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),Zn.include({bindTooltip:function(e,t){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ri,this._tooltip,e,t),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(e||!this._tooltipHandlersAdded){var t=e?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[t](n),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof Yn||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var t="function"===typeof e.getElement&&e.getElement();t&&(jt(t,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),jt(t,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var t="function"===typeof e.getElement&&e.getElement();t&&t.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(this._tooltip&&this._map)if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var t=this;this._map.once("moveend",function(){t._openOnceFlag=!1,t._openTooltip(e)})}else this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)},_moveTooltip:function(e){var t,n,i=e.latlng;this._tooltip.options.sticky&&e.originalEvent&&(t=this._map.mouseEventToContainerPoint(e.originalEvent),n=this._map.containerPointToLayerPoint(t),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var Mi=$n.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&"DIV"===e.tagName?e:document.createElement("div"),n=this.options;if(n.html instanceof Element?(mt(t),t.appendChild(n.html)):t.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=M(n.bgPos);t.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});function Di(e){return new Mi(e)}$n.Default=Xn;var ji=Zn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:De.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){f(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),pt(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(gt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(vt(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=a(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof R?e:new R(e,e)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t,n=this.getPane().children,i=-e(-1/0,1/0),r=0,s=n.length;r<s;r++)t=n[r].style.zIndex,n[r]!==this._container&&t&&(i=e(i,+t));isFinite(i)&&(this.options.zIndex=i+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!De.ielt9){St(this._container,this.options.opacity);var e=+new Date,t=!1,n=!1;for(var i in this._tiles){var r=this._tiles[i];if(r.current&&r.loaded){var s=Math.min(1,(e-r.loaded)/200);St(r.el,s),s<1?t=!0:(r.active?n=!0:this._onOpaqueTile(r),r.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),t&&(C(this._fadeFrame),this._fadeFrame=k(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=ft("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(void 0!==e){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===e?(this._levels[n].el.style.zIndex=t-Math.abs(e-n),this._onUpdateLevel(n)):(pt(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[e],r=this._map;return i||((i=this._levels[e]={}).el=ft("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=t,i.origin=r.project(r.unproject(r.getPixelOrigin()),e).round(),i.zoom=e,this._setZoomTransform(i,r.getCenter(),r.getZoom()),c(i.el.offsetWidth),this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var e,t,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(e in this._tiles)(t=this._tiles[e]).retain=t.current;for(e in this._tiles)if((t=this._tiles[e]).current&&!t.active){var i=t.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)pt(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,n,i){var r=Math.floor(e/2),s=Math.floor(t/2),o=n-1,a=new R(+r,+s);a.z=+o;var l=this._tileCoordsToKey(a),c=this._tiles[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),o>i&&this._retainParent(r,s,o,i))},_retainChildren:function(e,t,n,i){for(var r=2*e;r<2*e+2;r++)for(var s=2*t;s<2*t+2;s++){var o=new R(r,s);o.z=n+1;var a=this._tileCoordsToKey(o),l=this._tiles[a];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<i&&this._retainChildren(r,s,n+1,i))}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return void 0!==t.minNativeZoom&&e<t.minNativeZoom?t.minNativeZoom:void 0!==t.maxNativeZoom&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,n,i){var r=Math.round(t);r=void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom?void 0:this._clampZoom(r);var s=this.options.updateWhenZooming&&r!==this._tileZoom;i&&!s||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(e),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var n in this._levels)this._setZoomTransform(this._levels[n],e,t)},_setZoomTransform:function(e,t,n){var i=this._map.getZoomScale(n,e.zoom),r=e.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(t,n)).round();De.any3d?Ct(e.el,r,i):Tt(e.el,r)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],i).x/n.x),Math.ceil(e.project([0,t.wrapLng[1]],i).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],i).y/n.x),Math.ceil(e.project([t.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(e){var t=this._map,n=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),i=t.getZoomScale(n,this._tileZoom),r=t.project(e,this._tileZoom).floor(),s=t.getSize().divideBy(2*i);return new D(r.subtract(s),r.add(s))},_update:function(e){var t=this._map;if(t){var n=this._clampZoom(t.getZoom());if(void 0===e&&(e=t.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(e),r=this._pxBoundsToTileRange(i),s=r.getCenter(),o=[],a=this.options.keepBuffer,l=new D(r.getBottomLeft().subtract([a,-a]),r.getTopRight().add([a,-a]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var u=this._tiles[c].coords;u.z===this._tileZoom&&l.contains(new R(u.x,u.y))||(this._tiles[c].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(e,n);else{for(var h=r.min.y;h<=r.max.y;h++)for(var d=r.min.x;d<=r.max.x;d++){var f=new R(d,h);if(f.z=this._tileZoom,this._isValidTile(f)){var p=this._tiles[this._tileCoordsToKey(f)];p?p.current=!0:o.push(f)}}if(o.sort(function(e,t){return e.distanceTo(s)-t.distanceTo(s)}),0!==o.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(d=0;d<o.length;d++)this._addTile(o[d],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalTileRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(e);return z(this.options.bounds).overlaps(i)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,n=this.getTileSize(),i=e.scaleBy(n),r=i.add(n);return[t.unproject(i,e.z),t.unproject(r,e.z)]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),n=new F(t[0],t[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),n=new R(+t[0],+t[1]);return n.z=+t[2],n},_removeTile:function(e){var t=this._tiles[e];t&&(pt(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){yt(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=c,e.onmousemove=c,De.ielt9&&this.options.opacity<1&&St(e,this.options.opacity)},_addTile:function(e,t){var n=this._getTilePos(e),i=this._tileCoordsToKey(e),s=this.createTile(this._wrapCoords(e),r(this._tileReady,this,e));this._initTile(s),this.createTile.length<2&&k(r(this._tileReady,this,e,null,s)),Tt(s,n),this._tiles[i]={el:s,coords:e,current:!0},t.appendChild(s),this.fire("tileloadstart",{tile:s,coords:e})},_tileReady:function(e,t,n){t&&this.fire("tileerror",{error:t,tile:n,coords:e});var i=this._tileCoordsToKey(e);(n=this._tiles[i])&&(n.loaded=+new Date,this._map._fadeAnimated?(St(n.el,0),C(this._fadeFrame),this._fadeFrame=k(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),t||(yt(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),De.ielt9||!this._map._fadeAnimated?k(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new R(this._wrapX?l(e.x,this._wrapX):e.x,this._wrapY?l(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new D(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function Fi(e){return new ji(e)}var zi=ji.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,t){this._url=e,(t=f(this,t)).detectRetina&&De.retina&&t.maxZoom>0?(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom=Math.min(t.maxZoom,t.minZoom+1)):(t.zoomOffset++,t.maxZoom=Math.max(t.minZoom,t.maxZoom-1)),t.minZoom=Math.max(0,t.minZoom)):t.zoomReverse?t.minZoom=Math.min(t.maxZoom,t.minZoom):t.maxZoom=Math.max(t.minZoom,t.maxZoom),"string"===typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url===e&&void 0===t&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var n=document.createElement("img");return jt(n,"load",r(this._tileOnLoad,this,t,n)),jt(n,"error",r(this._tileOnError,this,t,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"===typeof this.options.referrerPolicy&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(e),n},getTileUrl:function(e){var t={r:De.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=i),t["-y"]=i}return g(this._url,n(t,this.options))},_tileOnLoad:function(e,t){De.ielt9?setTimeout(r(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,n){var i=this.options.errorTileUrl;i&&t.getAttribute("src")!==i&&(t.src=i),e(n,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom;return this.options.zoomReverse&&(e=t-e),e+this.options.zoomOffset},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&((t=this._tiles[e].el).onload=c,t.onerror=c,!t.complete)){t.src=y;var n=this._tiles[e].coords;pt(t),delete this._tiles[e],this.fire("tileabort",{tile:t,coords:n})}},_removeTile:function(e){var t=this._tiles[e];if(t)return t.el.setAttribute("src",y),ji.prototype._removeTile.call(this,e)},_tileReady:function(e,t,n){if(this._map&&(!n||n.getAttribute("src")!==y))return ji.prototype._tileReady.call(this,e,t,n)}});function Ui(e,t){return new zi(e,t)}var Vi=zi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var i=n({},this.defaultWmsParams);for(var r in t)r in this.options||(i[r]=t[r]);var s=(t=f(this,t)).detectRetina&&De.retina?2:1,o=this.getTileSize();i.width=o.x*s,i.height=o.y*s,this.wmsParams=i},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,zi.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),n=this._crs,i=j(n.project(t[0]),n.project(t[1])),r=i.min,s=i.max,o=(this._wmsVersion>=1.3&&this._crs===qn?[r.y,r.x,s.y,s.x]:[r.x,r.y,s.x,s.y]).join(","),a=zi.prototype.getTileUrl.call(this,e);return a+p(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+o},setParams:function(e,t){return n(this.wmsParams,e),t||this.redraw(),this}});function Bi(e,t){return new Vi(e,t)}zi.WMS=Vi,Ui.wms=Bi;var Hi=Zn.extend({options:{padding:.1},initialize:function(e){f(this,e),o(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),yt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var n=this._map.getZoomScale(t,this._zoom),i=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,t),s=i.multiplyBy(-n).add(r).subtract(this._map._getNewPixelOrigin(e,t));De.any3d?Ct(this._container,s,n):Tt(this._container,s)},_reset:function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),n=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new D(n,n.add(t.multiplyBy(1+2*e)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),qi=Hi.extend({options:{tolerance:0},getEvents:function(){var e=Hi.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Hi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");jt(e,"mousemove",this._onMouseMove,this),jt(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),jt(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){C(this._redrawRequest),delete this._ctx,pt(this._container),zt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var e in this._redrawBounds=null,this._layers)this._layers[e]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Hi.prototype._update.call(this);var e=this._bounds,t=this._container,n=e.getSize(),i=De.retina?2:1;Tt(t,e.min),t.width=i*n.x,t.height=i*n.y,t.style.width=n.x+"px",t.style.height=n.y+"px",De.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){Hi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[o(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,n=t.next,i=t.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete e._order,delete this._layers[o(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if("string"===typeof e.options.dashArray){var t,n,i=e.options.dashArray.split(/[, ]+/),r=[];for(n=0;n<i.length;n++){if(t=Number(i[n]),isNaN(t))return;r.push(t)}e.options._dashArray=r}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||k(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new D,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var n=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)e=i.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var n,i,r,s,o=e._parts,a=o.length,l=this._ctx;if(a){for(l.beginPath(),n=0;n<a;n++){for(i=0,r=o[n].length;i<r;i++)s=o[n][i],l[i?"lineTo":"moveTo"](s.x,s.y);t&&l.closePath()}this._fillStroke(l,e)}}},_updateCircle:function(e){if(this._drawing&&!e._empty()){var t=e._point,n=this._ctx,i=Math.max(Math.round(e._radius),1),r=(Math.max(Math.round(e._radiusY),1)||i)/i;1!==r&&(n.save(),n.scale(1,r)),n.beginPath(),n.arc(t.x,t.y/r,i,0,2*Math.PI,!1),1!==r&&n.restore(),this._fillStroke(n,e)}},_fillStroke:function(e,t){var n=t.options;n.fill&&(e.globalAlpha=n.fillOpacity,e.fillStyle=n.fillColor||n.color,e.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=n.opacity,e.lineWidth=n.weight,e.strokeStyle=n.color,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.stroke())},_onClick:function(e){for(var t,n,i=this._map.mouseEventToLayerPoint(e),r=this._drawFirst;r;r=r.next)(t=r.layer).options.interactive&&t._containsPoint(i)&&("click"!==e.type&&"preclick"!==e.type||!this._map._draggableMoved(t))&&(n=t);this._fireEvent(!!n&&[n],e)},_onMouseMove:function(e){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(bt(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,t){if(!this._mouseHoverThrottled){for(var n,i,s=this._drawFirst;s;s=s.next)(n=s.layer).options.interactive&&n._containsPoint(t)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(e),i&&(yt(this._container,"leaflet-interactive"),this._fireEvent([i],e,"mouseover"),this._hoveredLayer=i)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],e),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,t,n){this._map._fireDOMEvent(t,n||t.type,e)},_bringToFront:function(e){var t=e._order;if(t){var n=t.next,i=t.prev;n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e))}},_bringToBack:function(e){var t=e._order;if(t){var n=t.next,i=t.prev;i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e))}}});function Wi(e){return De.canvas?new qi(e):null}var Zi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch(e){}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Ki={_initContainer:function(){this._container=ft("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Hi.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=Zi("shape");yt(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=Zi("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[o(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;pt(t),e.removeInteractiveTarget(t),delete this._layers[o(e)]},_updateStyle:function(e){var t=e._stroke,n=e._fill,i=e.options,r=e._container;r.stroked=!!i.stroke,r.filled=!!i.fill,i.stroke?(t||(t=e._stroke=Zi("stroke")),r.appendChild(t),t.weight=i.weight+"px",t.color=i.color,t.opacity=i.opacity,i.dashArray?t.dashStyle=v(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=i.lineCap.replace("butt","flat"),t.joinstyle=i.lineJoin):t&&(r.removeChild(t),e._stroke=null),i.fill?(n||(n=e._fill=Zi("fill")),r.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(r.removeChild(n),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),n=Math.round(e._radius),i=Math.round(e._radiusY||n);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+n+","+i+" 0,23592600")},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){gt(e._container)},_bringToBack:function(e){vt(e._container)}},Gi=De.vml?Zi:Q,Yi=Hi.extend({_initContainer:function(){this._container=Gi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Gi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){pt(this._container),zt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){Hi.prototype._update.call(this);var e=this._bounds,t=e.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,n.setAttribute("width",t.x),n.setAttribute("height",t.y)),Tt(n,e.min),n.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=Gi("path");e.options.className&&yt(t,e.options.className),e.options.interactive&&yt(t,"leaflet-interactive"),this._updateStyle(e),this._layers[o(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){pt(e._path),e.removeInteractiveTarget(e._path),delete this._layers[o(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,n=e.options;t&&(n.stroke?(t.setAttribute("stroke",n.color),t.setAttribute("stroke-opacity",n.opacity),t.setAttribute("stroke-width",n.weight),t.setAttribute("stroke-linecap",n.lineCap),t.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?t.setAttribute("stroke-dasharray",n.dashArray):t.removeAttribute("stroke-dasharray"),n.dashOffset?t.setAttribute("stroke-dashoffset",n.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),n.fill?(t.setAttribute("fill",n.fillColor||n.color),t.setAttribute("fill-opacity",n.fillOpacity),t.setAttribute("fill-rule",n.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,$(e._parts,t))},_updateCircle:function(e){var t=e._point,n=Math.max(Math.round(e._radius),1),i="a"+n+","+(Math.max(Math.round(e._radiusY),1)||n)+" 0 1,0 ",r=e._empty()?"M0 0":"M"+(t.x-n)+","+t.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(e,r)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){gt(e._path)},_bringToBack:function(e){vt(e._path)}});function Qi(e){return De.svg||De.vml?new Yi(e):null}De.vml&&Yi.include(Ki),nn.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if("overlayPane"===e||void 0===e)return!1;var t=this._paneRenderers[e];return void 0===t&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&Wi(e)||Qi(e)}});var $i=ui.extend({initialize:function(e,t){ui.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return[(e=z(e)).getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function Ji(e,t){return new $i(e,t)}Yi.create=Gi,Yi.pointsToPath=$,di.geometryToLayer=fi,di.coordsToLatLng=mi,di.coordsToLatLngs=gi,di.latLngToCoords=vi,di.latLngsToCoords=_i,di.getFeature=yi,di.asFeature=bi,nn.mergeOptions({boxZoom:!0});var Xi=gn.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){jt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){zt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){pt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||1!==e.which&&1!==e.button)return!1;this._clearDeferredResetState(),this._resetState(),it(),Pt(),this._startPoint=this._map.mouseEventToContainerPoint(e),jt(document,{contextmenu:Gt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=ft("div","leaflet-zoom-box",this._container),yt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new D(this._point,this._startPoint),n=t.getSize();Tt(this._box,t.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(pt(this._box),bt(this._container,"leaflet-crosshair")),rt(),At(),zt(document,{contextmenu:Gt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if((1===e.which||1===e.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var t=new F(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){27===e.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});nn.addInitHook("addHandler","boxZoom",Xi),nn.mergeOptions({doubleClickZoom:!0});var er=gn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,n=t.getZoom(),i=t.options.zoomDelta,r=e.originalEvent.shiftKey?n-i:n+i;"center"===t.options.doubleClickZoom?t.setZoom(r):t.setZoomAround(e.containerPoint,r)}});nn.addInitHook("addHandler","doubleClickZoom",er),nn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var tr=gn.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new yn(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}yt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){bt(this._map._container,"leaflet-grab"),bt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=z(this._map.options.maxBounds);this._offsetLimit=j(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(t),this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,r=(i-t+n)%e+t-n,s=(i+t+n)%e-t-n,o=Math.abs(r+n)<Math.abs(s+n)?r:s;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=o},_onDragEnd:function(e){var t=this._map,n=t.options,i=!n.inertia||e.noInertia||this._times.length<2;if(t.fire("dragend",e),i)t.fire("moveend");else{this._prunePositions(+new Date);var r=this._lastPos.subtract(this._positions[0]),s=(this._lastTime-this._times[0])/1e3,o=n.easeLinearity,a=r.multiplyBy(o/s),l=a.distanceTo([0,0]),c=Math.min(n.inertiaMaxSpeed,l),u=a.multiplyBy(c/l),h=c/(n.inertiaDeceleration*o),d=u.multiplyBy(-h/2).round();d.x||d.y?(d=t._limitOffset(d,t.options.maxBounds),k(function(){t.panBy(d,{duration:h,easeLinearity:o,noMoveStart:!0,animate:!0})})):t.fire("moveend")}}});nn.addInitHook("addHandler","dragging",tr),nn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var nr=gn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),jt(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),zt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,n=e.scrollTop||t.scrollTop,i=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t,n,i=this._panKeys={},r=this.keyCodes;for(t=0,n=r.left.length;t<n;t++)i[r.left[t]]=[-1*e,0];for(t=0,n=r.right.length;t<n;t++)i[r.right[t]]=[e,0];for(t=0,n=r.down.length;t<n;t++)i[r.down[t]]=[0,e];for(t=0,n=r.up.length;t<n;t++)i[r.up[t]]=[0,-1*e]},_setZoomDelta:function(e){var t,n,i=this._zoomKeys={},r=this.keyCodes;for(t=0,n=r.zoomIn.length;t<n;t++)i[r.zoomIn[t]]=e;for(t=0,n=r.zoomOut.length;t<n;t++)i[r.zoomOut[t]]=-e},_addHooks:function(){jt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){zt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t,n=e.keyCode,i=this._map;if(n in this._panKeys){if(!i._panAnim||!i._panAnim._inProgress)if(t=this._panKeys[n],e.shiftKey&&(t=M(t).multiplyBy(3)),i.options.maxBounds&&(t=i._limitOffset(M(t),i.options.maxBounds)),i.options.worldCopyJump){var r=i.wrapLatLng(i.unproject(i.project(i.getCenter()).add(t)));i.panTo(r)}else i.panBy(t)}else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}Gt(e)}}});nn.addInitHook("addHandler","keyboard",nr),nn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ir=gn.extend({addHooks:function(){jt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){zt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=Jt(e),n=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var i=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),i),Gt(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),n=this._map.options.zoomSnap||0;e._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),r=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,s=n?Math.ceil(r/n)*n:r,o=e._limitZoom(t+(this._delta>0?s:-s))-t;this._delta=0,this._startTime=null,o&&("center"===e.options.scrollWheelZoom?e.setZoom(t+o):e.setZoomAround(this._lastMousePos,t+o))}});nn.addInitHook("addHandler","scrollWheelZoom",ir);var rr=600;nn.mergeOptions({tapHold:De.touchNative&&De.safari&&De.mobile,tapTolerance:15});var sr=gn.extend({addHooks:function(){jt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){zt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),1===e.touches.length){var t=e.touches[0];this._startPos=this._newPos=new R(t.clientX,t.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&(jt(document,"touchend",Kt),jt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",t))},this),rr),jt(document,"touchend touchcancel contextmenu",this._cancel,this),jt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){zt(document,"touchend",Kt),zt(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),zt(document,"touchend touchcancel contextmenu",this._cancel,this),zt(document,"touchmove",this._onMove,this)},_onMove:function(e){var t=e.touches[0];this._newPos=new R(t.clientX,t.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,t){var n=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY});n._simulated=!0,t.target.dispatchEvent(n)}});nn.addInitHook("addHandler","tapHold",sr),nn.mergeOptions({touchZoom:De.touch,bounceAtZoomLimits:!0});var or=gn.extend({addHooks:function(){yt(this._map._container,"leaflet-touch-zoom"),jt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){bt(this._map._container,"leaflet-touch-zoom"),zt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&!t._animatingZoom&&!this._zooming){var n=t.mouseEventToContainerPoint(e.touches[0]),i=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),"center"!==t.options.touchZoom&&(this._pinchStartLatLng=t.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),jt(document,"touchmove",this._onTouchMove,this),jt(document,"touchend touchcancel",this._onTouchEnd,this),Kt(e)}},_onTouchMove:function(e){if(e.touches&&2===e.touches.length&&this._zooming){var t=this._map,n=t.mouseEventToContainerPoint(e.touches[0]),i=t.mouseEventToContainerPoint(e.touches[1]),s=n.distanceTo(i)/this._startDist;if(this._zoom=t.getScaleZoom(s,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&s<1||this._zoom>t.getMaxZoom()&&s>1)&&(this._zoom=t._limitZoom(this._zoom)),"center"===t.options.touchZoom){if(this._center=this._startLatLng,1===s)return}else{var o=n._add(i)._divideBy(2)._subtract(this._centerPoint);if(1===s&&0===o.x&&0===o.y)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(o),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),C(this._animRequest);var a=r(t._move,t,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=k(a,this,!0),Kt(e)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,C(this._animRequest),zt(document,"touchmove",this._onTouchMove,this),zt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});nn.addInitHook("addHandler","touchZoom",or),nn.BoxZoom=Xi,nn.DoubleClickZoom=er,nn.Drag=tr,nn.Keyboard=nr,nn.ScrollWheelZoom=ir,nn.TapHold=sr,nn.TouchZoom=or,e.Bounds=D,e.Browser=De,e.CRS=B,e.Canvas=qi,e.Circle=oi,e.CircleMarker=ri,e.Class=I,e.Control=sn,e.DivIcon=Mi,e.DivOverlay=Pi,e.DomEvent=en,e.DomUtil=Dt,e.Draggable=yn,e.Evented=A,e.FeatureGroup=Yn,e.GeoJSON=di,e.GridLayer=ji,e.Handler=gn,e.Icon=$n,e.ImageOverlay=xi,e.LatLng=U,e.LatLngBounds=F,e.Layer=Zn,e.LayerGroup=Kn,e.LineUtil=zn,e.Map=nn,e.Marker=ti,e.Mixin=vn,e.Path=ii,e.Point=R,e.PolyUtil=xn,e.Polygon=ui,e.Polyline=li,e.Popup=Ai,e.PosAnimation=tn,e.Projection=Bn,e.Rectangle=$i,e.Renderer=Hi,e.SVG=Yi,e.SVGOverlay=Ii,e.TileLayer=zi,e.Tooltip=Ri,e.Transformation=Z,e.Util=T,e.VideoOverlay=Ci,e.bind=r,e.bounds=j,e.canvas=Wi,e.circle=ai,e.circleMarker=si,e.control=on,e.divIcon=Di,e.extend=n,e.featureGroup=Qn,e.geoJSON=Ei,e.geoJson=Si,e.gridLayer=Fi,e.icon=Jn,e.imageOverlay=ki,e.latLng=V,e.latLngBounds=z,e.layerGroup=Gn,e.map=rn,e.marker=ni,e.point=M,e.polygon=hi,e.polyline=ci,e.popup=Li,e.rectangle=Ji,e.setOptions=f,e.stamp=o,e.svg=Qi,e.svgOverlay=Ni,e.tileLayer=Ui,e.tooltip=Oi,e.transformation=K,e.version=t,e.videoOverlay=Ti;var ar=window.L;e.noConflict=function(){return window.L=ar,this},window.L=e}(t)},232:(e,t,n)=>{"use strict";n.d(t,{MF:()=>he,j6:()=>oe,xZ:()=>ae,om:()=>se,Sx:()=>fe,Wp:()=>de,KO:()=>pe});var i=n(555),r=n(606),s=n(965),o=n(776);let a,l;const c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap;let p={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return u.get(e);if("objectStoreNames"===t)return e.objectStoreNames||h.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return v(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function m(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(l||(l=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(_(this),n),v(c.get(this))}:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return v(e.apply(_(this),n))}:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];const s=e.call(_(this),t,...i);return h.set(s,t.sort?t.sort():[t]),v(s)}}function g(e){return"function"===typeof e?m(e):(e instanceof IDBTransaction&&function(e){if(u.has(e))return;const t=new Promise((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)});u.set(e,t)}(e),t=e,(a||(a=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,p):e);var t}function v(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(v(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&c.set(t,e)}).catch(()=>{}),f.set(t,e),t}(e);if(d.has(e))return d.get(e);const t=g(e);return t!==e&&(d.set(e,t),f.set(t,e)),t}const _=e=>f.get(e);const y=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],w=new Map;function E(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(w.get(t))return w.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=b.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!y.includes(n))return;const s=async function(e){const t=this.transaction(e,r?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return i&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),r&&t.done]))[0]};return w.set(t,s),s}p=(e=>(0,i.A)((0,i.A)({},e),{},{get:(t,n,i)=>E(t,n)||e.get(t,n,i),has:(t,n)=>!!E(t,n)||e.has(t,n)}))(p);class S{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const x="@firebase/app",k="0.14.4",C=new s.Vy("@firebase/app"),T="@firebase/app-compat",I="@firebase/analytics-compat",N="@firebase/analytics",P="@firebase/app-check-compat",A="@firebase/app-check",L="@firebase/auth",R="@firebase/auth-compat",O="@firebase/database",M="@firebase/data-connect",D="@firebase/database-compat",j="@firebase/functions",F="@firebase/functions-compat",z="@firebase/installations",U="@firebase/installations-compat",V="@firebase/messaging",B="@firebase/messaging-compat",H="@firebase/performance",q="@firebase/performance-compat",W="@firebase/remote-config",Z="@firebase/remote-config-compat",K="@firebase/storage",G="@firebase/storage-compat",Y="@firebase/firestore",Q="@firebase/ai",$="@firebase/firestore-compat",J="firebase",X="[DEFAULT]",ee={[x]:"fire-core",[T]:"fire-core-compat",[N]:"fire-analytics",[I]:"fire-analytics-compat",[A]:"fire-app-check",[P]:"fire-app-check-compat",[L]:"fire-auth",[R]:"fire-auth-compat",[O]:"fire-rtdb",[M]:"fire-data-connect",[D]:"fire-rtdb-compat",[j]:"fire-fn",[F]:"fire-fn-compat",[z]:"fire-iid",[U]:"fire-iid-compat",[V]:"fire-fcm",[B]:"fire-fcm-compat",[H]:"fire-perf",[q]:"fire-perf-compat",[W]:"fire-rc",[Z]:"fire-rc-compat",[K]:"fire-gcs",[G]:"fire-gcs-compat",[Y]:"fire-fst",[$]:"fire-fst-compat",[Q]:"fire-vertex","fire-js":"fire-js",[J]:"fire-js-all"},te=new Map,ne=new Map,ie=new Map;function re(e,t){try{e.container.addComponent(t)}catch(n){C.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function se(e){const t=e.name;if(ie.has(t))return C.debug("There were multiple attempts to register component ".concat(t,".")),!1;ie.set(t,e);for(const n of te.values())re(n,e);for(const n of ne.values())re(n,e);return!0}function oe(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ae(e){return null!==e&&void 0!==e&&void 0!==e.settings}const le={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ce=new o.FA("app","Firebase",le);class ue{constructor(e,t,n){this._isDeleted=!1,this._options=(0,i.A)({},e),this._config=(0,i.A)({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ce.create("app-deleted",{appName:this._name})}}const he="12.4.0";function de(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const s=(0,i.A)({name:X,automaticDataCollectionEnabled:!0},t),a=s.name;if("string"!==typeof a||!a)throw ce.create("bad-app-name",{appName:String(a)});if(n||(n=(0,o.T9)()),!n)throw ce.create("no-options");const l=te.get(a);if(l){if((0,o.bD)(n,l.options)&&(0,o.bD)(s,l.config))return l;throw ce.create("duplicate-app",{appName:a})}const c=new r.h1(a);for(const i of ie.values())c.addComponent(i);const u=new ue(n,s,c);return te.set(a,u),u}function fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X;const t=te.get(e);if(!t&&e===X&&(0,o.T9)())return de();if(!t)throw ce.create("no-app",{appName:e});return t}function pe(e,t,n){var i;let s=null!==(i=ee[e])&&void 0!==i?i:e;n&&(s+="-".concat(n));const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),o&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void C.warn(e.join(" "))}se(new r.uA("".concat(s,"-version"),()=>({library:s,version:t}),"VERSION"))}const me="firebase-heartbeat-store";let ge=null;function ve(){return ge||(ge=function(e,t){let{blocked:n,upgrade:i,blocking:r,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=v(o);return i&&o.addEventListener("upgradeneeded",e=>{i(v(o.result),e.oldVersion,e.newVersion,v(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),r&&e.addEventListener("versionchange",e=>r(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(me)}catch(n){console.warn(n)}}}).catch(e=>{throw ce.create("idb-open",{originalErrorMessage:e.message})})),ge}async function _e(e,t){try{const n=(await ve()).transaction(me,"readwrite"),i=n.objectStore(me);await i.put(t,ye(e)),await n.done}catch(n){if(n instanceof o.g)C.warn(n.message);else{const e=ce.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});C.warn(e.message)}}}function ye(e){return"".concat(e.name,"!").concat(e.options.appId)}class be{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ee(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=we();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(e=>e.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){C.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=we(),{heartbeatsToSend:n,unsentEntries:i}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let i=e.slice();for(const r of e){const e=n.find(e=>e.agent===r.agent);if(e){if(e.dates.push(r.date),Se(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Se(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=(0,o.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(t){return C.warn(t),""}}}function we(){return(new Date).toISOString().substring(0,10)}class Ee{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,o.zW)()&&(0,o.eX)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ve()).transaction(me),n=await t.objectStore(me).get(ye(e));return await t.done,n}catch(t){if(t instanceof o.g)C.warn(t.message);else{const e=ce.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});C.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return _e(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return _e(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Se(e){return(0,o.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var xe;xe="",se(new r.uA("platform-logger",e=>new S(e),"PRIVATE")),se(new r.uA("heartbeat",e=>new be(e),"PRIVATE")),pe(x,k,xe),pe(x,k,"esm2020"),pe("fire-js","")},288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function _(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||m}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||m}_.prototype.isReactComponent={},_.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=_.prototype;var w=b.prototype=new y;w.constructor=b,g(w,_.prototype),w.isPureReactComponent=!0;var E=Array.isArray;function S(){}var x={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function C(e,t,i){var r=i.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:i}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,r,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(a){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case i:u=!0;break;case d:return P((u=e._init)(e._payload),t,r,s,o)}}if(u)return o=o(e),u=""===s?"."+N(e,0):s,E(o)?(r="",null!=u&&(r=u.replace(I,"$&/")+"/"),P(o,t,r,"",function(e){return e})):null!=o&&(T(o)&&(l=o,c=r+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+u,o=C(l.type,c,l.props)),t.push(o)),1;u=0;var h,f=""===s?".":s+":";if(E(e))for(var m=0;m<e.length;m++)u+=P(s=e[m],t,r,a=f+N(s,m),o);else if("function"===typeof(m=null===(h=e)||"object"!==typeof h?null:"function"===typeof(h=p&&h[p]||h["@@iterator"])?h:null))for(e=m.call(e),m=0;!(s=e.next()).done;)u+=P(s=s.value,t,r,a=f+N(s,m++),o);else if("object"===a){if("function"===typeof e.then)return P(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(S,S):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,r,s,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function A(e,t,n){if(null==e)return e;var i=[],r=0;return P(e,i,"","",function(e){return t.call(n,e,r++)}),i}function L(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},O={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=f,t.Children=O,t.Component=_,t.Fragment=r,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return x.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var i=g({},e.props),r=e.key;if(null!=t)for(s in void 0!==t.key&&(r=""+t.key),t)!k.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(i[s]=t[s]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var o=Array(s),a=0;a<s;a++)o[a]=arguments[a+2];i.children=o}return C(e.type,r,i)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,n){var i,r={},s=null;if(null!=t)for(i in void 0!==t.key&&(s=""+t.key),t)k.call(t,i)&&"key"!==i&&"__self"!==i&&"__source"!==i&&(r[i]=t[i]);var o=arguments.length-2;if(1===o)r.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];r.children=a}if(e&&e.defaultProps)for(i in o=e.defaultProps)void 0===r[i]&&(r[i]=o[i]);return C(e,s,r)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:L}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=x.T,n={};x.T=n;try{var i=e(),r=x.S;null!==r&&r(n,i),"object"===typeof i&&null!==i&&"function"===typeof i.then&&i.then(S,R)}catch(s){R(s)}finally{null!==t&&null!==n.types&&(t.types=n.types),x.T=t}},t.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},t.use=function(e){return x.H.use(e)},t.useActionState=function(e,t,n){return x.H.useActionState(e,t,n)},t.useCallback=function(e,t){return x.H.useCallback(e,t)},t.useContext=function(e){return x.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return x.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return x.H.useEffect(e,t)},t.useEffectEvent=function(e){return x.H.useEffectEvent(e)},t.useId=function(){return x.H.useId()},t.useImperativeHandle=function(e,t,n){return x.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return x.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return x.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return x.H.useMemo(e,t)},t.useOptimistic=function(e,t){return x.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return x.H.useReducer(e,t,n)},t.useRef=function(e){return x.H.useRef(e)},t.useState=function(e){return x.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return x.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return x.H.useTransition()},t.version="19.2.0"},391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},555:(e,t,n)=>{"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function s(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,{A:()=>a})},579:(e,t,n)=>{"use strict";e.exports=n(799)},606:(e,t,n)=>{"use strict";n.d(t,{h1:()=>a,uA:()=>r});var i=n(776);class r{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const s="[DEFAULT]";class o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new i.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),i=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:i});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&s.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(i){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===s?void 0:r),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(o){}var r;return i||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},672:(e,t,n)=>{"use strict";var i=n(43);function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var o={d:{f:s,r:function(){throw Error(r(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(r(299));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,i=c(n,t.crossOrigin),r="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):"script"===n&&o.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,i=c(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:i,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.0"},776:(e,t,n)=>{"use strict";n.d(t,{cY:()=>E,FA:()=>B,g:()=>V,gz:()=>re,vA:()=>s,Hk:()=>o,K3:()=>l,u:()=>d,KA:()=>u,Uj:()=>h,gR:()=>Y,Fy:()=>k,tD:()=>se,A4:()=>f,bD:()=>X,dI:()=>le,hp:()=>ie,T9:()=>b,Tj:()=>_,yU:()=>y,XA:()=>w,mS:()=>g,Ku:()=>he,ZQ:()=>N,qc:()=>G,sr:()=>R,zJ:()=>S,c1:()=>L,Im:()=>$,lT:()=>M,zW:()=>z,jZ:()=>P,$g:()=>D,lV:()=>O,nr:()=>j,Ov:()=>F,Cv:()=>K,$L:()=>q,kH:()=>J,gE:()=>x,Am:()=>te,I9:()=>ne,yw:()=>Q,OE:()=>ue,kj:()=>ce,As:()=>W,P1:()=>I,eX:()=>U});var i=n(555);const r={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},s=function(e,t){if(!e)throw o(t)},o=function(e){return new Error("Firebase Database ("+r.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},a=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296===(64512&r)&&i+1<e.length&&56320===(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const t=e[r],s=r+1<e.length,o=s?e[r+1]:0,a=r+2<e.length,l=a?e[r+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),i.push(n[c],n[u],n[h],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(a(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const t=n[e.charAt(r++)],s=r<e.length?n[e.charAt(r)]:0;++r;const o=r<e.length?n[e.charAt(r)]:64;++r;const a=r<e.length?n[e.charAt(r)]:64;if(++r,null==t||null==s||null==o||null==a)throw new c;const l=t<<2|s>>4;if(i.push(l),64!==o){const e=s<<4&240|o>>2;if(i.push(e),64!==a){const e=o<<6&192|a;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class c extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const u=function(e){const t=a(e);return l.encodeByteArray(t,!0)},h=function(e){return u(e).replace(/\./g,"")},d=function(e){try{return l.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function f(e){return p(void 0,e)}function p(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&m(n)&&(e[n]=p(e[n],t[n]));return e}function m(e){return"__proto__"!==e}function g(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const v=()=>{try{return g().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/ConnectUs",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&d(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},_=e=>{var t;return null===(t=v())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},y=e=>{const t=_(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const i=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),i]:[t.substring(0,n),i]},b=()=>{var e;return null===(e=v())||void 0===e?void 0:e.config},w=e=>{var t;return null===(t=v())||void 0===t?void 0:t["_".concat(e)]};class E{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function S(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function x(e){return(await fetch(e,{credentials:"include"})).ok}function k(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=(0,i.A)({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[h(JSON.stringify({alg:"none",type:"JWT"})),h(JSON.stringify(o)),""].join(".")}const C={};let T=!1;function I(e,t){if("undefined"===typeof window||"undefined"===typeof document||!S(window.location.host)||C[e]===t||C[e]||T)return;function n(e){return"__firebase__banner__".concat(e)}C[e]=t;const i="__firebase__banner",r=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(C))C[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{T=!0,function(){const e=document.getElementById(i);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(i),t=n("text"),o=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,o,l,n),document.body.appendChild(t)}r?(o.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function N(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function P(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(N())}function A(){var e;const t=null===(e=v())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(i){return!1}}function L(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function R(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function O(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function M(){const e=N();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function D(){return!0===r.NODE_CLIENT||!0===r.NODE_ADMIN}function j(){return!A()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function F(){return!A()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function z(){try{return"object"===typeof indexedDB}catch(e){return!1}}function U(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}class V extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,V.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,B.prototype.create)}}class B{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),i=this.errors[e],r=i?function(e,t){return e.replace(H,(e,n)=>{const i=t[n];return null!=i?String(i):"<".concat(n,"?>")})}(i,t):"Error",s="".concat(this.serviceName,": ").concat(r," (").concat(n,").");return new V(n,s,t)}}const H=/\{\$([^}]+)}/g;function q(e){return JSON.parse(e)}function W(e){return JSON.stringify(e)}const Z=function(e){let t={},n={},i={},r="";try{const s=e.split(".");t=q(d(s[0])||""),n=q(d(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch(s){}return{header:t,claims:n,data:i,signature:r}},K=function(e){const t=Z(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")},G=function(e){const t=Z(e).claims;return"object"===typeof t&&!0===t.admin};function Y(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Q(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function $(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function J(e,t,n){const i={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=t.call(n,e[r],r,e));return i}function X(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],s=t[r];if(ee(n)&&ee(s)){if(!X(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function ee(e){return null!==e&&"object"===typeof e}function te(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function ne(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}}),t}function ie(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class re{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let i,r,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(i=l^o&(a^l),r=1518500249):(i=o^a^l,r=1859775393):u<60?(i=o&a|l&(o|a),r=2400959708):(i=o^a^l,r=3395469782);const e=(s<<5|s>>>27)+i+c+r+n[u]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let i=0;const r=this.buf_;let s=this.inbuf_;for(;i<t;){if(0===s)for(;i<=n;)this.compress_(e,i),i+=this.blockSize;if("string"===typeof e){for(;i<t;)if(r[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}else for(;i<t;)if(r[s]=e[i],++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let i=0;i<5;i++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[i]>>t&255,++n;return e}}function se(e,t){const n=new oe(e,t);return n.subscribe.bind(n)}class oe{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=ae),void 0===i.error&&(i.error=ae),void 0===i.complete&&(i.complete=ae);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}}),this.observers.push(i),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ae(){}function le(e,t){return"".concat(e," failed: ").concat(t," argument ")}const ce=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);if(r>=55296&&r<=56319){const t=r-55296;i++,s(i<e.length,"Surrogate pair missing trail surrogate.");r=65536+(t<<10)+(e.charCodeAt(i)-56320)}r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):r<65536?(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},ue=function(e){let t=0;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,n++):t+=3}return t};function he(e){return e&&e._delegate?e._delegate:e}},799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function r(e,t,i){var r=null;if(void 0!==i&&(r=""+i),void 0!==t.key&&(r=""+t.key),"key"in t)for(var s in i={},t)"key"!==s&&(i[s]=t[s]);else i=t;return t=i.ref,{$$typeof:n,type:e,key:r,ref:void 0!==t?t:null,props:i}}t.Fragment=i,t.jsx=r,t.jsxs=r},800:(e,t,n)=>{"use strict";n.d(t,{get:()=>Nr,C3:()=>zr,AU:()=>Or,Zy:()=>Rr,VC:()=>Tr,ref:()=>kr,hZ:()=>Ir});var i=n(555),r=n(232),s=n(606),o=n(776),a=n(965);const l="@firebase/database",c="1.1.0";let u="";function h(e){u=e}class d{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,o.As)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,o.$L)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class f{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,o.gR)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const p=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new d(t)}}catch(t){}return new f},m=p("localStorage"),g=p("sessionStorage"),v=new a.Vy("@firebase/database"),_=function(){let e=1;return function(){return e++}}(),y=function(e){const t=(0,o.kj)(e),n=new o.gz;n.update(t);const i=n.digest();return o.K3.encodeByteArray(i)},b=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=b.apply(null,n):e+="object"===typeof n?(0,o.As)(n):n,e+=" "}return e};let w=null,E=!0;const S=function(e,t){(0,o.vA)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(v.logLevel=a.$b.VERBOSE,w=v.log.bind(v),t&&g.set("logging_enabled",!0)):"function"===typeof e?w=e:(w=null,g.remove("logging_enabled"))},x=function(){if(!0===E&&(E=!1,null===w&&!0===g.get("logging_enabled")&&S(!0)),w){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=b.apply(null,t);w(i)}},k=function(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];x(e,...n)}},C=function(){const e="FIREBASE INTERNAL ERROR: "+b(...arguments);v.error(e)},T=function(){const e="FIREBASE FATAL ERROR: ".concat(b(...arguments));throw v.error(e),new Error(e)},I=function(){const e="FIREBASE WARNING: "+b(...arguments);v.warn(e)},N=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},P="[MIN_NAME]",A="[MAX_NAME]",L=function(e,t){if(e===t)return 0;if(e===P||t===A)return-1;if(t===P||e===A)return 1;{const n=U(e),i=U(t);return null!==n?null!==i?n-i===0?e.length-t.length:n-i:-1:null!==i?1:e<t?-1:1}},R=function(e,t){return e===t?0:e<t?-1:1},O=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+(0,o.As)(t))},M=function(e){if("object"!==typeof e||null===e)return(0,o.As)(e);const t=[];for(const i in e)t.push(i);t.sort();let n="{";for(let i=0;i<t.length;i++)0!==i&&(n+=","),n+=(0,o.As)(t[i]),n+=":",n+=M(e[t[i]]);return n+="}",n},D=function(e,t){const n=e.length;if(n<=t)return[e];const i=[];for(let r=0;r<n;r+=t)r+t>n?i.push(e.substring(r,n)):i.push(e.substring(r,r+t));return i};function j(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const F=function(e){(0,o.vA)(!N(e),"Invalid JSON number");const t=1023;let n,i,r,s,a;0===e?(i=0,r=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),i=s+t,r=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(i=0,r=Math.round(e/Math.pow(2,-1074))));const l=[];for(a=52;a;a-=1)l.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)l.push(i%2?1:0),i=Math.floor(i/2);l.push(n?1:0),l.reverse();const c=l.join("");let u="";for(a=0;a<64;a+=8){let e=parseInt(c.substr(a,8),2).toString(16);1===e.length&&(e="0"+e),u+=e}return u.toLowerCase()};const z=new RegExp("^-?(0*)\\d{1,10}$"),U=function(e){if(z.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},V=function(e){try{e()}catch(t){setTimeout(()=>{const e=t.stack||"";throw I("Exception was thrown by user callback.",e),t},Math.floor(0))}},B=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class H{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,(0,r.xZ)(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then(e=>this.appCheck=e)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){I('Provided AppCheck credentials for the app named "'.concat(this.appName,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class q{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(e=>this.auth_=e)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(e=>e&&"auth/token-not-initialized"===e.code?(x("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',I(e)}}class W{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}W.OWNER="owner";const Z="5",K=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,G="ac",Y="websocket",Q="long_polling";class ${constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;this.secure=t,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=m.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&m.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function J(e,t,n){let i;if((0,o.vA)("string"===typeof t,"typeof type must == string"),(0,o.vA)("object"===typeof n,"typeof params must == object"),t===Y)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Q)throw new Error("Unknown connection type: "+t);i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const r=[];return j(n,(e,t)=>{r.push(e+"="+t)}),i+r.join("&")}class X{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;(0,o.gR)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,o.A4)(this.counters_)}}const ee={},te={};function ne(e){const t=e.toString();return ee[t]||(ee[t]=new X),ee[t]}class ie{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&V(()=>{this.onMessage_(e[t])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const re="start";class se{constructor(e,t,n,i,r,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=k(e),this.stats_=ne(t),this.urlFn=e=>(this.appCheckToken&&(e[G]=this.appCheckToken),J(t,Q,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ie(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if((0,o.$g)()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new oe(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const[r,s,o,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,r===re)n.id=s,n.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,()=>{n.onClosed_()})):n.onClosed_()}},function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const[r,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(r,s)},()=>{this.onClosed_()},this.urlFn);const e={};e[re]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=Z,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[G]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&K.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){se.forceAllow_=!0}static forceDisallow(){se.forceDisallow_=!0}static isAvailable(){return!(0,o.$g)()&&(!!se.forceAllow_||!se.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,o.As)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=(0,o.KA)(t),i=D(n,1840);for(let r=0;r<i.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[r]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,o.$g)())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,o.As)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class oe{constructor(e,t,n,i){if(this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,o.$g)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=_(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=oe.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const i="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(r){x("frame writing exception"),r.stack&&x(r.stack),x(r)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||x("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",i=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+i+"="+e.seg+"&ts"+i+"="+e.ts+"&d"+i+"="+e.d,i++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(n,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),n()})}addTag(e,t){(0,o.$g)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{x("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(n){}},Math.floor(1))}}let ae=null;"undefined"!==typeof MozWebSocket?ae=MozWebSocket:"undefined"!==typeof WebSocket&&(ae=WebSocket);class le{constructor(e,t,n,i,r,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=k(this.connId),this.stats_=ne(t),this.connURL=le.connectionURL_(t,s,o,i,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,i,r){const s={};return s.v=Z,!(0,o.$g)()&&"undefined"!==typeof location&&location.hostname&&K.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),i&&(s[G]=i),r&&(s.p=r),J(e,Y,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,m.set("previous_websocket_failure",!0);try{let e;if((0,o.$g)()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(Z,"/").concat(u,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"/ConnectUs",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},i=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;i&&(e.proxy={origin:i})}this.mySock=new ae(this.connURL,[],e)}catch(n){this.log_("Error instantiating WebSocket.");const e=n.message||n.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){le.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==ae&&!le.forceDisallow_}static previouslyFailed(){return m.isInMemoryStorage||!0===m.get("previous_websocket_failure")}markConnectionHealthy(){m.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=(0,o.$L)(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,o.vA)(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=(0,o.As)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=D(t,16384);n.length>1&&this.sendString_(String(n.length));for(let i=0;i<n.length;i++)this.sendString_(n[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}le.responsesRequiredToBeHealthy=2,le.healthyTimeout=3e4;class ce{static get ALL_TRANSPORTS(){return[se,le]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=le&&le.isAvailable();let n=t&&!le.previouslyFailed();if(e.webSocketOnly&&(t||I("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[le];else{const e=this.transports_=[];for(const t of ce.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);ce.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ce.globalTransportInitialized_=!1;class ue{constructor(e,t,n,i,r,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=i,this.authToken_=r,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=k("c:"+this.id+":"),this.transportManager_=new ce(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=B(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=O("t",e),n=O("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=O("t",e),n=O("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=O("t",e);if("d"in e){const n=e.d;if("h"===t){const e=(0,i.A)({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?C("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):C("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Z!==n&&I("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),B(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):B(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(m.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class he{put(e,t,n,i){}merge(e,t,n,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class de{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,o.vA)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(let e=0;e<r.length;e++)r[e].callback.apply(r[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const i=this.getInitialEvent(e);i&&t.apply(n,i)}off(e,t,n){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let r=0;r<i.length;r++)if(i[r].callback===t&&(!n||n===i[r].context))return void i.splice(r,1)}validateEventType_(e){(0,o.vA)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class fe extends de{static getInstance(){return new fe}constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||(0,o.jZ)()||(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return(0,o.vA)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class pe{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function me(){return new pe("")}function ge(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function ve(e){return e.pieces_.length-e.pieceNum_}function _e(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new pe(e.pieces_,t)}function ye(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function be(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function we(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new pe(t,0)}function Ee(e,t){const n=[];for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);if(t instanceof pe)for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new pe(n,0)}function Se(e){return e.pieceNum_>=e.pieces_.length}function xe(e,t){const n=ge(e),i=ge(t);if(null===n)return t;if(n===i)return xe(_e(e),_e(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function ke(e,t){if(ve(e)!==ve(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function Ce(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(ve(e)>ve(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}class Te{constructor(e,t){this.errorPrefix_=t,this.parts_=be(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=(0,o.OE)(this.parts_[n]);Ie(this)}}function Ie(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ne(e))}function Ne(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Pe extends de{static getInstance(){return new Pe}constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))},!1)}getInitialEvent(e){return(0,o.vA)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Ae=1e3;class Le extends he{constructor(e,t,n,i,r,s,a,l){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=i,this.onServerInfoUpdate_=r,this.authTokenProvider_=s,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Le.nextPersistentConnectionId_++,this.log_=k("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ae,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!(0,o.$g)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Pe.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&fe.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const i=++this.requestNumber_,r={r:i,a:e,b:t};this.log_((0,o.As)(r)),(0,o.vA)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[i]=n)}get(e){this.initConnection_();const t=new o.cY,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),t.promise}listen(e,t,n,i){this.initConnection_();const r=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+r),this.listens.has(s)||this.listens.set(s,new Map),(0,o.vA)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,o.vA)(!this.listens.get(s).has(r),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:t,query:e,tag:n};this.listens.get(s).set(r,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)})}sendListen_(e){const t=e.query,n=t._path.toString(),i=t._queryIdentifier;this.log_("Listen on "+n+" for "+i);const r={p:n};e.tag&&(r.q=t._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest("q",r,r=>{const s=r.d,o=r.s;Le.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(i))===e&&(this.log_("listen response",r),"ok"!==o&&this.removeListen_(n,i),e.onComplete&&e.onComplete(o,s))})}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&(0,o.gR)(e,"w")){const n=(0,o.yw)(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();I("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,o.qc)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=(0,o.Cv)(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,t=>{const n=t.s,i=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,i))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)})}unlisten(e,t){const n=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+i),(0,o.vA)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,e._queryObject,t)}sendUnlisten_(e,t,n,i){this.log_("Unlisten on "+e+" for "+t);const r={p:e};i&&(r.q=n,r.t=i),this.sendRequest("n",r)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,i){const r={p:t,d:n};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,e=>{i&&setTimeout(()=>{i(e.s,e.d)},Math.floor(0))})}put(e,t,n,i){this.putInternal("p",e,t,n,i)}merge(e,t,n,i){this.putInternal("m",e,t,n,i)}putInternal(e,t,n,i,r){this.initConnection_();const s={p:t,d:n};void 0!==r&&(s.h=r),this.outstandingPuts_.push({action:e,request:s,onComplete:i}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),i&&i(n.s,n.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,o.As)(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):C("Unrecognized action received from server: "+(0,o.As)(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,o.vA)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ae,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ae,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ae),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=Math.max(0,(new Date).getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Le.nextConnectionId_++,r=this.lastSessionId;let s=!1,a=null;const l=function(){a?a.close():(s=!0,n())},c=function(e){(0,o.vA)(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(e)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[o,l]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);s?x("getToken() completed but was canceled"):(x("getToken() completed. Creating connection."),this.authToken_=o&&o.accessToken,this.appCheckToken_=l&&l.token,a=new ue(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,e=>{I(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")},r))}catch(C){this.log_("Failed to get token: "+C),s||(this.repoInfo_.nodeAdmin&&I(C),l())}}}interrupt(e){x("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){x("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,o.Im)(this.interruptReasons_)&&(this.reconnectDelay_=Ae,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map(e=>M(e)).join("$"):"default";const i=this.removeListen_(e,n);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,t){const n=new pe(e).toString();let i;if(this.listens.has(n)){const e=this.listens.get(n);i=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else i=void 0;return i}onAuthRevoked_(e,t){x("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){x("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";(0,o.$g)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+u.replace(/\./g,"-")]=1,(0,o.jZ)()?e["framework.cordova"]=1:(0,o.lV)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=fe.getInstance().currentlyOnline();return(0,o.Im)(this.interruptReasons_)&&e}}Le.nextPersistentConnectionId_=0,Le.nextConnectionId_=0;class Re{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Re(e,t)}}class Oe{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new Re(P,e),i=new Re(P,t);return 0!==this.compare(n,i)}minPost(){return Re.MIN}}let Me;class De extends Oe{static get __EMPTY_NODE(){return Me}static set __EMPTY_NODE(e){Me=e}compare(e,t){return L(e.name,t.name)}isDefinedOn(e){throw(0,o.Hk)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Re.MIN}maxPost(){return new Re(A,Me)}makePost(e,t){return(0,o.vA)("string"===typeof e,"KeyIndex indexValue must always be a string."),new Re(e,Me)}toString(){return".key"}}const je=new De;class Fe{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,i&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ze{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:ze.RED,this.left=null!=i?i:Ue.EMPTY_NODE,this.right=null!=r?r:Ue.EMPTY_NODE}copy(e,t,n,i,r){return new ze(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ue.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,i;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Ue.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ze.RED=!0,ze.BLACK=!1;class Ue{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ue.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new Ue(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ze.BLACK,null,null))}remove(e){return new Ue(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ze.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,i=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(i=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Fe(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Fe(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Fe(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Fe(this.root_,null,this.comparator_,!0,e)}}function Ve(e,t){return L(e.name,t.name)}function Be(e,t){return L(e,t)}let He;Ue.EMPTY_NODE=new class{copy(e,t,n,i,r){return this}insert(e,t,n){return new ze(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const qe=function(e){return"number"===typeof e?"number:"+F(e):"string:"+e},We=function(e){if(e.isLeafNode()){const t=e.val();(0,o.vA)("string"===typeof t||"number"===typeof t||"object"===typeof t&&(0,o.gR)(t,".sv"),"Priority must be a string or number.")}else(0,o.vA)(e===He||e.isEmpty(),"priority of unexpected type.");(0,o.vA)(e===He||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Ze,Ke,Ge;class Ye{static set __childrenNodeConstructor(e){Ze=e}static get __childrenNodeConstructor(){return Ze}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ye.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,(0,o.vA)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),We(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ye(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:Ye.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Se(e)?this:".priority"===ge(e)?this.priorityNode_:Ye.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:Ye.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=ge(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:((0,o.vA)(".priority"!==n||1===ve(e),".priority must be the last token in a path"),this.updateImmediateChild(n,Ye.__childrenNodeConstructor.EMPTY_NODE.updateChild(_e(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+qe(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?F(this.value_):this.value_,this.lazyHash_=y(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ye.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ye.__childrenNodeConstructor?-1:((0,o.vA)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,i=Ye.VALUE_TYPE_ORDER.indexOf(t),r=Ye.VALUE_TYPE_ORDER.indexOf(n);return(0,o.vA)(i>=0,"Unknown leaf type: "+t),(0,o.vA)(r>=0,"Unknown leaf type: "+n),i===r?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}Ye.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Qe=new class extends Oe{compare(e,t){const n=e.node.getPriority(),i=t.node.getPriority(),r=n.compareTo(i);return 0===r?L(e.name,t.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Re.MIN}maxPost(){return new Re(A,new Ye("[PRIORITY-POST]",Ge))}makePost(e,t){const n=Ke(e);return new Re(t,new Ye("[PRIORITY-POST]",n))}toString(){return".priority"}},$e=Math.log(2);class Je{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/$e,10)),this.current_=this.count-1;const n=(i=this.count,parseInt(Array(i+1).join("1"),2));var i;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Xe=function(e,t,n,i){e.sort(t);const r=function(t,i){const s=i-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new ze(a,o.node,ze.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=r(t,l),u=r(l+1,i);return o=e[l],a=n?n(o):o,new ze(a,o.node,ze.BLACK,c,u)}},s=function(t){let i=null,s=null,o=e.length;const a=function(t,i){const s=o-t,a=o;o-=t;const c=r(s+1,a),u=e[s],h=n?n(u):u;l(new ze(h,u.node,i,null,c))},l=function(e){i?(i.left=e,i=e):(s=e,i=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),i=Math.pow(2,t.count-(e+1));n?a(i,ze.BLACK):(a(i,ze.BLACK),a(i,ze.RED))}return s}(new Je(e.length));return new Ue(i||t,s)};let et;const tt={};class nt{static get Default(){return(0,o.vA)(tt&&Qe,"ChildrenNode.ts has not been loaded"),et=et||new nt({".priority":tt},{".priority":Qe}),et}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=(0,o.yw)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ue?t:null}hasIndex(e){return(0,o.gR)(this.indexSet_,e.toString())}addIndex(e,t){(0,o.vA)(e!==je,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const s=t.getIterator(Re.Wrap);let a,l=s.getNext();for(;l;)r=r||e.isDefinedOn(l.node),n.push(l),l=s.getNext();a=r?Xe(n,e.getCompare()):tt;const c=e.toString(),u=(0,i.A)({},this.indexSet_);u[c]=e;const h=(0,i.A)({},this.indexes_);return h[c]=a,new nt(h,u)}addToIndexes(e,t){const n=(0,o.kH)(this.indexes_,(n,i)=>{const r=(0,o.yw)(this.indexSet_,i);if((0,o.vA)(r,"Missing index implementation for "+i),n===tt){if(r.isDefinedOn(e.node)){const n=[],i=t.getIterator(Re.Wrap);let s=i.getNext();for(;s;)s.name!==e.name&&n.push(s),s=i.getNext();return n.push(e),Xe(n,r.getCompare())}return tt}{const i=t.get(e.name);let r=n;return i&&(r=r.remove(new Re(e.name,i))),r.insert(e,e.node)}});return new nt(n,this.indexSet_)}removeFromIndexes(e,t){const n=(0,o.kH)(this.indexes_,n=>{if(n===tt)return n;{const i=t.get(e.name);return i?n.remove(new Re(e.name,i)):n}});return new nt(n,this.indexSet_)}}let it;class rt{static get EMPTY_NODE(){return it||(it=new rt(new Ue(Be),null,nt.Default))}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&We(this.priorityNode_),this.children_.isEmpty()&&(0,o.vA)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||it}updatePriority(e){return this.children_.isEmpty()?this:new rt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?it:t}}getChild(e){const t=ge(e);return null===t?this:this.getImmediateChild(t).getChild(_e(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if((0,o.vA)(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new Re(e,t);let i,r;t.isEmpty()?(i=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(n,this.children_)):(i=this.children_.insert(e,t),r=this.indexMap_.addToIndexes(n,this.children_));const s=i.isEmpty()?it:this.priorityNode_;return new rt(i,s,r)}}updateChild(e,t){const n=ge(e);if(null===n)return t;{(0,o.vA)(".priority"!==ge(e)||1===ve(e),".priority must be the last token in a path");const i=this.getImmediateChild(n).updateChild(_e(e),t);return this.updateImmediateChild(n,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,i=0,r=!0;if(this.forEachChild(Qe,(s,o)=>{t[s]=o.val(e),n++,r&&rt.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):r=!1}),!e&&r&&i<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+qe(this.getPriority().val())+":"),this.forEachChild(Qe,(t,n)=>{const i=n.hash();""!==i&&(e+=":"+t+":"+i)}),this.lazyHash_=""===e?"":y(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const i=this.resolveIndex_(n);if(i){const n=i.getPredecessorKey(new Re(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Re(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Re(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal(e=>t(e.name,e.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,e=>e);{const n=this.children_.getIteratorFrom(e.name,Re.Wrap);let i=n.peek();for(;null!=i&&t.compare(i,e)<0;)n.getNext(),i=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,e=>e);{const n=this.children_.getReverseIteratorFrom(e.name,Re.Wrap);let i=n.peek();for(;null!=i&&t.compare(i,e)>0;)n.getNext(),i=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===st?-1:0}withIndex(e){if(e===je||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new rt(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===je||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(Qe),n=t.getIterator(Qe);let i=e.getNext(),r=n.getNext();for(;i&&r;){if(i.name!==r.name||!i.node.equals(r.node))return!1;i=e.getNext(),r=n.getNext()}return null===i&&null===r}return!1}return!1}}resolveIndex_(e){return e===je?null:this.indexMap_.get(e.toString())}}rt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const st=new class extends rt{constructor(){super(new Ue(Be),rt.EMPTY_NODE,nt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return rt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Re,{MIN:{value:new Re(P,rt.EMPTY_NODE)},MAX:{value:new Re(A,st)}}),De.__EMPTY_NODE=rt.EMPTY_NODE,Ye.__childrenNodeConstructor=rt,He=st,function(e){Ge=e}(st);const ot=!0;function at(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return rt.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),(0,o.vA)(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new Ye(e,at(t))}if(e instanceof Array||!ot){let n=rt.EMPTY_NODE;return j(e,(t,i)=>{if((0,o.gR)(e,t)&&"."!==t.substring(0,1)){const e=at(i);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}}),n.updatePriority(at(t))}{const n=[];let i=!1;if(j(e,(e,t)=>{if("."!==e.substring(0,1)){const r=at(t);r.isEmpty()||(i=i||!r.getPriority().isEmpty(),n.push(new Re(e,r)))}}),0===n.length)return rt.EMPTY_NODE;const r=Xe(n,Ve,e=>e.name,Be);if(i){const e=Xe(n,Qe.getCompare());return new rt(r,at(t),new nt({".priority":e},{".priority":Qe}))}return new rt(r,at(t),nt.Default)}}!function(e){Ke=e}(at);class lt extends Oe{constructor(e){super(),this.indexPath_=e,(0,o.vA)(!Se(e)&&".priority"!==ge(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),i=this.extractChild(t.node),r=n.compareTo(i);return 0===r?L(e.name,t.name):r}makePost(e,t){const n=at(e),i=rt.EMPTY_NODE.updateChild(this.indexPath_,n);return new Re(t,i)}maxPost(){const e=rt.EMPTY_NODE.updateChild(this.indexPath_,st);return new Re(A,e)}toString(){return be(this.indexPath_,0).join("/")}}const ct=new class extends Oe{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?L(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Re.MIN}maxPost(){return Re.MAX}makePost(e,t){const n=at(e);return new Re(t,n)}toString(){return".value"}};function ut(e){return{type:"value",snapshotNode:e}}function ht(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function dt(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function ft(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class pt{constructor(e){this.index_=e}updateChild(e,t,n,i,r,s){(0,o.vA)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(i).equals(n.getChild(i))&&a.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(dt(t,a)):(0,o.vA)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ht(t,n)):s.trackChildChange(ft(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Qe,(e,i)=>{t.hasChild(e)||n.trackChildChange(dt(e,i))}),t.isLeafNode()||t.forEachChild(Qe,(t,i)=>{if(e.hasChild(t)){const r=e.getImmediateChild(t);r.equals(i)||n.trackChildChange(ft(t,i,r))}else n.trackChildChange(ht(t,i))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?rt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class mt{constructor(e){this.indexedFilter_=new pt(e.getIndex()),this.index_=e.getIndex(),this.startPost_=mt.getStartPost_(e),this.endPost_=mt.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,i,r,s){return this.matches(new Re(t,n))||(n=rt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,i,r,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=rt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(rt.EMPTY_NODE);const r=this;return t.forEachChild(Qe,(e,t)=>{r.matches(new Re(e,t))||(i=i.updateImmediateChild(e,rt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class gt{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new mt(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,i,r,s){return this.rangedFilter_.matches(new Re(t,n))||(n=rt.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,i,r,s):this.fullLimitUpdateChild_(e,t,n,r,s)}updateFullNode(e,t,n){let i;if(t.isLeafNode()||t.isEmpty())i=rt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;i=rt.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;i=i.updateImmediateChild(t.name,t.node),n++}}}else{let e;i=t.withIndex(this.index_),i=i.updatePriority(rt.EMPTY_NODE),e=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:i=i.updateImmediateChild(t.name,rt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,i,r){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const a=e;(0,o.vA)(a.numChildren()===this.limit_,"");const l=new Re(t,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(t)){const e=a.getImmediateChild(t);let o=i.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=o&&(o.name===t||a.hasChild(o.name));)o=i.getChildAfterChild(this.index_,o,this.reverse_);const h=null==o?1:s(o,l);if(u&&!n.isEmpty()&&h>=0)return null!=r&&r.trackChildChange(ft(t,n,e)),a.updateImmediateChild(t,n);{null!=r&&r.trackChildChange(dt(t,e));const n=a.updateImmediateChild(t,rt.EMPTY_NODE);return null!=o&&this.rangedFilter_.matches(o)?(null!=r&&r.trackChildChange(ht(o.name,o.node)),n.updateImmediateChild(o.name,o.node)):n}}return n.isEmpty()?e:u&&s(c,l)>=0?(null!=r&&(r.trackChildChange(dt(c.name,c.node)),r.trackChildChange(ht(t,n))),a.updateImmediateChild(t,n).updateImmediateChild(c.name,rt.EMPTY_NODE)):e}}class vt{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Qe}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,o.vA)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,o.vA)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:P}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,o.vA)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,o.vA)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:A}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,o.vA)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Qe}copy(){const e=new vt;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function _t(e){const t={};if(e.isDefault())return t;let n;if(e.index_===Qe?n="$priority":e.index_===ct?n="$value":e.index_===je?n="$key":((0,o.vA)(e.index_ instanceof lt,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=(0,o.As)(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=(0,o.As)(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+(0,o.As)(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=(0,o.As)(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+(0,o.As)(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function yt(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Qe&&(t.i=e.index_.toString()),t}class bt extends he{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,o.vA)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,n,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=i,this.log_=k("p:rest:"),this.listens_={}}listen(e,t,n,i){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const s=bt.getListenId_(e,n),a={};this.listens_[s]=a;const l=_t(e._queryParams);this.restRequest_(r+".json",l,(e,t)=>{let l=t;if(404===e&&(l=null,e=null),null===e&&this.onDataUpdate_(r,l,!1,n),(0,o.yw)(this.listens_,s)===a){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",i(t,null)}})}unlisten(e,t){const n=bt.getListenId_(e,t);delete this.listens_[n]}get(e){const t=_t(e._queryParams),n=e._path.toString(),i=new o.cY;return this.restRequest_(n+".json",t,(e,t)=>{let r=t;404===e&&(r=null,e=null),null===e?(this.onDataUpdate_(n,r,!1,null),i.resolve(r)):i.reject(new Error(r))}),i.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(i=>{let[r,s]=i;r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,o.Am)(t);this.log_("Sending REST request for "+a);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(n&&4===l.readyState){this.log_("REST Response for "+a+" received. status:",l.status,"response:",l.responseText);let t=null;if(l.status>=200&&l.status<300){try{t=(0,o.$L)(l.responseText)}catch(e){I("Failed to parse JSON response for "+a+": "+l.responseText)}n(null,t)}else 401!==l.status&&404!==l.status&&I("Got unsuccessful REST response for "+a+" Status: "+l.status),n(l.status);n=null}},l.open("GET",a,!0),l.send()})}}class wt{constructor(){this.rootNode_=rt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Et(){return{value:null,children:new Map}}function St(e,t,n){if(Se(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const i=ge(t);e.children.has(i)||e.children.set(i,Et());St(e.children.get(i),t=_e(t),n)}}function xt(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((e,n)=>{t(n,e)})}(e,(e,i)=>{xt(i,new pe(t.toString()+"/"+e),n)})}class kt{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=(0,i.A)({},e);return this.last_&&j(this.last_,(e,n)=>{t[e]=t[e]-n}),this.last_=e,t}}class Ct{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new kt(e);const n=1e4+2e4*Math.random();B(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;j(e,(e,i)=>{i>0&&(0,o.gR)(this.statsToReport_,e)&&(t[e]=i,n=!0)}),n&&this.server_.reportStats(t),B(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Tt;function It(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Tt||(Tt={}));class Nt{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Tt.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Se(this.path)){if(null!=this.affectedTree.value)return(0,o.vA)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new pe(e));return new Nt(me(),t,this.revert)}}return(0,o.vA)(ge(this.path)===e,"operationForChild called for unrelated child."),new Nt(_e(this.path),this.affectedTree,this.revert)}}class Pt{constructor(e,t){this.source=e,this.path=t,this.type=Tt.LISTEN_COMPLETE}operationForChild(e){return Se(this.path)?new Pt(this.source,me()):new Pt(this.source,_e(this.path))}}class At{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Tt.OVERWRITE}operationForChild(e){return Se(this.path)?new At(this.source,me(),this.snap.getImmediateChild(e)):new At(this.source,_e(this.path),this.snap)}}class Lt{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Tt.MERGE}operationForChild(e){if(Se(this.path)){const t=this.children.subtree(new pe(e));return t.isEmpty()?null:t.value?new At(this.source,me(),t.value):new Lt(this.source,me(),t)}return(0,o.vA)(ge(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Lt(this.source,_e(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Rt{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Se(e))return this.isFullyInitialized()&&!this.filtered_;const t=ge(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Ot{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Mt(e,t,n,i,r,s){const a=i.filter(e=>e.type===n);a.sort((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw(0,o.Hk)("Should only compare child_ events.");const i=new Re(t.childName,t.snapshotNode),r=new Re(n.childName,n.snapshotNode);return e.index_.compare(i,r)}(e,t,n)),a.forEach(n=>{const i=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);r.forEach(r=>{r.respondsTo(n.type)&&t.push(r.createEvent(i,e.query_))})})}function Dt(e,t){return{eventCache:e,serverCache:t}}function jt(e,t,n,i){return Dt(new Rt(t,n,i),e.serverCache)}function Ft(e,t,n,i){return Dt(e.eventCache,new Rt(t,n,i))}function zt(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Ut(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Vt;class Bt{static fromObject(e){let t=new Bt(null);return j(e,(e,n)=>{t=t.set(new pe(e),n)}),t}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Vt||(Vt=new Ue(R)),Vt);this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:me(),value:this.value};if(Se(e))return null;{const n=ge(e),i=this.children.get(n);if(null!==i){const r=i.findRootMostMatchingPathAndValue(_e(e),t);if(null!=r){return{path:Ee(new pe(n),r.path),value:r.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Se(e))return this;{const t=ge(e),n=this.children.get(t);return null!==n?n.subtree(_e(e)):new Bt(null)}}set(e,t){if(Se(e))return new Bt(t,this.children);{const n=ge(e),i=(this.children.get(n)||new Bt(null)).set(_e(e),t),r=this.children.insert(n,i);return new Bt(this.value,r)}}remove(e){if(Se(e))return this.children.isEmpty()?new Bt(null):new Bt(null,this.children);{const t=ge(e),n=this.children.get(t);if(n){const i=n.remove(_e(e));let r;return r=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&r.isEmpty()?new Bt(null):new Bt(this.value,r)}return this}}get(e){if(Se(e))return this.value;{const t=ge(e),n=this.children.get(t);return n?n.get(_e(e)):null}}setTree(e,t){if(Se(e))return t;{const n=ge(e),i=(this.children.get(n)||new Bt(null)).setTree(_e(e),t);let r;return r=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),new Bt(this.value,r)}}fold(e){return this.fold_(me(),e)}fold_(e,t){const n={};return this.children.inorderTraversal((i,r)=>{n[i]=r.fold_(Ee(e,i),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,me(),t)}findOnPath_(e,t,n){const i=!!this.value&&n(t,this.value);if(i)return i;if(Se(e))return null;{const i=ge(e),r=this.children.get(i);return r?r.findOnPath_(_e(e),Ee(t,i),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,me(),t)}foreachOnPath_(e,t,n){if(Se(e))return this;{this.value&&n(t,this.value);const i=ge(e),r=this.children.get(i);return r?r.foreachOnPath_(_e(e),Ee(t,i),n):new Bt(null)}}foreach(e){this.foreach_(me(),e)}foreach_(e,t){this.children.inorderTraversal((n,i)=>{i.foreach_(Ee(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}}class Ht{constructor(e){this.writeTree_=e}static empty(){return new Ht(new Bt(null))}}function qt(e,t,n){if(Se(t))return new Ht(new Bt(n));{const i=e.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const o=xe(r,t);return s=s.updateChild(o,n),new Ht(e.writeTree_.set(r,s))}{const i=new Bt(n),r=e.writeTree_.setTree(t,i);return new Ht(r)}}}function Wt(e,t,n){let i=e;return j(n,(e,n)=>{i=qt(i,Ee(t,e),n)}),i}function Zt(e,t){if(Se(t))return Ht.empty();{const n=e.writeTree_.setTree(t,new Bt(null));return new Ht(n)}}function Kt(e,t){return null!=Gt(e,t)}function Gt(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(xe(n.path,t)):null}function Yt(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Qe,(e,n)=>{t.push(new Re(e,n))}):e.writeTree_.children.inorderTraversal((e,n)=>{null!=n.value&&t.push(new Re(e,n.value))}),t}function Qt(e,t){if(Se(t))return e;{const n=Gt(e,t);return new Ht(null!=n?new Bt(n):e.writeTree_.subtree(t))}}function $t(e){return e.writeTree_.isEmpty()}function Jt(e,t){return Xt(me(),e.writeTree_,t)}function Xt(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let i=null;return t.children.inorderTraversal((t,r)=>{".priority"===t?((0,o.vA)(null!==r.value,"Priority writes must always be leaf nodes"),i=r.value):n=Xt(Ee(e,t),r,n)}),n.getChild(e).isEmpty()||null===i||(n=n.updateChild(Ee(e,".priority"),i)),n}}function en(e,t){return pn(t,e)}function tn(e,t){const n=e.allWrites.findIndex(e=>e.writeId===t);(0,o.vA)(n>=0,"removeWrite called with nonexistent writeId.");const i=e.allWrites[n];e.allWrites.splice(n,1);let r=i.visible,s=!1,a=e.allWrites.length-1;for(;r&&a>=0;){const t=e.allWrites[a];t.visible&&(a>=n&&nn(t,i.path)?r=!1:Ce(i.path,t.path)&&(s=!0)),a--}if(r){if(s)return function(e){e.visibleWrites=sn(e.allWrites,rn,me()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(i.snap)e.visibleWrites=Zt(e.visibleWrites,i.path);else{j(i.children,t=>{e.visibleWrites=Zt(e.visibleWrites,Ee(i.path,t))})}return!0}return!1}function nn(e,t){if(e.snap)return Ce(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Ce(Ee(e.path,n),t))return!0;return!1}function rn(e){return e.visible}function sn(e,t,n){let i=Ht.empty();for(let r=0;r<e.length;++r){const s=e[r];if(t(s)){const e=s.path;let t;if(s.snap)Ce(n,e)?(t=xe(n,e),i=qt(i,t,s.snap)):Ce(e,n)&&(t=xe(e,n),i=qt(i,me(),s.snap.getChild(t)));else{if(!s.children)throw(0,o.Hk)("WriteRecord should have .snap or .children");if(Ce(n,e))t=xe(n,e),i=Wt(i,t,s.children);else if(Ce(e,n))if(t=xe(e,n),Se(t))i=Wt(i,me(),s.children);else{const e=(0,o.yw)(s.children,ge(t));if(e){const n=e.getChild(_e(t));i=qt(i,me(),n)}}}}}return i}function on(e,t,n,i,r){if(i||r){const s=Qt(e.visibleWrites,t);if(!r&&$t(s))return n;if(r||null!=n||Kt(s,me())){const s=function(e){return(e.visible||r)&&(!i||!~i.indexOf(e.writeId))&&(Ce(e.path,t)||Ce(t,e.path))};return Jt(sn(e.allWrites,s,t),n||rt.EMPTY_NODE)}return null}{const i=Gt(e.visibleWrites,t);if(null!=i)return i;{const i=Qt(e.visibleWrites,t);if($t(i))return n;if(null!=n||Kt(i,me())){return Jt(i,n||rt.EMPTY_NODE)}return null}}}function an(e,t,n,i){return on(e.writeTree,e.treePath,t,n,i)}function ln(e,t){return function(e,t,n){let i=rt.EMPTY_NODE;const r=Gt(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(Qe,(e,t)=>{i=i.updateImmediateChild(e,t)}),i;if(n){const r=Qt(e.visibleWrites,t);return n.forEachChild(Qe,(e,t)=>{const n=Jt(Qt(r,new pe(e)),t);i=i.updateImmediateChild(e,n)}),Yt(r).forEach(e=>{i=i.updateImmediateChild(e.name,e.node)}),i}return Yt(Qt(e.visibleWrites,t)).forEach(e=>{i=i.updateImmediateChild(e.name,e.node)}),i}(e.writeTree,e.treePath,t)}function cn(e,t,n,i){return function(e,t,n,i,r){(0,o.vA)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=Ee(t,n);if(Kt(e.visibleWrites,s))return null;{const t=Qt(e.visibleWrites,s);return $t(t)?r.getChild(n):Jt(t,r.getChild(n))}}(e.writeTree,e.treePath,t,n,i)}function un(e,t){return function(e,t){return Gt(e.visibleWrites,t)}(e.writeTree,Ee(e.treePath,t))}function hn(e,t,n,i,r,s){return function(e,t,n,i,r,s,o){let a;const l=Qt(e.visibleWrites,t),c=Gt(l,me());if(null!=c)a=c;else{if(null==n)return[];a=Jt(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let l=n.getNext();for(;l&&e.length<r;)0!==t(l,i)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,i,r,s)}function dn(e,t,n){return function(e,t,n,i){const r=Ee(t,n),s=Gt(e.visibleWrites,r);if(null!=s)return s;if(i.isCompleteForChild(n))return Jt(Qt(e.visibleWrites,r),i.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function fn(e,t){return pn(Ee(e.treePath,t),e.writeTree)}function pn(e,t){return{treePath:e,writeTree:t}}class mn{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;(0,o.vA)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,o.vA)(".priority"!==n,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(n);if(i){const r=i.type;if("child_added"===t&&"child_removed"===r)this.changeMap.set(n,ft(n,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===r)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===r)this.changeMap.set(n,dt(n,i.oldSnap));else if("child_changed"===t&&"child_added"===r)this.changeMap.set(n,ht(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==r)throw(0,o.Hk)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(n,ft(n,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const gn=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class vn{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Rt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return dn(this.writes_,e,t)}}getChildAfterChild(e,t,n){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ut(this.viewCache_),r=hn(this.writes_,i,t,1,n,e);return 0===r.length?null:r[0]}}function _n(e,t,n,i,r){const s=new mn;let a,l;if(n.type===Tt.OVERWRITE){const c=n;c.source.fromUser?a=wn(e,t,c.path,c.snap,i,r,s):((0,o.vA)(c.source.fromServer,"Unknown source."),l=c.source.tagged||t.serverCache.isFiltered()&&!Se(c.path),a=bn(e,t,c.path,c.snap,i,r,l,s))}else if(n.type===Tt.MERGE){const c=n;c.source.fromUser?a=function(e,t,n,i,r,s,o){let a=t;return i.foreach((i,l)=>{const c=Ee(n,i);En(t,ge(c))&&(a=wn(e,a,c,l,r,s,o))}),i.foreach((i,l)=>{const c=Ee(n,i);En(t,ge(c))||(a=wn(e,a,c,l,r,s,o))}),a}(e,t,c.path,c.children,i,r,s):((0,o.vA)(c.source.fromServer,"Unknown source."),l=c.source.tagged||t.serverCache.isFiltered(),a=xn(e,t,c.path,c.children,i,r,l,s))}else if(n.type===Tt.ACK_USER_WRITE){const l=n;a=l.revert?function(e,t,n,i,r,s){let a;if(null!=un(i,n))return t;{const l=new vn(i,t,r),c=t.eventCache.getNode();let u;if(Se(n)||".priority"===ge(n)){let n;if(t.serverCache.isFullyInitialized())n=an(i,Ut(t));else{const e=t.serverCache.getNode();(0,o.vA)(e instanceof rt,"serverChildren would be complete if leaf node"),n=ln(i,e)}u=e.filter.updateFullNode(c,n,s)}else{const r=ge(n);let o=dn(i,r,t.serverCache);null==o&&t.serverCache.isCompleteForChild(r)&&(o=c.getImmediateChild(r)),u=null!=o?e.filter.updateChild(c,r,o,_e(n),l,s):t.eventCache.getNode().hasChild(r)?e.filter.updateChild(c,r,rt.EMPTY_NODE,_e(n),l,s):c,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=an(i,Ut(t)),a.isLeafNode()&&(u=e.filter.updateFullNode(u,a,s)))}return a=t.serverCache.isFullyInitialized()||null!=un(i,me()),jt(t,u,a,e.filter.filtersNodes())}}(e,t,l.path,i,r,s):function(e,t,n,i,r,s,o){if(null!=un(r,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=i.value){if(Se(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return bn(e,t,n,l.getNode().getChild(n),r,s,a,o);if(Se(n)){let i=new Bt(null);return l.getNode().forEachChild(je,(e,t)=>{i=i.set(new pe(e),t)}),xn(e,t,n,i,r,s,a,o)}return t}{let c=new Bt(null);return i.foreach((e,t)=>{const i=Ee(n,e);l.isCompleteForPath(i)&&(c=c.set(e,l.getNode().getChild(i)))}),xn(e,t,n,c,r,s,a,o)}}(e,t,l.path,l.affectedTree,i,r,s)}else{if(n.type!==Tt.LISTEN_COMPLETE)throw(0,o.Hk)("Unknown operation type: "+n.type);a=function(e,t,n,i,r){const s=t.serverCache,o=Ft(t,s.getNode(),s.isFullyInitialized()||Se(n),s.isFiltered());return yn(e,o,n,i,gn,r)}(e,t,n.path,i,s)}const c=s.getChanges();return function(e,t,n){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=zt(e);(n.length>0||!e.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(ut(zt(t)))}}(t,a,c),{viewCache:a,changes:c}}function yn(e,t,n,i,r,s){const a=t.eventCache;if(null!=un(i,n))return t;{let l,c;if(Se(n))if((0,o.vA)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Ut(t),r=ln(i,n instanceof rt?n:rt.EMPTY_NODE);l=e.filter.updateFullNode(t.eventCache.getNode(),r,s)}else{const n=an(i,Ut(t));l=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const u=ge(n);if(".priority"===u){(0,o.vA)(1===ve(n),"Can't have a priority with additional path components");const r=a.getNode();c=t.serverCache.getNode();const s=cn(i,n,r,c);l=null!=s?e.filter.updatePriority(r,s):a.getNode()}else{const o=_e(n);let h;if(a.isCompleteForChild(u)){c=t.serverCache.getNode();const e=cn(i,n,a.getNode(),c);h=null!=e?a.getNode().getImmediateChild(u).updateChild(o,e):a.getNode().getImmediateChild(u)}else h=dn(i,u,t.serverCache);l=null!=h?e.filter.updateChild(a.getNode(),u,h,o,r,s):a.getNode()}}return jt(t,l,a.isFullyInitialized()||Se(n),e.filter.filtersNodes())}}function bn(e,t,n,i,r,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(Se(n))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,i);c=u.updateFullNode(l.getNode(),e,null)}else{const e=ge(n);if(!l.isCompleteForPath(n)&&ve(n)>1)return t;const r=_e(n),s=l.getNode().getImmediateChild(e).updateChild(r,i);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,r,gn,null)}const h=Ft(t,c,l.isFullyInitialized()||Se(n),u.filtersNodes());return yn(e,h,n,r,new vn(r,h,s),a)}function wn(e,t,n,i,r,s,o){const a=t.eventCache;let l,c;const u=new vn(r,t,s);if(Se(n))c=e.filter.updateFullNode(t.eventCache.getNode(),i,o),l=jt(t,c,!0,e.filter.filtersNodes());else{const r=ge(n);if(".priority"===r)c=e.filter.updatePriority(t.eventCache.getNode(),i),l=jt(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=_e(n),c=a.getNode().getImmediateChild(r);let h;if(Se(s))h=i;else{const e=u.getCompleteChild(r);h=null!=e?".priority"===ye(s)&&e.getChild(we(s)).isEmpty()?e:e.updateChild(s,i):rt.EMPTY_NODE}if(c.equals(h))l=t;else{l=jt(t,e.filter.updateChild(a.getNode(),r,h,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function En(e,t){return e.eventCache.isCompleteForChild(t)}function Sn(e,t,n){return n.foreach((e,n)=>{t=t.updateChild(e,n)}),t}function xn(e,t,n,i,r,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=Se(n)?i:new Bt(null).setTree(n,i);const u=t.serverCache.getNode();return l.children.inorderTraversal((n,i)=>{if(u.hasChild(n)){const l=Sn(0,t.serverCache.getNode().getImmediateChild(n),i);c=bn(e,c,new pe(n),l,r,s,o,a)}}),l.children.inorderTraversal((n,i)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===i.value;if(!u.hasChild(n)&&!l){const l=Sn(0,t.serverCache.getNode().getImmediateChild(n),i);c=bn(e,c,new pe(n),l,r,s,o,a)}}),c}class kn{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,i=new pt(n.getIndex()),r=(s=n).loadsAllData()?new pt(s.getIndex()):s.hasLimit()?new gt(s):new mt(s);var s;this.processor_=function(e){return{filter:e}}(r);const o=t.serverCache,a=t.eventCache,l=i.updateFullNode(rt.EMPTY_NODE,o.getNode(),null),c=r.updateFullNode(rt.EMPTY_NODE,a.getNode(),null),u=new Rt(l,o.isFullyInitialized(),i.filtersNodes()),h=new Rt(c,a.isFullyInitialized(),r.filtersNodes());this.viewCache_=Dt(h,u),this.eventGenerator_=new Ot(this.query_)}get query(){return this.query_}}function Cn(e,t){const n=Ut(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Se(t)&&!n.getImmediateChild(ge(t)).isEmpty())?n.getChild(t):null}function Tn(e){return 0===e.eventRegistrations_.length}function In(e,t,n){const i=[];if(n){(0,o.vA)(null==t,"A cancel should cancel all event registrations.");const r=e.query._path;e.eventRegistrations_.forEach(e=>{const t=e.createCancelEvent(n,r);t&&i.push(t)})}if(t){let n=[];for(let i=0;i<e.eventRegistrations_.length;++i){const r=e.eventRegistrations_[i];if(r.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(i+1));break}}else n.push(r)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return i}function Nn(e,t,n,i){t.type===Tt.MERGE&&null!==t.source.queryId&&((0,o.vA)(Ut(e.viewCache_),"We should always have a full cache before handling merges"),(0,o.vA)(zt(e.viewCache_),"Missing event cache, even though we have a server cache"));const r=e.viewCache_,s=_n(e.processor_,r,t,n,i);var a,l;return a=e.processor_,l=s.viewCache,(0,o.vA)(l.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),(0,o.vA)(l.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed"),(0,o.vA)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Pn(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Pn(e,t,n,i){const r=i?[i]:e.eventRegistrations_;return function(e,t,n,i){const r=[],s=[];return t.forEach(t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))}),Mt(e,r,"child_removed",t,i,n),Mt(e,r,"child_added",t,i,n),Mt(e,r,"child_moved",s,i,n),Mt(e,r,"child_changed",t,i,n),Mt(e,r,"value",t,i,n),r}(e.eventGenerator_,t,n,r)}let An,Ln;class Rn{constructor(){this.views=new Map}}function On(e,t,n,i){const r=t.source.queryId;if(null!==r){const s=e.views.get(r);return(0,o.vA)(null!=s,"SyncTree gave us an op for an invalid query."),Nn(s,t,n,i)}{let r=[];for(const s of e.views.values())r=r.concat(Nn(s,t,n,i));return r}}function Mn(e,t,n,i,r){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=an(n,r?i:null),s=!1;e?s=!0:i instanceof rt?(e=ln(n,i),s=!1):(e=rt.EMPTY_NODE,s=!1);const o=Dt(new Rt(e,s,!1),new Rt(i,r,!1));return new kn(t,o)}return o}function Dn(e,t,n,i,r,s){const o=Mn(e,t,i,r,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,i=[];n.getNode().isLeafNode()||n.getNode().forEachChild(Qe,(e,t)=>{i.push(ht(e,t))});return n.isFullyInitialized()&&i.push(ut(n.getNode())),Pn(e,i,n.getNode(),t)}(o,n)}function jn(e,t,n,i){const r=t._queryIdentifier,s=[];let a=[];const l=Bn(e);if("default"===r)for(const[o,c]of e.views.entries())a=a.concat(In(c,n,i)),Tn(c)&&(e.views.delete(o),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(r);t&&(a=a.concat(In(t,n,i)),Tn(t)&&(e.views.delete(r),t.query._queryParams.loadsAllData()||s.push(t.query)))}return l&&!Bn(e)&&s.push(new((0,o.vA)(An,"Reference.ts has not been loaded"),An)(t._repo,t._path)),{removed:s,events:a}}function Fn(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function zn(e,t){let n=null;for(const i of e.views.values())n=n||Cn(i,t);return n}function Un(e,t){if(t._queryParams.loadsAllData())return Hn(e);{const n=t._queryIdentifier;return e.views.get(n)}}function Vn(e,t){return null!=Un(e,t)}function Bn(e){return null!=Hn(e)}function Hn(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let qn=1;class Wn{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Bt(null),this.pendingWriteTree_={visibleWrites:Ht.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Zn(e,t,n,i,r){return function(e,t,n,i,r){(0,o.vA)(i>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),e.allWrites.push({path:t,snap:n,writeId:i,visible:r}),r&&(e.visibleWrites=qt(e.visibleWrites,t,n)),e.lastWriteId=i}(e.pendingWriteTree_,t,n,i,r),r?ei(e,new At({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Kn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=function(e,t){for(let n=0;n<e.allWrites.length;n++){const i=e.allWrites[n];if(i.writeId===t)return i}return null}(e.pendingWriteTree_,t);if(tn(e.pendingWriteTree_,t)){let t=new Bt(null);return null!=i.snap?t=t.set(me(),!0):j(i.children,e=>{t=t.set(new pe(e),!0)}),ei(e,new Nt(i.path,t,n))}return[]}function Gn(e,t,n){return ei(e,new At({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Yn(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=t._path,o=e.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||Vn(o,t))){const l=jn(o,t,n,i);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!r){const n=-1!==c.findIndex(e=>e._queryParams.loadsAllData()),r=e.syncPointTree_.findOnPath(s,(e,t)=>Bn(t));if(n&&!r){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold((e,t,n)=>{if(t&&Bn(t)){return[Hn(t)]}{let e=[];return t&&(e=Fn(t)),j(n,(t,n)=>{e=e.concat(n)}),e}})}(t);for(let t=0;t<n.length;++t){const i=n[t],r=i.query,s=ii(e,i);e.listenProvider_.startListening(ci(r),ri(e,r),s.hashFn,s.onComplete)}}}if(!r&&c.length>0&&!i)if(n){const n=null;e.listenProvider_.stopListening(ci(t),n)}else c.forEach(t=>{const n=e.queryToTagMap.get(si(t));e.listenProvider_.stopListening(ci(t),n)})}!function(e,t){for(let n=0;n<t.length;++n){const i=t[n];if(!i._queryParams.loadsAllData()){const t=si(i),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function Qn(e,t,n,i){const r=oi(e,i);if(null!=r){const i=ai(r),s=i.path,o=i.queryId,a=xe(s,t);return li(e,s,new At(It(o),a,n))}return[]}function $n(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=t._path;let s=null,a=!1;e.syncPointTree_.foreachOnPath(r,(e,t)=>{const n=xe(e,r);s=s||zn(t,n),a=a||Bn(t)});let l,c=e.syncPointTree_.get(r);if(c?(a=a||Bn(c),s=s||zn(c,me())):(c=new Rn,e.syncPointTree_=e.syncPointTree_.set(r,c)),null!=s)l=!0;else{l=!1,s=rt.EMPTY_NODE;e.syncPointTree_.subtree(r).foreachChild((e,t)=>{const n=zn(t,me());n&&(s=s.updateImmediateChild(e,n))})}const u=Vn(c,t);if(!u&&!t._queryParams.loadsAllData()){const n=si(t);(0,o.vA)(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const i=qn++;e.queryToTagMap.set(n,i),e.tagToQueryMap.set(i,n)}let h=Dn(c,t,n,en(e.pendingWriteTree_,r),s,l);if(!u&&!a&&!i){const n=Un(c,t);h=h.concat(function(e,t,n){const i=t._path,r=ri(e,t),s=ii(e,n),a=e.listenProvider_.startListening(ci(t),r,s.hashFn,s.onComplete),l=e.syncPointTree_.subtree(i);if(r)(0,o.vA)(!Bn(l.value),"If we're adding a query, it shouldn't be shadowed");else{const t=l.fold((e,t,n)=>{if(!Se(e)&&t&&Bn(t))return[Hn(t).query];{let e=[];return t&&(e=e.concat(Fn(t).map(e=>e.query))),j(n,(t,n)=>{e=e.concat(n)}),e}});for(let n=0;n<t.length;++n){const i=t[n];e.listenProvider_.stopListening(ci(i),ri(e,i))}}return a}(e,t,n))}return h}function Jn(e,t,n){const i=e.pendingWriteTree_,r=e.syncPointTree_.findOnPath(t,(e,n)=>{const i=zn(n,xe(e,t));if(i)return i});return on(i,t,r,n,!0)}function Xn(e,t){const n=t._path;let i=null;e.syncPointTree_.foreachOnPath(n,(e,t)=>{const r=xe(e,n);i=i||zn(t,r)});let r=e.syncPointTree_.get(n);r?i=i||zn(r,me()):(r=new Rn,e.syncPointTree_=e.syncPointTree_.set(n,r));const s=null!=i,o=s?new Rt(i,!0,!1):null;return function(e){return zt(e.viewCache_)}(Mn(r,t,en(e.pendingWriteTree_,t._path),s?o.getNode():rt.EMPTY_NODE,s))}function ei(e,t){return ti(t,e.syncPointTree_,null,en(e.pendingWriteTree_,me()))}function ti(e,t,n,i){if(Se(e.path))return ni(e,t,n,i);{const r=t.get(me());null==n&&null!=r&&(n=zn(r,me()));let s=[];const o=ge(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=fn(i,o);s=s.concat(ti(a,l,e,t))}return r&&(s=s.concat(On(r,e,i,n))),s}}function ni(e,t,n,i){const r=t.get(me());null==n&&null!=r&&(n=zn(r,me()));let s=[];return t.children.inorderTraversal((t,r)=>{const o=n?n.getImmediateChild(t):null,a=fn(i,t),l=e.operationForChild(t);l&&(s=s.concat(ni(l,r,o,a)))}),r&&(s=s.concat(On(r,e,i,n))),s}function ii(e,t){const n=t.query,i=ri(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||rt.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return i?function(e,t,n){const i=oi(e,n);if(i){const n=ai(i),r=n.path,s=n.queryId,o=xe(r,t);return li(e,r,new Pt(It(s),o))}return[]}(e,n._path,i):function(e,t){return ei(e,new Pt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const i=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const i=new Error(e+" at "+t._path.toString()+": "+n);return i.code=e.toUpperCase(),i}(t,n);return Yn(e,n,null,i)}}}}function ri(e,t){const n=si(t);return e.queryToTagMap.get(n)}function si(e){return e._path.toString()+"$"+e._queryIdentifier}function oi(e,t){return e.tagToQueryMap.get(t)}function ai(e){const t=e.indexOf("$");return(0,o.vA)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new pe(e.substr(0,t))}}function li(e,t,n){const i=e.syncPointTree_.get(t);(0,o.vA)(i,"Missing sync point for query tag that we're tracking");return On(i,n,en(e.pendingWriteTree_,t),null)}function ci(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new((0,o.vA)(Ln,"Reference.ts has not been loaded"),Ln)(e._repo,e._path):e}class ui{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new ui(t)}node(){return this.node_}}class hi{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Ee(this.path_,e);return new hi(this.syncTree_,t)}node(){return Jn(this.syncTree_,this.path_)}}const di=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},fi=function(e,t,n){return e&&"object"===typeof e?((0,o.vA)(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?pi(e[".sv"],t,n):"object"===typeof e[".sv"]?mi(e[".sv"],t):void(0,o.vA)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},pi=function(e,t,n){if("timestamp"===e)return n.timestamp;(0,o.vA)(!1,"Unexpected server value: "+e)},mi=function(e,t,n){e.hasOwnProperty("increment")||(0,o.vA)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const i=e.increment;"number"!==typeof i&&(0,o.vA)(!1,"Unexpected increment value: "+i);const r=t.node();if((0,o.vA)(null!==r&&"undefined"!==typeof r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const s=r.getValue();return"number"!==typeof s?i:s+i},gi=function(e,t,n,i){return _i(t,new hi(n,e),i)},vi=function(e,t,n){return _i(e,new ui(t),n)};function _i(e,t,n){const i=e.getPriority().val(),r=fi(i,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const i=e,s=fi(i.getValue(),t,n);return s!==i.getValue()||r!==i.getPriority().val()?new Ye(s,at(r)):e}{const i=e;return s=i,r!==i.getPriority().val()&&(s=s.updatePriority(new Ye(r))),i.forEachChild(Qe,(e,i)=>{const r=_i(i,t.getImmediateChild(e),n);r!==i&&(s=s.updateImmediateChild(e,r))}),s}}class yi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function bi(e,t){let n=t instanceof pe?t:new pe(t),i=e,r=ge(n);for(;null!==r;){const e=(0,o.yw)(i.node.children,r)||{children:{},childCount:0};i=new yi(r,i,e),n=_e(n),r=ge(n)}return i}function wi(e){return e.node.value}function Ei(e,t){e.node.value=t,Ti(e)}function Si(e){return e.node.childCount>0}function xi(e,t){j(e.node.children,(n,i)=>{t(new yi(n,e,i))})}function ki(e,t,n,i){n&&!i&&t(e),xi(e,e=>{ki(e,t,!0,i)}),n&&i&&t(e)}function Ci(e){return new pe(null===e.parent?e.name:Ci(e.parent)+"/"+e.name)}function Ti(e){null!==e.parent&&function(e,t,n){const i=function(e){return void 0===wi(e)&&!Si(e)}(n),r=(0,o.gR)(e.node.children,t);i&&r?(delete e.node.children[t],e.node.childCount--,Ti(e)):i||r||(e.node.children[t]=n.node,e.node.childCount++,Ti(e))}(e.parent,e.name,e)}const Ii=/[\[\].#$\/\u0000-\u001F\u007F]/,Ni=/[\[\].#$\u0000-\u001F\u007F]/,Pi=10485760,Ai=function(e){return"string"===typeof e&&0!==e.length&&!Ii.test(e)},Li=function(e){return"string"===typeof e&&0!==e.length&&!Ni.test(e)},Ri=function(e,t,n,i){i&&void 0===t||Oi((0,o.dI)(e,"value"),t,n)},Oi=function(e,t,n){const i=n instanceof pe?new Te(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Ne(i));if("function"===typeof t)throw new Error(e+"contains a function "+Ne(i)+" with contents = "+t.toString());if(N(t))throw new Error(e+"contains "+t.toString()+" "+Ne(i));if("string"===typeof t&&t.length>Pi/3&&(0,o.OE)(t)>Pi)throw new Error(e+"contains a string greater than "+Pi+" utf8 bytes "+Ne(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,r=!1;if(j(t,(t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(r=!0,!Ai(t)))throw new Error(e+" contains an invalid key ("+t+") "+Ne(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=(0,o.OE)(t),Ie(e)}(i,t),Oi(e,s,i),function(e){const t=e.parts_.pop();e.byteLength_-=(0,o.OE)(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)}),n&&r)throw new Error(e+' contains ".value" child '+Ne(i)+" in addition to actual children.")}},Mi=function(e,t,n,i){if((!i||void 0!==n)&&!Li(n))throw new Error((0,o.dI)(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Di=function(e,t,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Mi(e,t,n,i)},ji=function(e,t){if(".info"===ge(t))throw new Error(e+" failed = Can't modify data under /.info/")},Fi=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Ai(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Li(e)}(n))throw new Error((0,o.dI)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class zi{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ui(e,t){let n=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null===n||ke(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(r)}n&&e.eventLists_.push(n)}function Vi(e,t,n){Ui(e,n),Hi(e,e=>ke(e,t))}function Bi(e,t,n){Ui(e,n),Hi(e,e=>Ce(e,t)||Ce(t,e))}function Hi(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){const r=e.eventLists_[i];if(r){t(r.path)?(qi(e.eventLists_[i]),e.eventLists_[i]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function qi(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const i=n.getEventRunner();w&&x("event: "+n.toString()),V(i)}}}const Wi="repo_interrupt",Zi=25;class Ki{constructor(e,t,n,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new zi,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Et(),this.transactionQueueTree_=new yi,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Gi(e,t,n){if(e.stats_=ne(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new bt(e.repoInfo_,(t,n,i,r)=>{$i(e,t,n,i,r)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>Ji(e,!0),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,o.As)(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}e.persistentConnection_=new Le(e.repoInfo_,t,(t,n,i,r)=>{$i(e,t,n,i,r)},t=>{Ji(e,t)},t=>{!function(e,t){j(t,(t,n)=>{Xi(e,t,n)})}(e,t)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(t=>{e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(t=>{e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=function(e,t){const n=e.toString();return te[n]||(te[n]=t()),te[n]}(e.repoInfo_,()=>new Ct(e.stats_,e.server_)),e.infoData_=new wt,e.infoSyncTree_=new Wn({startListening:(t,n,i,r)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=Gn(e.infoSyncTree_,t._path,o),setTimeout(()=>{r("ok")},0)),s},stopListening:()=>{}}),Xi(e,"connected",!1),e.serverSyncTree_=new Wn({startListening:(t,n,i,r)=>(e.server_.listen(t,i,n,(n,i)=>{const s=r(n,i);Bi(e.eventQueue_,t._path,s)}),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function Yi(e){const t=e.infoData_.getNode(new pe(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Qi(e){return di({timestamp:Yi(e)})}function $i(e,t,n,i,r){e.dataUpdateCount++;const s=new pe(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let a=[];if(r)if(i){const t=(0,o.kH)(n,e=>at(e));a=function(e,t,n,i){const r=oi(e,i);if(r){const i=ai(r),s=i.path,o=i.queryId,a=xe(s,t),l=Bt.fromObject(n);return li(e,s,new Lt(It(o),a,l))}return[]}(e.serverSyncTree_,s,t,r)}else{const t=at(n);a=Qn(e.serverSyncTree_,s,t,r)}else if(i){const t=(0,o.kH)(n,e=>at(e));a=function(e,t,n){const i=Bt.fromObject(n);return ei(e,new Lt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(e.serverSyncTree_,s,t)}else{const t=at(n);a=Gn(e.serverSyncTree_,s,t)}let l=s;a.length>0&&(l=lr(e,s)),Bi(e.eventQueue_,l,a)}function Ji(e,t){Xi(e,"connected",t),!1===t&&function(e){rr(e,"onDisconnectEvents");const t=Qi(e),n=Et();xt(e.onDisconnect_,me(),(i,r)=>{const s=gi(i,r,e.serverSyncTree_,t);St(n,i,s)});let i=[];xt(n,me(),(t,n)=>{i=i.concat(Gn(e.serverSyncTree_,t,n));const r=fr(e,t);lr(e,r)}),e.onDisconnect_=Et(),Bi(e.eventQueue_,me(),i)}(e)}function Xi(e,t,n){const i=new pe("/.info/"+t),r=at(n);e.infoData_.updateSnapshot(i,r);const s=Gn(e.infoSyncTree_,i,r);Bi(e.eventQueue_,i,s)}function er(e){return e.nextWriteId_++}function tr(e,t,n,i,r){rr(e,"set",{path:t.toString(),value:n,priority:i});const s=Qi(e),o=at(n,i),a=Jn(e.serverSyncTree_,t),l=vi(o,a,s),c=er(e),u=Zn(e.serverSyncTree_,t,l,c,!0);Ui(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),(n,i)=>{const s="ok"===n;s||I("set at "+t+" failed: "+n);const o=Kn(e.serverSyncTree_,c,!s);Bi(e.eventQueue_,t,o),sr(e,r,n,i)});const h=fr(e,t);lr(e,h),Bi(e.eventQueue_,h,[])}function nr(e,t,n){let i;i=".info"===ge(t._path)?Yn(e.infoSyncTree_,t,n):Yn(e.serverSyncTree_,t,n),Vi(e.eventQueue_,t._path,i)}function ir(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Wi)}function rr(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];x(t,...i)}function sr(e,t,n,i){t&&V(()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let r=e;i&&(r+=": "+i);const s=new Error(r);s.code=e,t(s)}})}function or(e,t,n){return Jn(e.serverSyncTree_,t,n)||rt.EMPTY_NODE}function ar(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||dr(e,t),wi(t)){const n=ur(e,t);(0,o.vA)(n.length>0,"Sending zero length transaction queue");n.every(e=>0===e.status)&&function(e,t,n){const i=n.map(e=>e.currentWriteId),r=or(e,t,i);let s=r;const a=r.hash();for(let u=0;u<n.length;u++){const e=n[u];(0,o.vA)(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const i=xe(t,e.path);s=s.updateChild(i,e.currentOutputSnapshotRaw)}const l=s.val(!0),c=t;e.server_.put(c.toString(),l,i=>{rr(e,"transaction put response",{path:c.toString(),status:i});let r=[];if("ok"===i){const i=[];for(let t=0;t<n.length;t++)n[t].status=2,r=r.concat(Kn(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&i.push(()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)),n[t].unwatcher();dr(e,bi(e.transactionQueueTree_,t)),ar(e,e.transactionQueueTree_),Bi(e.eventQueue_,t,r);for(let e=0;e<i.length;e++)V(i[e])}else{if("datastale"===i)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{I("transaction at "+c.toString()+" failed: "+i);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=i}lr(e,t)}},a)}(e,Ci(t),n)}else Si(t)&&xi(t,t=>{ar(e,t)})}function lr(e,t){const n=cr(e,t),i=Ci(n);return function(e,t,n){if(0===t.length)return;const i=[];let r=[];const s=t.filter(e=>0===e.status),a=s.map(e=>e.currentWriteId);for(let l=0;l<t.length;l++){const s=t[l],c=xe(n,s.path);let u,h=!1;if((0,o.vA)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)h=!0,u=s.abortReason,r=r.concat(Kn(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=Zi)h=!0,u="maxretry",r=r.concat(Kn(e.serverSyncTree_,s.currentWriteId,!0));else{const n=or(e,s.path,a);s.currentInputSnapshot=n;const i=t[l].update(n.val());if(void 0!==i){Oi("transaction failed: Data returned ",i,s.path);let t=at(i);"object"===typeof i&&null!=i&&(0,o.gR)(i,".priority")||(t=t.updatePriority(n.getPriority()));const l=s.currentWriteId,c=Qi(e),u=vi(t,n,c);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=u,s.currentWriteId=er(e),a.splice(a.indexOf(l),1),r=r.concat(Zn(e.serverSyncTree_,s.path,u,s.currentWriteId,s.applyLocally)),r=r.concat(Kn(e.serverSyncTree_,l,!0))}else h=!0,u="nodata",r=r.concat(Kn(e.serverSyncTree_,s.currentWriteId,!0))}Bi(e.eventQueue_,n,r),r=[],h&&(t[l].status=2,function(e){setTimeout(e,Math.floor(0))}(t[l].unwatcher),t[l].onComplete&&("nodata"===u?i.push(()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot)):i.push(()=>t[l].onComplete(new Error(u),!1,null))))}dr(e,e.transactionQueueTree_);for(let o=0;o<i.length;o++)V(i[o]);ar(e,e.transactionQueueTree_)}(e,ur(e,n),i),i}function cr(e,t){let n,i=e.transactionQueueTree_;for(n=ge(t);null!==n&&void 0===wi(i);)i=bi(i,n),n=ge(t=_e(t));return i}function ur(e,t){const n=[];return hr(e,t,n),n.sort((e,t)=>e.order-t.order),n}function hr(e,t,n){const i=wi(t);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);xi(t,t=>{hr(e,t,n)})}function dr(e,t){const n=wi(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,Ei(t,n.length>0?n:void 0)}xi(t,t=>{dr(e,t)})}function fr(e,t){const n=Ci(cr(e,t)),i=bi(e.transactionQueueTree_,t);return function(e,t,n){let i=n?e:e.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,t=>{pr(e,t)}),pr(e,i),ki(i,t=>{pr(e,t)}),n}function pr(e,t){const n=wi(t);if(n){const i=[];let r=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?((0,o.vA)(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):((0,o.vA)(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),r=r.concat(Kn(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&i.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Ei(t,void 0):n.length=s+1,Bi(e.eventQueue_,Ci(t),r);for(let e=0;e<i.length;e++)V(i[e])}}const mr=function(e,t){const n=gr(e),i=n.namespace;"firebase.com"===n.domain&&T(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),i&&"undefined"!==i||"localhost"===n.domain||T("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&I("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const r="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new $(n.host,n.secure,i,r,t,"",i!==n.subdomain),path:new pe(n.pathString)}},gr=function(e){let t="",n="",i="",r="",s="",o=!0,a="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(r=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(i){}t+="/"+e}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const i=n.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):I("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");i=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=i}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}},vr="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",_r=function(){let e=0;const t=[];return function(n){const i=n===e;let r;e=n;const s=new Array(8);for(r=7;r>=0;r--)s[r]=vr.charAt(n%64),n=Math.floor(n/64);(0,o.vA)(0===n,"Cannot push at time == 0");let a=s.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)a+=vr.charAt(t[r]);return(0,o.vA)(20===a.length,"nextPushId: Length should be 20."),a}}();class yr{constructor(e,t,n,i){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,o.As)(this.snapshot.exportVal())}}class br{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class wr{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,o.vA)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Er{constructor(e,t,n,i){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=i}get key(){return Se(this._path)?null:ye(this._path)}get ref(){return new Sr(this._repo,this._path)}get _queryIdentifier(){const e=yt(this._queryParams),t=M(e);return"{}"===t?"default":t}get _queryObject(){return yt(this._queryParams)}isEqual(e){if(!((e=(0,o.Ku)(e))instanceof Er))return!1;const t=this._repo===e._repo,n=ke(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&n&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class Sr extends Er{constructor(e,t){super(e,t,new vt,!1)}get parent(){const e=we(this._path);return null===e?null:new Sr(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class xr{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new pe(e),n=Cr(this.ref,e);return new xr(this._node.getChild(t),n,Qe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,(t,n)=>e(new xr(n,Cr(this.ref,t),Qe)))}hasChild(e){const t=new pe(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function kr(e,t){return(e=(0,o.Ku)(e))._checkNotDeleted("ref"),void 0!==t?Cr(e._root,t):e._root}function Cr(e,t){return null===ge((e=(0,o.Ku)(e))._path)?Di("child","path",t,!1):Mi("child","path",t,!1),new Sr(e._repo,Ee(e._path,t))}function Tr(e,t){e=(0,o.Ku)(e),ji("push",e._path),Ri("push",t,e._path,!0);const n=Yi(e._repo),i=_r(n),r=Cr(e,i),s=Cr(e,i);let a;return a=null!=t?Ir(s,t).then(()=>s):Promise.resolve(s),r.then=a.then.bind(a),r.catch=a.then.bind(a,void 0),r}function Ir(e,t){e=(0,o.Ku)(e),ji("set",e._path),Ri("set",t,e._path,!1);const n=new o.cY;return tr(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function Nr(e){e=(0,o.Ku)(e);const t=new wr(()=>{}),n=new Pr(t);return function(e,t,n){const i=Xn(e.serverSyncTree_,t);return null!=i?Promise.resolve(i):e.server_.get(t).then(i=>{const r=at(i).withIndex(t._queryParams.getIndex());let s;if($n(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())s=Gn(e.serverSyncTree_,t._path,r);else{const n=ri(e.serverSyncTree_,t);s=Qn(e.serverSyncTree_,t._path,r,n)}return Bi(e.eventQueue_,t._path,s),Yn(e.serverSyncTree_,t,n,null,!0),r},n=>(rr(e,"get for query "+(0,o.As)(t)+" failed: "+n),Promise.reject(new Error(n))))}(e._repo,e,n).then(t=>new xr(t,new Sr(e._repo,e._path),e._queryParams.getIndex()))}class Pr{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new yr("value",this,new xr(e.snapshotNode,new Sr(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new br(this,e,t):null}matches(e){return e instanceof Pr&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Ar{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new br(this,e,t):null}createEvent(e,t){(0,o.vA)(null!=e.childName,"Child events should have a childName.");const n=Cr(new Sr(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new yr(e.type,this,new xr(e.snapshotNode,n,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Ar&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function Lr(e,t,n,i,r){let s;if("object"===typeof i&&(s=void 0,r=i),"function"===typeof i&&(s=i),r&&r.onlyOnce){const t=n,i=(n,i)=>{nr(e._repo,e,a),t(n,i)};i.userCallback=n.userCallback,i.context=n.context,n=i}const o=new wr(n,s||void 0),a="value"===t?new Pr(o):new Ar(t,o);return function(e,t,n){let i;i=".info"===ge(t._path)?$n(e.infoSyncTree_,t,n):$n(e.serverSyncTree_,t,n),Vi(e.eventQueue_,t._path,i)}(e._repo,e,a),()=>nr(e._repo,e,a)}function Rr(e,t,n,i){return Lr(e,"value",t,n,i)}function Or(e,t,n){let i=null;const r=n?new wr(n):null;"value"===t?i=new Pr(r):t&&(i=new Ar(t,r)),nr(e._repo,e,i)}!function(e){(0,o.vA)(!An,"__referenceConstructor has already been defined"),An=e}(Sr),function(e){(0,o.vA)(!Ln,"__referenceConstructor has already been defined"),Ln=e}(Sr);const Mr={};let Dr=!1;function jr(e,t,n,i,r){let s=i||e.options.databaseURL;void 0===s&&(e.options.projectId||T("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),x("Using default host for project ",e.options.projectId),s="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let o,a,l=mr(s,r),c=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"/ConnectUs",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s="http://".concat(a,"?ns=").concat(c.namespace),l=mr(s,r),c=l.repoInfo):o=!l.repoInfo.secure;const u=r&&o?new W(W.OWNER):new q(e.name,e.options,t);Fi("Invalid Firebase Database URL",l),Se(l.path)||T("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,i){let r=Mr[t.name];r||(r={},Mr[t.name]=r);let s=r[e.toURLString()];s&&T("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new Ki(e,Dr,n,i),r[e.toURLString()]=s,s}(c,e,u,new H(e,n));return new Fr(h,e)}class Fr{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Gi(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Sr(this._repo,me())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=Mr[t];n&&n[e.key]===e||T("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),ir(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&T("Cannot call "+e+" on a deleted database.")}}function zr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)(),t=arguments.length>1?arguments[1]:void 0;const n=(0,r.j6)(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=(0,o.yU)("database");e&&function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=(0,o.Ku)(e),e._checkNotDeleted("useEmulator");const r="".concat(t,":").concat(n),s=e._repoInternal;if(e._instanceStarted){if(r===e._repoInternal.repoInfo_.host&&(0,o.bD)(i,s.repoInfo_.emulatorOptions))return;T("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let a;if(s.repoInfo_.nodeAdmin)i.mockUserToken&&T('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new W(W.OWNER);else if(i.mockUserToken){const t="string"===typeof i.mockUserToken?i.mockUserToken:(0,o.Fy)(i.mockUserToken,e.app.options.projectId);a=new W(t)}(0,o.zJ)(t)&&((0,o.gE)(t),(0,o.P1)("Database",!0));!function(e,t,n,i){const r=t.lastIndexOf(":"),s=t.substring(0,r),a=(0,o.zJ)(s);e.repoInfo_=new $(t,a,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),i&&(e.authTokenProvider_=i)}(s,r,i,a)}(n,...e)}return n}Le.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Le.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var Ur;h(r.MF),(0,r.om)(new s.uA("database",(e,t)=>{let{instanceIdentifier:n}=t;return jr(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)},"PUBLIC").setMultipleInstances(!0)),(0,r.KO)(l,c,Ur),(0,r.KO)(l,c,"esm2020")},853:(e,t,n)=>{"use strict";e.exports=n(896)},896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<s(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,o=r>>>1;i<o;){var a=2*(i+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<r&&0>s(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[a]=n,i=a);else{if(!(c<r&&0>s(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v=!1,_="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function E(e){if(g=!1,w(e),!m)if(null!==i(c))m=!0,x||(x=!0,S());else{var t=i(u);null!==t&&L(E,t.startTime-e)}}var S,x=!1,k=-1,C=5,T=-1;function I(){return!!v||!(t.unstable_now()-T<C)}function N(){if(v=!1,x){var e=t.unstable_now();T=e;var n=!0;try{e:{m=!1,g&&(g=!1,y(k),k=-1),p=!0;var s=f;try{t:{for(w(e),d=i(c);null!==d&&!(d.expirationTime>e&&I());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){d.callback=a,w(e),n=!0;break t}d===i(c)&&r(c),w(e)}else r(c);d=i(c)}if(null!==d)n=!0;else{var l=i(u);null!==l&&L(E,l.startTime-e),n=!1}}break e}finally{d=null,f=s,p=!1}n=void 0}}finally{n?S():x=!1}}}if("function"===typeof b)S=function(){b(N)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,A=P.port2;P.port1.onmessage=N,S=function(){A.postMessage(null)}}else S=function(){_(N,0)};function L(e,n){k=_(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,r,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:r,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===i(c)&&e===i(u)&&(g?(y(k),k=-1):g=!0,L(E,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,x||(x=!0,S()))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},965:(e,t,n)=>{"use strict";n.d(t,{$b:()=>r,Vy:()=>c});const i=[];var r;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(r||(r={}));const s={debug:r.DEBUG,verbose:r.VERBOSE,info:r.INFO,warn:r.WARN,error:r.ERROR,silent:r.SILENT},o=r.INFO,a={[r.DEBUG]:"log",[r.VERBOSE]:"log",[r.INFO]:"info",[r.WARN]:"warn",[r.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),i=a[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var r=arguments.length,s=new Array(r>2?r-2:0),o=2;o<r;o++)s[o-2]=arguments[o];console[i]("[".concat(n,"]  ").concat(e.name,":"),...s)};class c{constructor(e){this.name=e,this._logLevel=o,this._logHandler=l,this._userLogHandler=null,i.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in r))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,r.DEBUG,...t),this._logHandler(this,r.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,r.VERBOSE,...t),this._logHandler(this,r.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,r.INFO,...t),this._logHandler(this,r.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,r.WARN,...t),this._logHandler(this,r.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,r.ERROR,...t),this._logHandler(this,r.ERROR,...t)}}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,n),s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,i)=>(n.f[i](e,t),t),[])),n.u=e=>"static/js/"+e+".573522ed.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="location-tracker:";n.l=(i,r,s,o)=>{if(e[i])e[i].push(r);else{var a,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==t+s){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=i),e[i]=[r];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var r=e[i];if(delete e[i],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach(e=>e(n)),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.p="/ConnectUs/",(()=>{var e={792:0};n.f.j=(t,i)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var s=new Promise((n,i)=>r=e[t]=[n,i]);i.push(r[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,i=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var s=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,r[1](a)}},"chunk-"+t,t)}};var t=(t,i)=>{var r,s,[o,a,l]=i,c=0;if(o.some(t=>0!==e[t])){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(l)l(n)}for(t&&t(i);c<o.length;c++)s=o[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},i=self.webpackChunklocation_tracker=self.webpackChunklocation_tracker||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),(()=>{"use strict";var e=n(43),t=n(391);function i(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var r=n(555);const s=["sri"],o=["page"],a=["page","matches"],l=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],c=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],u=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var h="popstate";function d(){return y(function(e,t){let{pathname:n,search:i,hash:r}=e.location;return g("",{pathname:n,search:i,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:v(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function f(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function p(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function m(e,t){return{usr:e.state,key:e.key,idx:t}}function g(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0;return(0,r.A)((0,r.A)({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?_(t):t),{},{state:n,key:t&&t.key||i||Math.random().toString(36).substring(2,10)})}function v(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function _(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function y(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:s=document.defaultView,v5Compat:o=!1}=i,a=s.history,l="POP",c=null,u=d();function d(){return(a.state||{idx:null}).idx}function f(){l="POP";let e=d(),t=null==e?null:e-u;u=e,c&&c({action:l,location:v.location,delta:t})}function p(e){return b(e)}null==u&&(u=0,a.replaceState((0,r.A)((0,r.A)({},a.state),{},{idx:u}),""));let v={get action(){return l},get location(){return e(s,a)},listen(e){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(h,f),c=e,()=>{s.removeEventListener(h,f),c=null}},createHref:e=>t(s,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l="PUSH";let i=g(v.location,e,t);n&&n(i,e),u=d()+1;let r=m(i,u),h=v.createHref(i);try{a.pushState(r,"",h)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;s.location.assign(h)}o&&c&&c({action:l,location:v.location,delta:1})},replace:function(e,t){l="REPLACE";let i=g(v.location,e,t);n&&n(i,e),u=d();let r=m(i,u),s=v.createHref(i);a.replaceState(r,"",s),o&&c&&c({action:l,location:v.location,delta:0})},go:e=>a.go(e)};return v}function b(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),f(n,"No window.location.(origin|href) available to create URL");let i="string"===typeof e?e:v(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=n+i),new URL(i,n)}new WeakMap;function w(e,t){return E(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function E(e,t,n,i){let r=j(("string"===typeof t?_(t):t).pathname||"/",n);if(null==r)return null;let s=S(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=D(r);o=R(s[a],e,i)}return o}function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=function(e,s){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,a=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(i)&&o)return;f(l.relativePath.startsWith(i),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(i,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(i.length)}let c=B([i,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(f(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),S(e.children,t,u,c,o)),(null!=e.path||e.index)&&t.push({path:c,score:L(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let i of x(e.path))s(e,t,!0,i);else s(e,t)}),t}function x(e){let t=e.split("/");if(0===t.length)return[];let[n,...i]=t,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===i.length)return r?[s,""]:[s];let o=x(i.join("/")),a=[];return a.push(...o.map(e=>""===e?s:[s,e].join("/"))),r&&a.push(...o),a.map(t=>e.startsWith("/")&&""===t?"/":t)}var k=/^:[\w-]+$/,C=3,T=2,I=1,N=10,P=-2,A=e=>"*"===e;function L(e,t){let n=e.split("/"),i=n.length;return n.some(A)&&(i+=P),t&&(i+=T),n.filter(e=>!A(e)).reduce((e,t)=>e+(k.test(t)?C:""===t?I:N),i)}function R(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:i}=e,r={},s="/",o=[];for(let a=0;a<i.length;++a){let e=i[a],l=a===i.length-1,c="/"===s?t:t.slice(s.length)||"/",u=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!i[i.length-1].route.index&&(u=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(r,u.params),o.push({params:r,pathname:B([s,u.pathname]),pathnameBase:H(B([s,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(s=B([s,u.pathnameBase]))}return o}function O(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=M(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((e,t,n)=>{let{paramName:i,isOptional:r}=t;if("*"===i){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[i]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:o,pattern:e}}function M(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];p("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(i.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(i.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),i]}function D(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return p(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function j(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}function F(e,t,n,i){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(i),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function z(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function U(e){let t=z(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function V(e,t,n){let i,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?i=_(e):(i=(0,r.A)({},e),f(!i.pathname||!i.pathname.includes("?"),F("?","pathname","search",i)),f(!i.pathname||!i.pathname.includes("#"),F("#","pathname","hash",i)),f(!i.search||!i.search.includes("#"),F("#","search","hash",i)));let o,a=""===e||""===i.pathname,l=a?"/":i.pathname;if(null==l)o=n;else{let e=t.length-1;if(!s&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:i="",hash:r=""}="string"===typeof e?_(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:q(i),hash:W(r)}}(i,o),u=l&&"/"!==l&&l.endsWith("/"),h=(a||"."===l)&&n.endsWith("/");return c.pathname.endsWith("/")||!u&&!h||(c.pathname+="/"),c}var B=e=>e.join("/").replace(/\/\/+/g,"/"),H=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),q=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",W=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function Z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var K=["POST","PUT","PATCH","DELETE"],G=(new Set(K),["GET",...K]);new Set(G),Symbol("ResetLoaderData");var Y=e.createContext(null);Y.displayName="DataRouter";var Q=e.createContext(null);Q.displayName="DataRouterState";var $=e.createContext(!1);var J=e.createContext({isTransitioning:!1});J.displayName="ViewTransition";var X=e.createContext(new Map);X.displayName="Fetchers";var ee=e.createContext(null);ee.displayName="Await";var te=e.createContext(null);te.displayName="Navigation";var ne=e.createContext(null);ne.displayName="Location";var ie=e.createContext({outlet:null,matches:[],isDataRoute:!1});ie.displayName="Route";var re=e.createContext(null);re.displayName="RouteError";function se(){return null!=e.useContext(ne)}function oe(){return f(se(),"useLocation() may be used only in the context of a <Router> component."),e.useContext(ne).location}var ae="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function le(t){e.useContext(te).static||e.useLayoutEffect(t)}function ce(){let{isDataRoute:t}=e.useContext(ie);return t?function(){let{router:t}=_e("useNavigate"),n=be("useNavigate"),i=e.useRef(!1);le(()=>{i.current=!0});let s=e.useCallback(async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p(i.current,ae),i.current&&("number"===typeof e?t.navigate(e):await t.navigate(e,(0,r.A)({fromRouteId:n},s)))},[t,n]);return s}():function(){f(se(),"useNavigate() may be used only in the context of a <Router> component.");let t=e.useContext(Y),{basename:n,navigator:i}=e.useContext(te),{matches:r}=e.useContext(ie),{pathname:s}=oe(),o=JSON.stringify(U(r)),a=e.useRef(!1);le(()=>{a.current=!0});let l=e.useCallback(function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(p(a.current,ae),!a.current)return;if("number"===typeof e)return void i.go(e);let l=V(e,JSON.parse(o),s,"path"===r.relative);null==t&&"/"!==n&&(l.pathname="/"===l.pathname?n:B([n,l.pathname])),(r.replace?i.replace:i.push)(l,r.state,r)},[n,i,o,s,t]);return l}()}e.createContext(null);function ue(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:i}=e.useContext(ie),{pathname:r}=oe(),s=JSON.stringify(U(i));return e.useMemo(()=>V(t,JSON.parse(s),r,"path"===n),[t,s,r,n])}function he(t,n,i,s,o){f(se(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=e.useContext(te),{matches:l}=e.useContext(ie),c=l[l.length-1],u=c?c.params:{},h=c?c.pathname:"/",d=c?c.pathnameBase:"/",m=c&&c.route;{let e=m&&m.path||"";Se(h,!m||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(h,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let g,v=oe();if(n){var y;let e="string"===typeof n?_(n):n;f("/"===d||(null===(y=e.pathname)||void 0===y?void 0:y.startsWith(d)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(d,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),g=e}else g=v;let b=g.pathname||"/",E=b;if("/"!==d){let e=d.replace(/^\//,"").split("/");E="/"+b.replace(/^\//,"").split("/").slice(e.length).join("/")}let S=w(t,{pathname:E});p(m||null!=S,'No routes matched location "'.concat(g.pathname).concat(g.search).concat(g.hash,'" ')),p(null==S||void 0!==S[S.length-1].route.element||void 0!==S[S.length-1].route.Component||void 0!==S[S.length-1].route.lazy,'Matched leaf route at location "'.concat(g.pathname).concat(g.search).concat(g.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let x=ge(S&&S.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:B([d,a.encodeLocation?a.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:B([d,a.encodeLocation?a.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),l,i,s,o);return n&&x?e.createElement(ne.Provider,{value:{location:(0,r.A)({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:"POP"}},x):x}function de(){let t=we(),n=Z(t)?"".concat(t.status," ").concat(t.statusText):t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=e.createElement(e.Fragment,null,e.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),e.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",e.createElement("code",{style:o},"ErrorBoundary")," or"," ",e.createElement("code",{style:o},"errorElement")," prop on your route.")),e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),i?e.createElement("pre",{style:s},i):null,a)}var fe=e.createElement(de,null),pe=class extends e.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?e.createElement(ie.Provider,{value:this.props.routeContext},e.createElement(re.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function me(t){let{routeContext:n,match:i,children:r}=t,s=e.useContext(Y);return s&&s.static&&s.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=i.route.id),e.createElement(ie.Provider,{value:n},r)}function ge(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==t){if(!i)return null;if(i.errors)t=i.matches;else{if(0!==n.length||i.initialized||!(i.matches.length>0))return null;t=i.matches}}let s=t,o=null===i||void 0===i?void 0:i.errors;if(null!=o){let e=s.findIndex(e=>e.route.id&&void 0!==(null===o||void 0===o?void 0:o[e.route.id]));f(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(o).join(","))),s=s.slice(0,Math.min(s.length,e+1))}let a=!1,l=-1;if(i)for(let e=0;e<s.length;e++){let t=s[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(l=e),t.route.id){let{loaderData:e,errors:n}=i,r=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!n||void 0===n[t.route.id]);if(t.route.lazy||r){a=!0,s=l>=0?s.slice(0,l+1):[s[0]];break}}}return s.reduceRight((t,c,u)=>{let h,d=!1,f=null,p=null;i&&(h=o&&c.route.id?o[c.route.id]:void 0,f=c.route.errorElement||fe,a&&(l<0&&0===u?(Se("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):l===u&&(d=!0,p=c.route.hydrateFallbackElement||null)));let m=n.concat(s.slice(0,u+1)),g=()=>{let n;return n=h?f:d?p:c.route.Component?e.createElement(c.route.Component,null):c.route.element?c.route.element:t,e.createElement(me,{match:c,routeContext:{outlet:t,matches:m,isDataRoute:null!=i},children:n})};return i&&(c.route.ErrorBoundary||c.route.errorElement||0===u)?e.createElement(pe,{location:i.location,revalidation:i.revalidation,component:f,error:h,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0},unstable_onError:r}):g()},null)}function ve(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function _e(t){let n=e.useContext(Y);return f(n,ve(t)),n}function ye(t){let n=e.useContext(Q);return f(n,ve(t)),n}function be(t){let n=function(t){let n=e.useContext(ie);return f(n,ve(t)),n}(t),i=n.matches[n.matches.length-1];return f(i.route.id,"".concat(t,' can only be used on routes that contain a unique "id"')),i.route.id}function we(){var t;let n=e.useContext(re),i=ye("useRouteError"),r=be("useRouteError");return void 0!==n?n:null===(t=i.errors)||void 0===t?void 0:t[r]}var Ee={};function Se(e,t,n){t||Ee[e]||(Ee[e]=!0,p(!1,n))}var xe={};function ke(e,t){e||xe[t]||(xe[t]=!0,console.warn(t))}e.memo(function(e){let{routes:t,future:n,state:i,unstable_onError:r}=e;return he(t,void 0,i,r,n)});function Ce(t){let{to:n,replace:i,state:r,relative:s}=t;f(se(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=e.useContext(te);p(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=e.useContext(ie),{pathname:l}=oe(),c=ce(),u=V(n,U(a),l,"path"===s),h=JSON.stringify(u);return e.useEffect(()=>{c(JSON.parse(h),{replace:i,state:r,relative:s})},[c,h,s,i,r]),null}function Te(e){f(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ie(t){let{basename:n="/",children:i=null,location:r,navigationType:s="POP",navigator:o,static:a=!1}=t;f(!se(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),c=e.useMemo(()=>({basename:l,navigator:o,static:a,future:{}}),[l,o,a]);"string"===typeof r&&(r=_(r));let{pathname:u="/",search:h="",hash:d="",state:m=null,key:g="default"}=r,v=e.useMemo(()=>{let e=j(u,l);return null==e?null:{location:{pathname:e,search:h,hash:d,state:m,key:g},navigationType:s}},[l,u,h,d,m,g,s]);return p(null!=v,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(u).concat(h).concat(d,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==v?null:e.createElement(te.Provider,{value:c},e.createElement(ne.Provider,{children:i,value:v}))}function Ne(e){let{children:t,location:n}=e;return he(Pe(t),n)}e.Component;function Pe(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=[];return e.Children.forEach(t,(t,r)=>{if(!e.isValidElement(t))return;let s=[...n,r];if(t.type===e.Fragment)return void i.push.apply(i,Pe(t.props.children,s));f(t.type===Te,"[".concat("string"===typeof t.type?t.type:t.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),f(!t.props.index||!t.props.children,"An index route cannot have child routes.");let o={id:t.props.id||s.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,middleware:t.props.middleware,loader:t.props.loader,action:t.props.action,hydrateFallbackElement:t.props.hydrateFallbackElement,HydrateFallback:t.props.HydrateFallback,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:!0===t.props.hasErrorBoundary||null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(o.children=Pe(t.props.children,s)),i.push(o)}),i}var Ae="get",Le="application/x-www-form-urlencoded";function Re(e){return null!=e&&"string"===typeof e.tagName}var Oe=null;var Me=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function De(e){return null==e||Me.has(e)?e:(p(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Le,'"')),null)}function je(e,t){let n,i,r,s,o;if(Re(a=e)&&"form"===a.tagName.toLowerCase()){let o=e.getAttribute("action");i=o?j(o,t):null,n=e.getAttribute("method")||Ae,r=De(e.getAttribute("enctype"))||Le,s=new FormData(e)}else if(function(e){return Re(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Re(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let o=e.form;if(null==o)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=e.getAttribute("formaction")||o.getAttribute("action");if(i=a?j(a,t):null,n=e.getAttribute("formmethod")||o.getAttribute("method")||Ae,r=De(e.getAttribute("formenctype"))||De(o.getAttribute("enctype"))||Le,s=new FormData(o,e),!function(){if(null===Oe)try{new FormData(document.createElement("form"),0),Oe=!1}catch(e){Oe=!0}return Oe}()){let{name:t,type:n,value:i}=e;if("image"===n){let e=t?"".concat(t,"."):"";s.append("".concat(e,"x"),"0"),s.append("".concat(e,"y"),"0")}else t&&s.append(t,i)}}else{if(Re(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ae,i=null,r=Le,o=e}var a;return s&&"text/plain"===r&&(o=s,s=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function Fe(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function ze(e,t,n){let i="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===i.pathname?i.pathname="_root.".concat(n):t&&"/"===j(i.pathname,t)?i.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):i.pathname="".concat(i.pathname.replace(/\/$/,""),".").concat(n),i}async function Ue(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ve(e){return null!=e&&"string"===typeof e.page}function Be(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function He(e,t,n,i,r,s){let o=(e,t)=>!n[t]||e.route.id!==n[t].route.id,a=(e,t)=>{var i;return n[t].pathname!==e.pathname||(null===(i=n[t].route.path)||void 0===i?void 0:i.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===s?t.filter((e,t)=>o(e,t)||a(e,t)):"data"===s?t.filter((t,s)=>{let l=i.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(o(t,s)||a(t,s))return!0;if(t.route.shouldRevalidate){var c;let i=t.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof i)return i}return!0}):[]}function qe(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i=e.map(e=>{let i=t.routes[e.route.id];if(!i)return[];let r=[i.module];return i.clientActionModule&&(r=r.concat(i.clientActionModule)),i.clientLoaderModule&&(r=r.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(r=r.concat(i.hydrateFallbackModule)),i.imports&&(r=r.concat(i.imports)),r}).flat(1),[...new Set(i)];var i}function We(e,t){let n=new Set,i=new Set(t);return e.reduce((e,r)=>{if(t&&!Ve(r)&&"script"===r.as&&r.href&&i.has(r.href))return e;let s=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}(r));return n.has(s)||(n.add(s),e.push({key:s,link:r})),e},[])}function Ze(e,t){return"lazy"===e.mode&&!0===t}function Ke(){let t=e.useContext(Y);return Fe(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Ge(){let t=e.useContext(Q);return Fe(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Ye=e.createContext(void 0);function Qe(){let t=e.useContext(Ye);return Fe(t,"You must render this element inside a <HydratedRouter> element"),t}function $e(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Je(e,t,n){if(n&&!nt)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}Ye.displayName="FrameworkContext";function Xe(t){let{page:n}=t,s=i(t,o),{router:a}=Ke(),l=e.useMemo(()=>w(a.routes,n,a.basename),[a.routes,n,a.basename]);return l?e.createElement(tt,(0,r.A)({page:n,matches:l},s)):null}function et(t){let{manifest:n,routeModules:i}=Qe(),[s,o]=e.useState([]);return e.useEffect(()=>{let e=!1;return async function(e,t,n){return We((await Promise.all(e.map(async e=>{let i=t.routes[e.route.id];if(i){let e=await Ue(i,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Be).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?(0,r.A)((0,r.A)({},e),{},{rel:"prefetch",as:"style"}):(0,r.A)((0,r.A)({},e),{},{rel:"prefetch"})))}(t,n,i).then(t=>{e||o(t)}),()=>{e=!0}},[t,n,i]),s}function tt(t){let{page:n,matches:s}=t,o=i(t,a),l=oe(),{manifest:c,routeModules:u}=Qe(),{basename:h}=Ke(),{loaderData:d,matches:f}=Ge(),p=e.useMemo(()=>He(n,s,f,c,l,"data"),[n,s,f,c,l]),m=e.useMemo(()=>He(n,s,f,c,l,"assets"),[n,s,f,c,l]),g=e.useMemo(()=>{if(n===l.pathname+l.search+l.hash)return[];let e=new Set,t=!1;if(s.forEach(n=>{var i;let r=c.routes[n.route.id];r&&r.hasLoader&&(!p.some(e=>e.route.id===n.route.id)&&n.route.id in d&&null!==(i=u[n.route.id])&&void 0!==i&&i.shouldRevalidate||r.hasClientLoader?t=!0:e.add(n.route.id))}),0===e.size)return[];let i=ze(n,h,"data");return t&&e.size>0&&i.searchParams.set("_routes",s.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[i.pathname+i.search]},[h,d,l,c,p,s,n,u]),v=e.useMemo(()=>qe(m,c),[m,c]),_=et(m);return e.createElement(e.Fragment,null,g.map(t=>e.createElement("link",(0,r.A)({key:t,rel:"prefetch",as:"fetch",href:t},o))),v.map(t=>e.createElement("link",(0,r.A)({key:t,rel:"modulepreload",href:t},o))),_.map(t=>{let{key:n,link:i}=t;return e.createElement("link",(0,r.A)({key:n,nonce:o.nonce},i))}))}var nt=!1;function it(t){let{manifest:n,serverHandoffString:o,isSpaMode:a,renderMeta:l,routeDiscovery:c,ssr:u}=Qe(),{router:h,static:d,staticContext:f}=Ke(),{matches:p}=Ge(),m=e.useContext($),g=Ze(c,u);l&&(l.didRenderScripts=!0);let v=Je(p,null,a);e.useEffect(()=>{0},[]);let _=e.useMemo(()=>{var a;if(m)return null;let l=f?"window.__reactRouterContext = ".concat(o,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",c=d?"".concat(null!==n.hmr&&void 0!==a&&a.runtime?"import ".concat(JSON.stringify(n.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(n.url)),";\n").concat(v.map((e,t)=>{let i="route".concat(t),r=n.routes[e.route.id];Fe(r,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:s,clientLoaderModule:o,clientMiddlewareModule:a,hydrateFallbackModule:l,module:c}=r,u=[...s?[{module:s,varName:"".concat(i,"_clientAction")}]:[],...o?[{module:o,varName:"".concat(i,"_clientLoader")}]:[],...a?[{module:a,varName:"".concat(i,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(i,"_HydrateFallback")}]:[],{module:c,varName:"".concat(i,"_main")}];return 1===u.length?"import * as ".concat(i," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(i," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,o=i(e,s),a=new Set(t.state.matches.map(e=>e.route.id)),l=t.state.location.pathname.split("/").filter(Boolean),c=["/"];for(l.pop();l.length>0;)c.push("/".concat(l.join("/"))),l.pop();c.forEach(e=>{let n=w(t.routes,e,t.basename);n&&n.forEach(e=>a.add(e.route.id))});let u=[...a].reduce((e,t)=>Object.assign(e,{[t]:o.routes[t]}),{});return(0,r.A)((0,r.A)({},o),{},{routes:u,sri:!!n||void 0})}(n,h),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(v.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(n.entry.module),");"):" ";return e.createElement(e.Fragment,null,e.createElement("script",(0,r.A)((0,r.A)({},t),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:l},type:void 0})),e.createElement("script",(0,r.A)((0,r.A)({},t),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:c},type:"module",async:!0})))},[]),y=nt||m?[]:(n.entry.imports.concat(qe(v,n,{includeHydrateFallback:!0})),[...new Set(b)]);var b;let E="object"===typeof n.sri?n.sri:{};return ke(!m,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),nt||m?null:e.createElement(e.Fragment,null,"object"===typeof n.sri?e.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:E})}}):null,g?null:e.createElement("link",{rel:"modulepreload",href:n.url,crossOrigin:t.crossOrigin,integrity:E[n.url],suppressHydrationWarning:!0}),e.createElement("link",{rel:"modulepreload",href:n.entry.module,crossOrigin:t.crossOrigin,integrity:E[n.entry.module],suppressHydrationWarning:!0}),y.map(n=>e.createElement("link",{key:n,rel:"modulepreload",href:n,crossOrigin:t.crossOrigin,integrity:E[n],suppressHydrationWarning:!0})),_)}function rt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}e.Component;function st(t){let{error:n,isOutsideRemixApp:i}=t;console.error(n);let r,s=e.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(Z(n))return e.createElement(ot,{title:"Unhandled Thrown Response!"},e.createElement("h1",{style:{fontSize:"24px"}},n.status," ",n.statusText),s);if(n instanceof Error)0;else{let e=null==n?"Unknown Error":"object"===typeof n&&"toString"in n?n.toString():JSON.stringify(n);new Error(e)}return e.createElement(ot,{title:"Application Error!",isOutsideRemixApp:i},e.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),e.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},r.stack),s)}function ot(t){var n;let{title:i,renderScripts:r,isOutsideRemixApp:s,children:o}=t,{routeModules:a}=Qe();return null!==a.root&&void 0!==n&&n.Layout&&!s?o:e.createElement("html",{lang:"en"},e.createElement("head",null,e.createElement("meta",{charSet:"utf-8"}),e.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),e.createElement("title",null,i)),e.createElement("body",null,e.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},o,r?e.createElement(it,null):null)))}var at="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{at&&(window.__reactRouterVersion="7.9.4")}catch(nd){}function lt(t){let{basename:n,children:i,window:r}=t,s=e.useRef();null==s.current&&(s.current=d({window:r,v5Compat:!0}));let o=s.current,[a,l]=e.useState({action:o.action,location:o.location}),c=e.useCallback(t=>{e.startTransition(()=>l(t))},[l]);return e.useLayoutEffect(()=>o.listen(c),[o,c]),e.createElement(Ie,{basename:n,children:i,location:a.location,navigationType:a.action,navigator:o})}var ct=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ut=e.forwardRef(function(t,n){let s,{onClick:o,discover:a="render",prefetch:c="none",relative:u,reloadDocument:h,replace:d,state:m,target:g,to:_,preventScrollReset:y,viewTransition:b}=t,w=i(t,l),{basename:E}=e.useContext(te),S="string"===typeof _&&ct.test(_),x=!1;if("string"===typeof _&&S&&(s=_,at))try{let e=new URL(window.location.href),t=_.startsWith("//")?new URL(e.protocol+_):new URL(_),n=j(t.pathname,E);t.origin===e.origin&&null!=n?_=n+t.search+t.hash:x=!0}catch(nd){p(!1,'<Link to="'.concat(_,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let k=function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f(se(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:r}=e.useContext(te),{hash:s,pathname:o,search:a}=ue(t,{relative:n}),l=o;return"/"!==i&&(l="/"===o?i:B([i,o])),r.createHref({pathname:l,search:a,hash:s})}(_,{relative:u}),[C,T,I]=function(t,n){let i=e.useContext(Ye),[r,s]=e.useState(!1),[o,a]=e.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:h,onTouchStart:d}=n,f=e.useRef(null);e.useEffect(()=>{if("render"===t&&a(!0),"viewport"===t){let e=new IntersectionObserver(e=>{e.forEach(e=>{a(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[t]),e.useEffect(()=>{if(r){let e=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(e)}}},[r]);let p=()=>{s(!0)},m=()=>{s(!1),a(!1)};return i?"intent"!==t?[o,f,{}]:[o,f,{onFocus:$e(l,p),onBlur:$e(c,m),onMouseEnter:$e(u,p),onMouseLeave:$e(h,m),onTouchStart:$e(d,p)}]:[!1,f,{}]}(c,w),N=function(t){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=ce(),c=oe(),u=ue(t,{relative:o});return e.useCallback(e=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,n)){e.preventDefault();let n=void 0!==i?i:v(c)===v(u);l(t,{replace:n,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,u,i,r,n,t,s,o,a])}(_,{replace:d,state:m,target:g,preventScrollReset:y,relative:u,viewTransition:b});let P=e.createElement("a",(0,r.A)((0,r.A)((0,r.A)({},w),I),{},{href:s||k,onClick:x||h?o:function(e){o&&o(e),e.defaultPrevented||N(e)},ref:rt(n,T),target:g,"data-discover":S||"render"!==a?void 0:"true"}));return C&&!S?e.createElement(e.Fragment,null,P,e.createElement(Xe,{page:k})):P});ut.displayName="Link",e.forwardRef(function(t,n){let{"aria-current":s="page",caseSensitive:o=!1,className:a="",end:l=!1,style:u,to:h,viewTransition:d,children:p}=t,m=i(t,c),g=ue(h,{relative:m.relative}),v=oe(),_=e.useContext(Q),{navigator:y,basename:b}=e.useContext(te),w=null!=_&&function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.useContext(J);f(null!=i,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=ft("useViewTransitionState"),s=ue(t,{relative:n});if(!i.isTransitioning)return!1;let o=j(i.currentLocation.pathname,r)||i.currentLocation.pathname,a=j(i.nextLocation.pathname,r)||i.nextLocation.pathname;return null!=O(s.pathname,a)||null!=O(s.pathname,o)}(g)&&!0===d,E=y.encodeLocation?y.encodeLocation(g).pathname:g.pathname,S=v.pathname,x=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;o||(S=S.toLowerCase(),x=x?x.toLowerCase():null,E=E.toLowerCase()),x&&b&&(x=j(x,b)||x);const k="/"!==E&&E.endsWith("/")?E.length-1:E.length;let C,T=S===E||!l&&S.startsWith(E)&&"/"===S.charAt(k),I=null!=x&&(x===E||!l&&x.startsWith(E)&&"/"===x.charAt(E.length)),N={isActive:T,isPending:I,isTransitioning:w},P=T?s:void 0;C="function"===typeof a?a(N):[a,T?"active":null,I?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let A="function"===typeof u?u(N):u;return e.createElement(ut,(0,r.A)((0,r.A)({},m),{},{"aria-current":P,className:C,ref:n,style:A,to:h,viewTransition:d}),"function"===typeof p?p(N):p)}).displayName="NavLink";var ht=e.forwardRef((t,n)=>{let{discover:s="render",fetcherKey:o,navigate:a,reloadDocument:l,replace:c,state:h,method:d=Ae,action:p,onSubmit:m,relative:g,preventScrollReset:_,viewTransition:y}=t,b=i(t,u),w=gt(),E=function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:i}=e.useContext(te),s=e.useContext(ie);f(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),a=(0,r.A)({},ue(t||".",{relative:n})),l=oe();if(null==t){a.search=l.search;let e=new URLSearchParams(a.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();a.search=n?"?".concat(n):""}}t&&"."!==t||!o.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==i&&(a.pathname="/"===a.pathname?i:B([i,a.pathname]));return v(a)}(p,{relative:g}),S="get"===d.toLowerCase()?"get":"post",x="string"===typeof p&&ct.test(p);return e.createElement("form",(0,r.A)((0,r.A)({ref:n,method:S,action:E,onSubmit:l?m:e=>{if(m&&m(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||d;w(t||e.currentTarget,{fetcherKey:o,method:n,navigate:a,replace:c,state:h,relative:g,preventScrollReset:_,viewTransition:y})}},b),{},{"data-discover":x||"render"!==s?void 0:"true"}))});function dt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function ft(t){let n=e.useContext(Y);return f(n,dt(t)),n}ht.displayName="Form";var pt=0,mt=()=>"__".concat(String(++pt),"__");function gt(){let{router:t}=ft("useSubmit"),{basename:n}=e.useContext(te),i=be("useRouteId");return e.useCallback(async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:o,encType:a,formData:l,body:c}=je(e,n);if(!1===r.navigate){let e=r.fetcherKey||mt();await t.fetch(e,i,r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||o,formEncType:r.encType||a,flushSync:r.flushSync})}else await t.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||o,formEncType:r.encType||a,replace:r.replace,state:r.state,fromRouteId:i,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,n,i])}var vt=n(232),_t=n(776),yt=n(965),bt=n(606);const wt=["providerId"],Et=["uid","auth","stsTokenManager"],St=["providerId","signInMethod"];function xt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kt=xt,Ct=new _t.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Tt=new yt.Vy("@firebase/auth");function It(e){if(Tt.logLevel<=yt.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];Tt.error("Auth (".concat(vt.MF,"): ").concat(e),...n)}}function Nt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw Rt(e,...n)}function Pt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Rt(e,...n)}function At(e,t,n){const i=(0,r.A)((0,r.A)({},kt()),{},{[t]:n});return new _t.FA("auth","Firebase",i).create(t,{appName:e.name})}function Lt(e){return At(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if("string"!==typeof e){const t=n[0],i=[...n.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(t,...i)}return Ct.create(e,...n)}function Ot(e,t){if(!e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];throw Rt(t,...i)}}function Mt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw It(t),new Error(t)}function Dt(e,t){e||Mt(t)}function jt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ft(){return"http:"===zt()||"https:"===zt()}function zt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Ut{constructor(e,t){this.shortDelay=e,this.longDelay=t,Dt(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,_t.jZ)()||(0,_t.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Ft()||(0,_t.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Vt(e,t){Dt(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Bt{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Mt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Mt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Mt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ht={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},qt=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Wt=new Ut(3e4,6e4);function Zt(e,t){return e.tenantId&&!t.tenantId?(0,r.A)((0,r.A)({},t),{},{tenantId:e.tenantId}):t}async function Kt(e,t,n,i){return Gt(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},o={};i&&("GET"===t?o=i:s={body:JSON.stringify(i)});const a=(0,_t.Am)((0,r.A)({key:e.config.apiKey},o)).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const c=(0,r.A)({method:t,headers:l},s);return(0,_t.c1)()||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&(0,_t.zJ)(e.emulatorConfig.host)&&(c.credentials="include"),Bt.fetch()(await Qt(e,e.config.apiHost,n,a),c)})}async function Gt(e,t,n){e._canInitEmulator=!1;const i=(0,r.A)((0,r.A)({},Ht),t);try{const t=new Jt(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw Xt(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const t=r.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Xt(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Xt(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Xt(e,"user-disabled",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw At(e,a,o);Nt(e,a)}}catch(nd){if(nd instanceof _t.g)throw nd;Nt(e,"network-request-failed",{message:String(nd)})}}async function Yt(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Kt(e,t,n,i,r);return"mfaPendingCredential"in s&&Nt(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function Qt(e,t,n,i){const r="".concat(t).concat(n,"?").concat(i),s=e,o=s.config.emulator?Vt(e.config,r):"".concat(e.config.apiScheme,"://").concat(r);if(qt.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(o).toString()}return o}function $t(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Jt{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Pt(this.auth,"network-request-failed")),Wt.get())})}}function Xt(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Pt(e,t,i);return r.customData._tokenResponse=n,r}function en(e){return void 0!==e&&void 0!==e.enterprise}class tn{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return $t(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function nn(e,t){return Kt(e,"GET","/v2/recaptchaConfig",Zt(e,t))}async function rn(e,t){return Kt(e,"POST","/v1/accounts:lookup",t)}function sn(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(nd){}}function on(e){return 1e3*Number(e)}function an(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return It("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,_t.u)(n);return e?JSON.parse(e):(It("Failed to decode base64 JWT payload"),null)}catch(nd){return It("Caught error parsing JWT payload as JSON",null===nd||void 0===nd?void 0:nd.toString()),null}}function ln(e){const t=an(e);return Ot(t,"internal-error"),Ot("undefined"!==typeof t.exp,"internal-error"),Ot("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function cn(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(nd){throw nd instanceof _t.g&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(nd)&&e.auth.currentUser===e&&await e.auth.signOut(),nd}}class un{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(nd){return void((null===nd||void 0===nd?void 0:nd.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class hn{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=sn(this.lastLoginAt),this.creationTime=sn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function dn(e){var t;const n=e.auth,i=await e.getIdToken(),r=await cn(e,rn(n,{idToken:i}));Ot(null===r||void 0===r?void 0:r.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const o=null!==(t=s.providerUserInfo)&&void 0!==t&&t.length?fn(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null!==a&&void 0!==a&&a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new hn(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function fn(e){return e.map(e=>{let{providerId:t}=e,n=i(e,wt);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class pn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ot(e.idToken,"internal-error"),Ot("undefined"!==typeof e.idToken,"internal-error"),Ot("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):ln(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ot(0!==e.length,"internal-error");const t=ln(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Ot(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(e,t){const n=await Gt(e,{},async()=>{const n=(0,_t.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,s=await Qt(e,i,"/v1/token","key=".concat(r)),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const a={method:"POST",headers:o,body:n};return e.emulatorConfig&&(0,_t.zJ)(e.emulatorConfig.host)&&(a.credentials="include"),Bt.fetch()(s,a)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:r}=t,s=new pn;return n&&(Ot("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),i&&(Ot("string"===typeof i,"internal-error",{appName:e}),s.accessToken=i),r&&(Ot("number"===typeof r,"internal-error",{appName:e}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pn,this.toJSON())}_performRefresh(){return Mt("not implemented")}}function mn(e,t){Ot("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class gn{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,s=i(e,Et);this.providerId="firebase",this.proactiveRefresh=new un(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new hn(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await cn(this,this.stsTokenManager.getToken(this.auth,e));return Ot(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,_t.Ku)(e),i=await n.getIdToken(t),r=an(i);Ot(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"===typeof r.firebase?r.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:sn(on(r.auth_time)),issuedAtTime:sn(on(r.iat)),expirationTime:sn(on(r.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,_t.Ku)(e);await dn(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Ot(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>(0,r.A)({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new gn((0,r.A)((0,r.A)({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await dn(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,vt.xZ)(this.auth.app))return Promise.reject(Lt(this.auth));const e=await this.getIdToken();return await cn(this,async function(e,t){return Kt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return(0,r.A)((0,r.A)({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>(0,r.A)({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,s,o,a,l,c,u;const h=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(i=t.email)&&void 0!==i?i:void 0,f=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,m=null!==(a=t.tenantId)&&void 0!==a?a:void 0,g=null!==(l=t._redirectEventId)&&void 0!==l?l:void 0,v=null!==(c=t.createdAt)&&void 0!==c?c:void 0,_=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:y,emailVerified:b,isAnonymous:w,providerData:E,stsTokenManager:S}=t;Ot(y&&S,e,"internal-error");const x=pn.fromJSON(this.name,S);Ot("string"===typeof y,e,"internal-error"),mn(h,e.name),mn(d,e.name),Ot("boolean"===typeof b,e,"internal-error"),Ot("boolean"===typeof w,e,"internal-error"),mn(f,e.name),mn(p,e.name),mn(m,e.name),mn(g,e.name),mn(v,e.name),mn(_,e.name);const k=new gn({uid:y,auth:e,email:d,emailVerified:b,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:x,createdAt:v,lastLoginAt:_});return E&&Array.isArray(E)&&(k.providerData=E.map(e=>(0,r.A)({},e))),g&&(k._redirectEventId=g),k}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=new pn;i.updateFromServerResponse(t);const r=new gn({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await dn(r),r}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];Ot(void 0!==i.localId,"internal-error");const r=void 0!==i.providerUserInfo?fn(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(null!==r&&void 0!==r&&r.length),o=new pn;o.updateFromIdToken(n);const a=new gn({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new hn(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(null!==r&&void 0!==r&&r.length)};return Object.assign(a,l),a}}const vn=new Map;function _n(e){Dt(e instanceof Function,"Expected a class definition");let t=vn.get(e);return t?(Dt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,vn.set(e,t),t)}class yn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}yn.type="NONE";const bn=yn;function wn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class En{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=wn(this.userKey,i.apiKey,r),this.fullPersistenceKey=wn("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await rn(this.auth,{idToken:e}).catch(()=>{});return t?gn._fromGetAccountInfoResponse(this.auth,t,e):null}return gn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new En(_n(bn),e,n);const i=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let r=i[0]||_n(bn);const s=wn(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const i=await rn(e,{idToken:t}).catch(()=>{});if(!i)break;n=await gn._fromGetAccountInfoResponse(e,i,t)}else n=gn._fromJSON(e,t);c!==r&&(o=n),r=c;break}}catch(l){}const a=i.filter(e=>e._shouldAllowMigration);return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==r)try{await e._remove(s)}catch(t){}})),new En(r,e,n)):new En(r,e,n)}}function Sn(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Tn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(xn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Nn(t))return"Blackberry";if(Pn(t))return"Webos";if(kn(t))return"Safari";if((t.includes("chrome/")||Cn(t))&&!t.includes("edge/"))return"Chrome";if(In(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function xn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,_t.ZQ)();return/firefox\//i.test(e)}function kn(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,_t.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Cn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,_t.ZQ)();return/crios\//i.test(e)}function Tn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,_t.ZQ)();return/iemobile/i.test(e)}function In(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,_t.ZQ)();return/android/i.test(e)}function Nn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,_t.ZQ)();return/blackberry/i.test(e)}function Pn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,_t.ZQ)();return/webos/i.test(e)}function An(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,_t.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ln(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,_t.ZQ)();return An(e)||In(e)||Pn(e)||Nn(e)||/windows phone/i.test(e)||Tn(e)}function Rn(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Sn((0,_t.ZQ)());break;case"Worker":t="".concat(Sn((0,_t.ZQ)()),"-").concat(e);break;default:t=e}const i=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(vt.MF,"/").concat(i)}class On{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,i)=>{try{n(e(t))}catch(nd){i(nd)}});n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(nd){t.reverse();for(const i of t)try{i()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===nd||void 0===nd?void 0:nd.message})}}}class Mn{constructor(e){var t,n,i,r;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(i=e.allowedNonAlphanumericCharacters)||void 0===i?void 0:i.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(r=e.forceUpgradeOnSignin)&&void 0!==r&&r,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,i,r,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(i=a.containsLowercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(r=a.containsUppercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}class Dn{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fn(this),this.idTokenSubscription=new Fn(this),this.beforeStateQueue=new On(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ct,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_n(t)),this._initializationPromise=this.queue(async()=>{var n,i,r;if(!this._deleted&&(this.persistenceManager=await En.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(i=this._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(nd){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await rn(this,{idToken:e}),n=await gn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if((0,vt.xZ)(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,i=!1;if(e&&this.config.authDomain){var r,s;await this.getOrInitRedirectPersistenceManager();const t=null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId,o=null===(s=n)||void 0===s?void 0:s._redirectEventId,a=await this.tryRedirectSignIn(e);t&&t!==o||null===a||void 0===a||!a.user||(n=a.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(nd){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(nd))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Ot(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(nd){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await dn(e)}catch(nd){if((null===nd||void 0===nd?void 0:nd.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,vt.xZ)(this.app))return Promise.reject(Lt(this));const t=e?(0,_t.Ku)(e):null;return t&&Ot(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Ot(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(0,vt.xZ)(this.app)?Promise.reject(Lt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,vt.xZ)(this.app)?Promise.reject(Lt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_n(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Kt(e,"GET","/v2/passwordPolicy",Zt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Mn(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _t.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Kt(e,"POST","/v2/accounts:revokeToken",Zt(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_n(e)||this._popupRedirectResolver;Ot(t,this,"argument-error"),this.redirectPersistenceManager=await En.create(this,[_n(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const r="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ot(o,this,"internal-error"),o.then(()=>{s||r(this.currentUser)}),"function"===typeof t){const r=e.addObserver(t,n,i);return()=>{s=!0,r()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Rn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if((0,vt.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(Tt.logLevel<=yt.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];Tt.warn("Auth (".concat(vt.MF,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function jn(e){return(0,_t.Ku)(e)}class Fn{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,_t.tD)(e=>this.observer=e)}get next(){return Ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let zn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Un(e){return zn.loadJS(e)}function Vn(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Bn{constructor(){this.enterprise=new Hn}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Hn{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const qn="NO_RECAPTCHA";class Wn{constructor(e){this.type="recaptcha-enterprise",this.auth=jn(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,i){const r=window.grecaptcha;en(r)?r.enterprise.ready(()=>{r.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(qn)})}):i(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Bn).execute("siteKey",{action:"verify"})}return new Promise((e,i)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{nn(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(i=>{if(void 0!==i.recaptchaKey){const n=new tn(i);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(r=>{if(!t&&en(window.grecaptcha))n(r,e,i);else{if("undefined"===typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));let t=zn.recaptchaEnterpriseScript;0!==t.length&&(t+=r),Un(t).then(()=>{n(r,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}}async function Zn(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=new Wn(e);let a;if(s)a=qn;else try{a=await o.verify(n)}catch(c){a=await o.verify(n,!0)}const l=(0,r.A)({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in l){const e=l.phoneEnrollmentInfo.phoneNumber,t=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const e=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Kn(e,t,n,i,r){if("EMAIL_PASSWORD_PROVIDER"===r){var s;if(null!==(s=e._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await Zn(e,t,n,"getOobCode"===n);return i(e,r)}return i(e,t).catch(async r=>{if(r.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const r=await Zn(e,t,n,"getOobCode"===n);return i(e,r)}return Promise.reject(r)})}if("PHONE_PROVIDER"===r){var o;if(null!==(o=e._getRecaptchaConfig())&&void 0!==o&&o.isProviderEnabled("PHONE_PROVIDER")){const r=await Zn(e,t,n);return i(e,r).catch(async r=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(r.code==="auth/".concat("missing-recaptcha-token")||r.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const r=await Zn(e,t,n,!1,!0);return i(e,r)}return Promise.reject(r)})}{const r=await Zn(e,t,n,!1,!0);return i(e,r)}}return Promise.reject(r+" provider is not supported.")}async function Gn(e){const t=jn(e),n=await nn(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new tn(n);if(null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,i.isAnyProviderEnabled()){new Wn(t).verify()}}function Yn(e,t,n){const i=jn(e);Ot(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!(null===n||void 0===n||!n.disableWarnings),s=Qn(t),{host:o,port:a}=function(e){const t=Qn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const e=r[1];return{host:e,port:$n(i.substr(e.length+1))}}{const[e,t]=i.split(":");return{host:e,port:$n(t)}}}(t),l=null===a?"":":".concat(a),c={url:"".concat(s,"//").concat(o).concat(l,"/")},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator)return Ot(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),void Ot((0,_t.bD)(c,i.config.emulator)&&(0,_t.bD)(u,i.emulatorConfig),i,"emulator-config-failed");i.config.emulator=c,i.emulatorConfig=u,i.settings.appVerificationDisabledForTesting=!0,(0,_t.zJ)(o)?((0,_t.gE)("".concat(s,"//").concat(o).concat(l)),(0,_t.P1)("Auth",!0)):r||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Qn(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function $n(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Jn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Mt("not implemented")}_getIdTokenResponse(e){return Mt("not implemented")}_linkToIdToken(e,t){return Mt("not implemented")}_getReauthenticationResolver(e){return Mt("not implemented")}}async function Xn(e,t){return Kt(e,"POST","/v1/accounts:signUp",t)}async function ei(e,t){return Yt(e,"POST","/v1/accounts:signInWithPassword",Zt(e,t))}async function ti(e,t){return Kt(e,"POST","/v1/accounts:sendOobCode",Zt(e,t))}async function ni(e,t){return ti(e,t)}class ii extends Jn{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new ii(e,t,"password")}static _fromEmailAndCode(e,t){return new ii(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Kn(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ei,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Yt(e,"POST","/v1/accounts:signInWithEmailLink",Zt(e,t))}(e,{email:this._email,oobCode:this._password});default:Nt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Kn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Xn,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Yt(e,"POST","/v1/accounts:signInWithEmailLink",Zt(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Nt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ri(e,t){return Yt(e,"POST","/v1/accounts:signInWithIdp",Zt(e,t))}class si extends Jn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new si(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Nt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=i(t,St);if(!n||!r)return null;const o=new si(n,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){return ri(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ri(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ri(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,_t.Am)(t)}return e}}async function oi(e,t){return Kt(e,"POST","/v1/accounts:sendVerificationCode",Zt(e,t))}const ai={USER_NOT_FOUND:"user-not-found"};class li extends Jn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new li({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new li({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Yt(e,"POST","/v1/accounts:signInWithPhoneNumber",Zt(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Yt(e,"POST","/v1/accounts:signInWithPhoneNumber",Zt(e,t));if(n.temporaryProof)throw Xt(e,"account-exists-with-different-credential",n);return n}(e,(0,r.A)({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Yt(e,"POST","/v1/accounts:signInWithPhoneNumber",Zt(e,(0,r.A)((0,r.A)({},t),{},{operation:"REAUTH"})),ai)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new li({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class ci{constructor(e){var t,n,i,r,s,o;const a=(0,_t.I9)((0,_t.hp)(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);Ot(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.lang)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=(0,_t.I9)((0,_t.hp)(e)).link,n=t?(0,_t.I9)((0,_t.hp)(t)).deep_link_id:null,i=(0,_t.I9)((0,_t.hp)(e)).deep_link_id;return(i?(0,_t.I9)((0,_t.hp)(i)).link:null)||i||n||t||e}(e);try{return new ci(t)}catch(n){return null}}}class ui{constructor(){this.providerId=ui.PROVIDER_ID}static credential(e,t){return ii._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ci.parseLink(t);return Ot(n,"argument-error"),ii._fromEmailAndCode(e,n.code,n.tenantId)}}ui.PROVIDER_ID="password",ui.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ui.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class hi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class di extends hi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class fi extends di{constructor(){super("facebook.com")}static credential(e){return si._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return fi.credential(t.oauthAccessToken)}catch(n){return null}}}fi.FACEBOOK_SIGN_IN_METHOD="facebook.com",fi.PROVIDER_ID="facebook.com";class pi extends di{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return si._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return pi.credential(n,i)}catch(r){return null}}}pi.GOOGLE_SIGN_IN_METHOD="google.com",pi.PROVIDER_ID="google.com";class mi extends di{constructor(){super("github.com")}static credential(e){return si._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return mi.credential(t.oauthAccessToken)}catch(n){return null}}}mi.GITHUB_SIGN_IN_METHOD="github.com",mi.PROVIDER_ID="github.com";class gi extends di{constructor(){super("twitter.com")}static credential(e,t){return si._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return gi.credential(n,i)}catch(r){return null}}}async function vi(e,t){return Yt(e,"POST","/v1/accounts:signUp",Zt(e,t))}gi.TWITTER_SIGN_IN_METHOD="twitter.com",gi.PROVIDER_ID="twitter.com";class _i{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=await gn._fromIdTokenResponse(e,n,i),s=yi(n);return new _i({user:r,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=yi(n);return new _i({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function yi(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class bi extends _t.g{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,bi.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new bi(e,t,n,i)}}function wi(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw bi._fromErrorAndOperation(e,n,t,i);throw n})}async function Ei(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=await cn(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return _i._forOperation(e,"link",i)}async function Si(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:i}=e;if((0,vt.xZ)(i.app))return Promise.reject(Lt(i));const r="reauthenticate";try{const s=await cn(e,wi(i,r,t,e),n);Ot(s.idToken,i,"internal-error");const o=an(s.idToken);Ot(o,i,"internal-error");const{sub:a}=o;return Ot(e.uid===a,i,"user-mismatch"),_i._forOperation(e,r,s)}catch(nd){throw(null===nd||void 0===nd?void 0:nd.code)==="auth/".concat("user-not-found")&&Nt(i,"user-mismatch"),nd}}async function xi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,vt.xZ)(e.app))return Promise.reject(Lt(e));const i="signIn",r=await wi(e,i,t),s=await _i._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}async function ki(e,t){return xi(jn(e),t)}function Ci(e,t,n){var i;Ot((null===(i=n.url)||void 0===i?void 0:i.length)>0,e,"invalid-continue-uri"),Ot("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),Ot("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Ot(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Ot(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Ti(e){const t=jn(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Ii(e,t){const n=(0,_t.Ku)(e),i={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Ci(n.auth,i,t);const{email:r}=await async function(e,t){return ti(e,t)}(n.auth,i);r!==e.email&&await e.reload()}function Ni(e,t){return Kt(e,"POST","/v2/accounts/mfaEnrollment:start",Zt(e,t))}new WeakMap;const Pi="__sak";class Ai{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Pi,"1"),this.storage.removeItem(Pi),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Li extends Ai{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ln(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);(0,_t.lT)()&&10===document.documentMode&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Li.type="LOCAL";const Ri=Li;function Oi(e){var t,n;const i=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),r=RegExp("".concat(i,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(r))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function Mi(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Di{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Mi(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Oi(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Mi(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Mi(e);if(window.cookieStore){const e=e=>{const i=e.changed.find(e=>e.name===n);i&&t(i.value);e.deleted.find(e=>e.name===n)&&t(null)},i=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,i),window.cookieStore.addEventListener("change",e)}let i=Oi(n);const r=setInterval(()=>{const e=Oi(n);e!==i&&(t(e),i=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(r))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Di.type="COOKIE";class ji extends Ai{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ji.type="SESSION";const Fi=ji;class zi{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new zi(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:r}=t.data,s=this.handlersMap[i];if(null===s||void 0===s||!s.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map(async e=>e(t.origin,r)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ui(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let i=0;i<t;i++)n+=Math.floor(10*Math.random());return e+n}zi.receivers=[];class Vi{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const i="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise((o,a)=>{const l=Ui("",20);i.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),r=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),o(t.data.response);break;default:clearTimeout(c),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Bi(){return window}function Hi(){return"undefined"!==typeof Bi().WorkerGlobalScope&&"function"===typeof Bi().importScripts}const qi="firebaseLocalStorageDb",Wi="firebaseLocalStorage",Zi="fbase_key";class Ki{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Gi(e,t){return e.transaction([Wi],t?"readwrite":"readonly").objectStore(Wi)}function Yi(){const e=indexedDB.open(qi,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Wi,{keyPath:Zi})}catch(nd){n(nd)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Wi)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(qi);return new Ki(e).toPromise()}(),t(await Yi()))})})}async function Qi(e,t,n){const i=Gi(e,!0).put({[Zi]:t,value:n});return new Ki(i).toPromise()}function $i(e,t){const n=Gi(e,!0).delete(t);return new Ki(n).toPromise()}class Ji{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Yi()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(nd){if(t++>3)throw nd;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Hi()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zi._getInstance(Hi()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Vi(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yi();return await Qi(e,Pi,"1"),await $i(e,Pi),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Qi(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Gi(e,!1).get(t),i=await new Ki(n).toPromise();return void 0===i?null:i.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>$i(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Gi(e,!1).getAll();return new Ki(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Ji.type="LOCAL";const Xi=Ji;function er(e,t){return Kt(e,"POST","/v2/accounts/mfaSignIn:start",Zt(e,t))}Vn("rcb"),new Ut(3e4,6e4);const tr="recaptcha";async function nr(e,t,n){if(!e._getRecaptchaConfig())try{await Gn(e)}catch(r){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(r="string"===typeof t?{phoneNumber:t}:t,"session"in r){const t=r.session;if("phoneNumber"in r){Ot("enroll"===t.type,e,"internal-error");const i={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=Kn(e,i,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===qn){Ot((null===n||void 0===n?void 0:n.type)===tr,e,"argument-error");return Ni(e,await ir(e,t,n))}return Ni(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var i;Ot("signin"===t.type,e,"internal-error");const s=(null===(i=r.multiFactorHint)||void 0===i?void 0:i.uid)||r.multiFactorUid;Ot(s,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=Kn(e,o,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===qn){Ot((null===n||void 0===n?void 0:n.type)===tr,e,"argument-error");return er(e,await ir(e,t,n))}return er(e,t)},"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"},i=Kn(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===qn){Ot((null===n||void 0===n?void 0:n.type)===tr,e,"argument-error");return oi(e,await ir(e,t,n))}return oi(e,t)},"PHONE_PROVIDER");return(await i.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function ir(e,t,n){Ot(n.type===tr,e,"argument-error");const i=await n.verify();Ot("string"===typeof i,e,"argument-error");const s=(0,r.A)({},t);if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.captchaResponse,n=s.phoneEnrollmentInfo.clientType,r=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:i,captchaResponse:t,clientType:n,recaptchaVersion:r}}),s}if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.captchaResponse,t=s.phoneSignInInfo.clientType,n=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:e,clientType:t,recaptchaVersion:n}}),s}return Object.assign(s,{recaptchaToken:i}),s}class rr{constructor(e){this.providerId=rr.PROVIDER_ID,this.auth=jn(e)}verifyPhoneNumber(e,t){return nr(this.auth,e,(0,_t.Ku)(t))}static credential(e,t){return li._fromVerification(e,t)}static credentialFromResult(e){const t=e;return rr.credentialFromTaggedObject(t)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:i}=t;return n&&i?li._fromTokenResponse(n,i):null}}function sr(e,t){return t?_n(t):(Ot(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}rr.PROVIDER_ID="phone",rr.PHONE_SIGN_IN_METHOD="phone";class or extends Jn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ri(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ri(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ri(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ar(e){return xi(e.auth,new or(e),e.bypassAuthState)}function lr(e){const{auth:t,user:n}=e;return Ot(n,t,"internal-error"),Si(n,new or(e),e.bypassAuthState)}async function cr(e){const{auth:t,user:n}=e;return Ot(n,t,"internal-error"),Ei(n,new or(e),e.bypassAuthState)}class ur{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(nd){this.reject(nd)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(nd){this.reject(nd)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ar;case"linkViaPopup":case"linkViaRedirect":return cr;case"reauthViaPopup":case"reauthViaRedirect":return lr;default:Nt(this.auth,"internal-error")}}resolve(e){Dt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Dt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const hr=new Ut(2e3,1e4);class dr extends ur{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,dr.currentPopupAction&&dr.currentPopupAction.cancel(),dr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ot(e,this.auth,"internal-error"),e}async onExecution(){Dt(1===this.filter.length,"Popup operations only handle one event");const e=Ui();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Pt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Pt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,dr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pt(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,hr.get())};e()}}dr.currentPopupAction=null;const fr=new Map;class pr extends ur{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=fr.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=vr(t),i=gr(e);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(nd){e=()=>Promise.reject(nd)}fr.set(this.auth._key(),e)}return this.bypassAuthState||fr.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function mr(e,t){fr.set(e._key(),t)}function gr(e){return _n(e._redirectPersistence)}function vr(e){return wn("pendingRedirect",e.config.apiKey,e.name)}async function _r(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,vt.xZ)(e.app))return Promise.reject(Lt(e));const i=jn(e),r=sr(i,t),s=new pr(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}class yr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wr(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!wr(e)){var n;const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Pt(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(br(e))}saveEventToCache(e){this.cachedEventUids.add(br(e)),this.lastProcessedEventTime=Date.now()}}function br(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function wr(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Er=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sr=/^https?/;async function xr(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Kt(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const i of t)try{if(kr(i))return}catch(n){}Nt(e,"unauthorized-domain")}function kr(e){const t=jt(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!Sr.test(n))return!1;if(Er.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const Cr=new Ut(3e4,6e4);function Tr(){const e=Bi().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Ir(e){return new Promise((t,n)=>{var i,r;function s(){Tr(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Tr(),n(Pt(e,"network-request-failed"))},timeout:Cr.get()})}if(null!==(i=Bi().gapi)&&void 0!==i&&null!==(i=i.iframes)&&void 0!==i&&i.Iframe)t(gapi.iframes.getContext());else{if(null===(r=Bi().gapi)||void 0===r||!r.load){const t=Vn("iframefcb");return Bi()[t]=()=>{gapi.load?s():n(Pt(e,"network-request-failed"))},Un("".concat(zn.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}s()}}).catch(e=>{throw Nr=null,e})}let Nr=null;const Pr=new Ut(5e3,15e3),Ar={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Lr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rr(e){const t=e.config;Ot(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Vt(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),i={apiKey:t.apiKey,appName:e.name,v:vt.MF},r=Lr.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),"".concat(n,"?").concat((0,_t.Am)(i).slice(1))}async function Or(e){const t=await function(e){return Nr=Nr||Ir(e),Nr}(e),n=Bi().gapi;return Ot(n,e,"internal-error"),t.open({where:document.body,url:Rr(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ar,dontclear:!0},t=>new Promise(async(n,i)=>{await t.restyle({setHideOnLeave:!1});const r=Pt(e,"network-request-failed"),s=Bi().setTimeout(()=>{i(r)},Pr.get());function o(){Bi().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{i(r)})}))}const Mr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Dr{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(nd){}}}function jr(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const c=(0,r.A)((0,r.A)({},Mr),{},{width:i.toString(),height:s.toString(),top:o,left:a}),u=(0,_t.ZQ)().toLowerCase();n&&(l=Cn(u)?"_blank":n),xn(u)&&(t=t||"http://localhost",c.scrollbars="yes");const h=Object.entries(c).reduce((e,t)=>{let[n,i]=t;return"".concat(e).concat(n,"=").concat(i,",")},"");if(function(){var e;return An(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,_t.ZQ)())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(u)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",l),new Dr(null);const d=window.open(t||"",l,h);Ot(d,e,"popup-blocked");try{d.focus()}catch(nd){}return new Dr(d)}const Fr="__/auth/handler",zr="emulator/auth/handler",Ur=encodeURIComponent("fac");async function Vr(e,t,n,i,r,s){Ot(e.config.authDomain,e,"auth-domain-config-required"),Ot(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:vt.MF,eventId:r};if(t instanceof hi){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",(0,_t.Im)(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof di){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Ur,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Fr);return Vt(t,zr)}(e),"?").concat((0,_t.Am)(a).slice(1)).concat(c)}const Br="webStorageSupport";const Hr=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fi,this._completeRedirectFn=_r,this._overrideRedirectResult=mr}async _openPopup(e,t,n,i){var r;Dt(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");return jr(e,await Vr(e,t,n,jt(),i),Ui())}async _openRedirect(e,t,n,i){await this._originValidation(e);return function(e){Bi().location.href=e}(await Vr(e,t,n,jt(),i)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Dt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Or(e),n=new yr(e);return t.register("authEvent",t=>{Ot(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Br,{type:Br},n=>{var i;const r=null===n||void 0===n||null===(i=n[0])||void 0===i?void 0:i[Br];void 0!==r&&t(!!r),Nt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=xr(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ln()||kn()||An()}};var qr="@firebase/auth",Wr="1.11.0";class Zr{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Kr=(0,_t.XA)("authIdTokenMaxAge")||300;let Gr=null;var Yr;zn={loadJS:e=>new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=e=>{const t=Pt("internal-error");t.customData=e,n(t)},i.type="text/javascript",i.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(i)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Yr="Browser",(0,vt.om)(new bt.uA("auth",(e,t)=>{let{options:n}=t;const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;Ot(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:Yr,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rn(Yr)},c=new Dn(i,r,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(_n);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,vt.om)(new bt.uA("auth-internal",e=>(e=>new Zr(e))(jn(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,vt.KO)(qr,Wr,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Yr)),(0,vt.KO)(qr,Wr,"esm2020");(0,vt.KO)("firebase","12.4.0","app");var Qr,$r="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Jr={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const i=Array(16);if("string"===typeof t)for(var r=0;r<16;++r)i[r]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(r=0;r<16;++r)i[r]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],r=e.g[2];let s,o=e.g[3];s=t+(o^n&(r^o))+i[0]+3614090360&4294967295,s=o+(r^(t=n+(s<<7&4294967295|s>>>25))&(n^r))+i[1]+3905402710&4294967295,o=t+(s<<12&4294967295|s>>>20),s=r+(n^o&(t^n))+i[2]+606105819&4294967295,s=n+(t^(r=o+(s<<17&4294967295|s>>>15))&(o^t))+i[3]+3250441966&4294967295,s=t+(o^(n=r+(s<<22&4294967295|s>>>10))&(r^o))+i[4]+4118548399&4294967295,s=o+(r^(t=n+(s<<7&4294967295|s>>>25))&(n^r))+i[5]+1200080426&4294967295,o=t+(s<<12&4294967295|s>>>20),s=r+(n^o&(t^n))+i[6]+2821735955&4294967295,s=n+(t^(r=o+(s<<17&4294967295|s>>>15))&(o^t))+i[7]+4249261313&4294967295,s=t+(o^(n=r+(s<<22&4294967295|s>>>10))&(r^o))+i[8]+1770035416&4294967295,s=o+(r^(t=n+(s<<7&4294967295|s>>>25))&(n^r))+i[9]+2336552879&4294967295,o=t+(s<<12&4294967295|s>>>20),s=r+(n^o&(t^n))+i[10]+4294925233&4294967295,s=n+(t^(r=o+(s<<17&4294967295|s>>>15))&(o^t))+i[11]+2304563134&4294967295,s=t+(o^(n=r+(s<<22&4294967295|s>>>10))&(r^o))+i[12]+1804603682&4294967295,s=o+(r^(t=n+(s<<7&4294967295|s>>>25))&(n^r))+i[13]+4254626195&4294967295,o=t+(s<<12&4294967295|s>>>20),s=r+(n^o&(t^n))+i[14]+2792965006&4294967295,s=n+(t^(r=o+(s<<17&4294967295|s>>>15))&(o^t))+i[15]+1236535329&4294967295,s=t+(r^o&((n=r+(s<<22&4294967295|s>>>10))^r))+i[1]+4129170786&4294967295,s=o+(n^r&((t=n+(s<<5&4294967295|s>>>27))^n))+i[6]+3225465664&4294967295,o=t+(s<<9&4294967295|s>>>23),s=r+(t^n&(o^t))+i[11]+643717713&4294967295,s=n+(o^t&((r=o+(s<<14&4294967295|s>>>18))^o))+i[0]+3921069994&4294967295,s=t+(r^o&((n=r+(s<<20&4294967295|s>>>12))^r))+i[5]+3593408605&4294967295,s=o+(n^r&((t=n+(s<<5&4294967295|s>>>27))^n))+i[10]+38016083&4294967295,o=t+(s<<9&4294967295|s>>>23),s=r+(t^n&(o^t))+i[15]+3634488961&4294967295,s=n+(o^t&((r=o+(s<<14&4294967295|s>>>18))^o))+i[4]+3889429448&4294967295,s=t+(r^o&((n=r+(s<<20&4294967295|s>>>12))^r))+i[9]+568446438&4294967295,s=o+(n^r&((t=n+(s<<5&4294967295|s>>>27))^n))+i[14]+3275163606&4294967295,o=t+(s<<9&4294967295|s>>>23),s=r+(t^n&(o^t))+i[3]+4107603335&4294967295,s=n+(o^t&((r=o+(s<<14&4294967295|s>>>18))^o))+i[8]+1163531501&4294967295,s=t+(r^o&((n=r+(s<<20&4294967295|s>>>12))^r))+i[13]+2850285829&4294967295,s=o+(n^r&((t=n+(s<<5&4294967295|s>>>27))^n))+i[2]+4243563512&4294967295,o=t+(s<<9&4294967295|s>>>23),s=r+(t^n&(o^t))+i[7]+1735328473&4294967295,s=n+(o^t&((r=o+(s<<14&4294967295|s>>>18))^o))+i[12]+2368359562&4294967295,s=t+((n=r+(s<<20&4294967295|s>>>12))^r^o)+i[5]+4294588738&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^r)+i[8]+2272392833&4294967295,o=t+(s<<11&4294967295|s>>>21),s=r+(o^t^n)+i[11]+1839030562&4294967295,s=n+((r=o+(s<<16&4294967295|s>>>16))^o^t)+i[14]+4259657740&4294967295,s=t+((n=r+(s<<23&4294967295|s>>>9))^r^o)+i[1]+2763975236&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^r)+i[4]+1272893353&4294967295,o=t+(s<<11&4294967295|s>>>21),s=r+(o^t^n)+i[7]+4139469664&4294967295,s=n+((r=o+(s<<16&4294967295|s>>>16))^o^t)+i[10]+3200236656&4294967295,s=t+((n=r+(s<<23&4294967295|s>>>9))^r^o)+i[13]+681279174&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^r)+i[0]+3936430074&4294967295,o=t+(s<<11&4294967295|s>>>21),s=r+(o^t^n)+i[3]+3572445317&4294967295,s=n+((r=o+(s<<16&4294967295|s>>>16))^o^t)+i[6]+76029189&4294967295,s=t+((n=r+(s<<23&4294967295|s>>>9))^r^o)+i[9]+3654602809&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^r)+i[12]+3873151461&4294967295,o=t+(s<<11&4294967295|s>>>21),s=r+(o^t^n)+i[15]+530742520&4294967295,s=n+((r=o+(s<<16&4294967295|s>>>16))^o^t)+i[2]+3299628645&4294967295,s=t+(r^((n=r+(s<<23&4294967295|s>>>9))|~o))+i[0]+4096336452&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~r))+i[7]+1126891415&4294967295,o=t+(s<<10&4294967295|s>>>22),s=r+(t^(o|~n))+i[14]+2878612391&4294967295,s=n+(o^((r=o+(s<<15&4294967295|s>>>17))|~t))+i[5]+4237533241&4294967295,s=t+(r^((n=r+(s<<21&4294967295|s>>>11))|~o))+i[12]+1700485571&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~r))+i[3]+2399980690&4294967295,o=t+(s<<10&4294967295|s>>>22),s=r+(t^(o|~n))+i[10]+4293915773&4294967295,s=n+(o^((r=o+(s<<15&4294967295|s>>>17))|~t))+i[1]+2240044497&4294967295,s=t+(r^((n=r+(s<<21&4294967295|s>>>11))|~o))+i[8]+1873313359&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~r))+i[15]+4264355552&4294967295,o=t+(s<<10&4294967295|s>>>22),s=r+(t^(o|~n))+i[6]+2734768916&4294967295,s=n+(o^((r=o+(s<<15&4294967295|s>>>17))|~t))+i[13]+1309151649&4294967295,s=t+(r^((n=r+(s<<21&4294967295|s>>>11))|~o))+i[4]+4149444226&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~r))+i[11]+3174756917&4294967295,o=t+(s<<10&4294967295|s>>>22),s=r+(t^(o|~n))+i[2]+718787259&4294967295,s=n+(o^((r=o+(s<<15&4294967295|s>>>17))|~t))+i[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(r+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+r&4294967295,e.g[3]=e.g[3]+o&4294967295}function i(e,t){this.h=t;const n=[];let i=!0;for(let r=e.length-1;r>=0;r--){const s=0|e[r];i&&s==t||(n[r]=s,i=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return t.prototype[n].apply(e,r)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const i=t-this.blockSize,r=this.C;let s=this.h,o=0;for(;o<t;){if(0==s)for(;o<=i;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(r[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,r),s=0;break}}else for(;o<t;)if(r[s++]=e[o++],s==this.blockSize){n(this,r),s=0;break}}this.h=s,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let i=0;i<32;i+=8)e[t++]=this.g[n]>>>i&255;return e};var r={};function s(e){return-128<=e&&e<128?function(e,t){var n=r;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new i([0|e],e<0?-1:0)}):new i([0|e],e<0?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(e<0)return d(o(-e));const t=[];let n=1;for(let i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new i(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){const t=e.g.length,n=[];for(let i=0;i<t;i++)n[i]=~e.g[i];return new i(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(e.g.length>30){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,i=t;i.l(e)<=0;)n=v(n),i=v(i);var r=_(n,1),s=_(i,1);for(i=_(i,2),n=_(n,2);!u(i);){var c=s.add(i);c.l(e)<=0&&(r=r.add(n),s=c),i=_(i,1),n=_(n,1)}return t=f(e,r.j(t)),new m(r,t)}for(r=a;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),i=(i=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,i-48),c=(s=o(n)).j(t);h(c)||c.l(e)>0;)c=(s=o(n-=i)).j(t);u(s)&&(s=l),r=r.add(s),e=f(e,c)}return new m(r,e)}function v(e){const t=e.g.length+1,n=[];for(let i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new i(n,e.h)}function _(e,t){const n=t>>5;t%=32;const r=e.g.length-n,s=[];for(let i=0;i<r;i++)s[i]=t>0?e.i(i+n)>>>t|e.i(i+n+1)<<32-t:e.i(i+n);return new i(s,e.h)}(e=i.prototype).m=function(){if(h(this))return-d(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const i=this.i(n);e+=(i>=0?i:4294967296+i)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);const t=o(Math.pow(e,6));var n=this;let i="";for(;;){const r=g(n,t).g;let s=(((n=f(n,r.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(u(n=r))return s+i;for(;s.length<6;)s="0"+s;i=s+i}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let r=0;for(let i=0;i<=t;i++){let t=r+(65535&this.i(i))+(65535&e.i(i)),s=(t>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=s>>>16,t&=65535,s&=65535,n[i]=s<<16|t}return new i(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(this.l(c)<0&&e.l(c)<0)return o(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){const i=this.i(r)>>>16,s=65535&this.i(r),o=e.i(t)>>>16,a=65535&e.i(t);n[2*r+2*t]+=s*a,p(n,2*r+2*t),n[2*r+2*t+1]+=i*a,p(n,2*r+2*t+1),n[2*r+2*t+1]+=s*o,p(n,2*r+2*t+1),n[2*r+2*t+2]+=i*o,p(n,2*r+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new i(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new i(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new i(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new i(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,Jr.Md5=t,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.B,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=o,i.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const i=o(Math.pow(n,8));let r=a;for(let a=0;a<t.length;a+=8){var s=Math.min(8,t.length-a);const e=parseInt(t.substring(a,a+s),n);s<8?(s=o(Math.pow(n,s)),r=r.j(s).add(o(e))):(r=r.j(i),r=r.add(o(e)))}return r},Qr=Jr.Integer=i}).apply("undefined"!==typeof $r?$r:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Xr,es,ts,ns,is,rs,ss,os,as="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ls={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof as&&as];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function i(e,i){if(i)e:{var r=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in r))break e;r=r[o]}(i=i(s=r[e=e[e.length-1]]))!=s&&null!=i&&t(r,e,{configurable:!0,writable:!0,value:i})}}i("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var r=r||{},s=this||self;function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=a).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return t.prototype[n].apply(e,r)}}var h="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function d(e){const t=e.length;if(t>0){const n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function f(e,t){for(let i=1;i<arguments.length;i++){const t=arguments[i];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const i=t.length||0;e.length=n+i;for(let r=0;r<i;r++)e[n+r]=t[r]}else e.push(t)}}function p(e){s.setTimeout(()=>{throw e},0)}function m(){var e=b;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new v,e=>e.reset());class v{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let _,y=!1,b=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},w=()=>{const e=Promise.resolve(void 0);_=()=>{e.then(E)}};function E(){for(var e;e=m();){try{e.h.call(e.g)}catch(n){p(n)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}y=!1}function S(){this.u=this.u,this.C=this.C}function x(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},x.prototype.h=function(){this.defaultPrevented=!0};var k=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function C(e){return/^[\s\xa0]*$/.test(e)}function T(e,t){x.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(T,x),T.prototype.init=function(e,t){const n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&T.Z.h.call(this)},T.prototype.h=function(){T.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var I="closure_listenable_"+(1e6*Math.random()|0),N=0;function P(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.ha=r,this.key=++N,this.da=this.fa=!1}function A(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function L(e,t,n){for(const i in e)t.call(n,e[i],i,e)}function R(e){const t={};for(const n in e)t[n]=e[n];return t}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(e,t){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)e[n]=i[n];for(let t=0;t<O.length;t++)n=O[t],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function D(e){this.src=e,this.g={},this.h=0}function j(e,t){const n=t.type;if(n in e.g){var i,r=e.g[n],s=Array.prototype.indexOf.call(r,t,void 0);(i=s>=0)&&Array.prototype.splice.call(r,s,1),i&&(A(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function F(e,t,n,i){for(let r=0;r<e.length;++r){const s=e[r];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==i)return r}return-1}D.prototype.add=function(e,t,n,i,r){const s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);const o=F(e,t,i,r);return o>-1?(t=e[o],n||(t.fa=!1)):((t=new P(t,this.src,s,!!i,r)).fa=n,e.push(t)),t};var z="closure_lm_"+(1e6*Math.random()|0),U={};function V(e,t,n,i,r){if(i&&i.once)return H(e,t,n,i,r);if(Array.isArray(t)){for(let s=0;s<t.length;s++)V(e,t[s],n,i,r);return null}return n=Q(n),e&&e[I]?e.J(t,n,o(i)?!!i.capture:!!i,r):B(e,t,n,!1,i,r)}function B(e,t,n,i,r,s){if(!t)throw Error("Invalid event type");const a=o(r)?!!r.capture:!!r;let l=G(e);if(l||(e[z]=l=new D(e)),(n=l.add(t,n,i,a,s)).proxy)return n;if(i=function(){function e(n){return t.call(e.src,e.listener,n)}const t=K;return e}(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)k||(r=a),void 0===r&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(Z(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return n}function H(e,t,n,i,r){if(Array.isArray(t)){for(let s=0;s<t.length;s++)H(e,t[s],n,i,r);return null}return n=Q(n),e&&e[I]?e.K(t,n,o(i)?!!i.capture:!!i,r):B(e,t,n,!0,i,r)}function q(e,t,n,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)q(e,t[s],n,i,r);else i=o(i)?!!i.capture:!!i,n=Q(n),e&&e[I]?(e=e.i,(s=String(t).toString())in e.g&&((n=F(t=e.g[s],n,i,r))>-1&&(A(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[s],e.h--)))):e&&(e=G(e))&&(t=e.g[t.toString()],e=-1,t&&(e=F(t,n,i,r)),(n=e>-1?t[e]:null)&&W(n))}function W(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[I])j(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(Z(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=G(t))?(j(n,e),0==n.h&&(n.src=null,t[z]=null)):A(e)}}}function Z(e){return e in U?U[e]:U[e]="on"+e}function K(e,t){if(e.da)e=!0;else{t=new T(t,this);const n=e.listener,i=e.ha||e.src;e.fa&&W(e),e=n.call(i,t)}return e}function G(e){return(e=e[z])instanceof D?e:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function Q(e){return"function"===typeof e?e:(e[Y]||(e[Y]=function(t){return e.handleEvent(t)}),e[Y])}function $(){S.call(this),this.i=new D(this),this.M=this,this.G=null}function J(e,t){var n,i=e.G;if(i)for(n=[];i;i=i.G)n.push(i);if(e=e.M,i=t.type||t,"string"===typeof t)t=new x(t,e);else if(t instanceof x)t.target=t.target||e;else{var r=t;M(t=new x(i,e),r)}let s,o;if(r=!0,n)for(o=n.length-1;o>=0;o--)s=t.g=n[o],r=X(s,i,!0,t)&&r;if(s=t.g=e,r=X(s,i,!0,t)&&r,r=X(s,i,!1,t)&&r,n)for(o=0;o<n.length;o++)s=t.g=n[o],r=X(s,i,!1,t)&&r}function X(e,t,n,i){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let r=!0;for(let s=0;s<t.length;++s){const o=t[s];if(o&&!o.da&&o.capture==n){const t=o.listener,n=o.ha||o.src;o.fa&&j(e.i,o),r=!1!==t.call(n,i)&&r}}return r&&!i.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:s.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u($,S),$.prototype[I]=!0,$.prototype.removeEventListener=function(e,t,n,i){q(this,e,t,n,i)},$.prototype.N=function(){if($.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)A(n[e]);delete e.g[t],e.h--}}this.G=null},$.prototype.J=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)},$.prototype.K=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};class te extends S{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){S.call(this),this.h=e,this.g={}}u(ne,S);var ie=[];function re(e){L(e.g,function(e,t){this.g.hasOwnProperty(t)&&W(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),re(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var se=s.JSON.stringify,oe=s.JSON.parse,ae=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function le(){}function ce(){}var ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function he(){x.call(this,"d")}function de(){x.call(this,"c")}u(he,x),u(de,x);var fe={},pe=null;function me(){return pe=pe||new $}function ge(e){x.call(this,fe.Ia,e)}function ve(e){const t=me();J(t,new ge(t))}function _e(e,t){x.call(this,fe.STAT_EVENT,e),this.stat=t}function ye(e){const t=me();J(t,new _e(t,e))}function be(e,t){x.call(this,fe.Ja,e),this.size=t}function we(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Ee(){this.g=!0}function Se(e,t,n,i){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const s=JSON.parse(t);if(s)for(e=0;e<s.length;e++)if(Array.isArray(s[e])){var n=s[e];if(!(n.length<2)){var i=n[1];if(Array.isArray(i)&&!(i.length<1)){var r=i[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(let e=1;e<i.length;e++)i[e]=""}}}return se(s)}catch(s){return t}}(e,n)+(i?" "+i:"")})}fe.Ia="serverreachability",u(ge,x),fe.STAT_EVENT="statevent",u(_e,x),fe.Ja="timingevent",u(be,x),Ee.prototype.ua=function(){this.g=!1},Ee.prototype.info=function(){};var xe,ke={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ce={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Te(){}function Ie(e){return encodeURIComponent(String(e))}function Ne(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Pe(e,t,n,i){this.j=e,this.i=t,this.l=n,this.S=i||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ae}function Ae(){this.i=null,this.g="",this.h=!1}u(Te,le),Te.prototype.g=function(){return new XMLHttpRequest},xe=new Te;var Le={},Re={};function Oe(e,t,n){e.M=1,e.A=st(et(t)),e.u=n,e.R=!0,Me(e,null)}function Me(e,t){e.F=Date.now(),Fe(e),e.B=et(e.A);var n=e.B,i=e.S;Array.isArray(i)||(i=[String(i)]),yt(n.i,"t",i),e.C=0,n=e.j.L,e.h=new Ae,e.g=on(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,i=e.ba;var r="readystatechange";Array.isArray(r)||(r&&(ie[0]=r.toString()),r=ie);for(let s=0;s<r.length;s++){const e=V(n,r[s],i||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?R(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ve(),function(e,t,n,i,r,s){e.info(function(){if(e.g)if(s){var o="",a=s.split("&");for(let e=0;e<a.length;e++){var l=a[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");o=t.length>=2&&"type"==t[1]?o+(e+"=")+l+"&":o+(e+"=redacted&")}}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.v,e.B,e.l,e.S,e.u)}function De(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function je(e,t){var n=e.C,i=t.indexOf("\n",n);return-1==i?Re:(n=Number(t.substring(n,i)),isNaN(n)?Le:(i+=1)+n>t.length?Re:(t=t.slice(i,i+n),e.C=i+n,t))}function Fe(e){e.T=Date.now()+e.H,ze(e,e.H)}function ze(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=we(l(e.aa,e),t)}function Ue(e){e.D&&(s.clearTimeout(e.D),e.D=null)}function Ve(e){0==e.j.I||e.K||en(e.j,e)}function Be(e){Ue(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,re(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function He(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Ge(n.h,e)))if(!e.L&&Ge(n.h,e)&&3==n.I){try{var i=n.Ba.g.parse(t)}catch(u){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;Xt(n),Ht(n)}Qt(n),ye(18)}}else n.xa=r[1],0<n.xa-n.K&&r[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=we(l(n.Va,n),6e3));Ke(n.h)<=1&&n.ta&&(n.ta=void 0)}else nn(n,11)}else if((e.L||n.g==e)&&Xt(n),!C(t))for(r=n.Ba.g.parse(t),t=0;t<r.length;t++){let l=r[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const r=l[4];null!=r&&(n.za=r,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(i=1.5*u,n.O=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=i.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Ye(s,s.h),s.h=null))}if(i.G){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(i.wa=e,rt(i.J,i.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var o=e;if((i=n).na=sn(i,i.L?i.ba:null,i.W),o.L){Qe(i.h,o);var a=o,c=i.O;c&&(a.H=c),a.D&&(Ue(a),Fe(a)),i.g=o}else Yt(i);n.i.length>0&&Wt(n)}else"stop"!=l[0]&&"close"!=l[0]||nn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?nn(n,7):Bt(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}ve()}catch(u){}}Pe.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Ft(e)?t.j():this.Y(e)},Pe.prototype.Y=function(e){try{if(e==this.g)e:{const l=Ft(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||zt(this.g)))){this.K||4!=l||7==c||ve(),Ue(this);var t=this.g.ca();this.X=t;var n=function(e){if(!De(e))return e.g.la();const t=zt(e.g);if(""===t)return"";let n="";const i=t.length,r=4==Ft(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return Be(e),Ve(e),"";e.h.i=new s.TextDecoder}for(let s=0;s<i;s++)e.h.h=!0,n+=e.h.i.decode(t[s],{stream:!(r&&s==i-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,i,r,s,o){e.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var i,r=this.g;if((i=r.g?r.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(i)){var o=i;break t}}o=null}if(!(e=o)){this.o=!1,this.m=3,ye(12),Be(this),Ve(this);break e}Se(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,He(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=je(this,n),t==Re){4==l&&(this.m=4,ye(14),e=!1),Se(this.i,this.l,null,"[Incomplete Response]");break}if(t==Le){this.m=4,ye(15),Se(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Se(this.i,this.l,t,null),He(this,t)}if(De(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,ye(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var a=this.j;a.g==this&&a.aa&&!a.P&&(a.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),$t(a),a.P=!0,ye(11))}}else Se(this.i,this.l,n,"[Invalid Chunked Response]"),Be(this),Ve(this)}else Se(this.i,this.l,n,null),He(this,n);4==l&&Be(this),this.o&&!this.K&&(4==l?en(this.j,this):(this.o=!1,Fe(this)))}else(function(e){const t={};e=(e.g&&Ft(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<e.length;i++){if(C(e[i]))continue;var n=Ne(e[i]);const r=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[r]||[];t[r]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,ye(12)):(this.m=0,ye(13)),Be(this),Ve(this)}}}catch(Bs){}},Pe.prototype.cancel=function(){this.K=!0,Be(this)},Pe.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ve(),ye(17)),Be(this),this.m=2,Ve(this)):ze(this,this.T-e)};var qe=class{constructor(e,t){this.g=e,this.map=t}};function We(e){this.l=e||10,s.PerformanceNavigationTiming?e=(e=s.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ze(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ke(e){return e.h?1:e.g?e.g.size:0}function Ge(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ye(e,t){e.g?e.g.add(t):e.h=t}function Qe(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function $e(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return d(e.i)}We.prototype.cancel=function(){if(this.i=$e(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Je=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xe(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof Xe?(this.l=e.l,tt(this,e.j),this.o=e.o,this.g=e.g,nt(this,e.u),this.h=e.h,it(this,bt(e.i)),this.m=e.m):e&&(t=String(e).match(Je))?(this.l=!1,tt(this,t[1]||"",!0),this.o=ot(t[2]||""),this.g=ot(t[3]||"",!0),nt(this,t[4]),this.h=ot(t[5]||"",!0),it(this,t[6]||"",!0),this.m=ot(t[7]||"")):(this.l=!1,this.i=new pt(null,this.l))}function et(e){return new Xe(e)}function tt(e,t,n){e.j=n?ot(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function it(e,t,n){t instanceof pt?(e.i=t,function(e,t){t&&!e.j&&(mt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(gt(this,t),yt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=at(t,dt)),e.i=new pt(t,e.l))}function rt(e,t,n){e.i.set(t,n)}function st(e){return rt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ot(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function at(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,lt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function lt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Xe.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(at(t,ct,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(at(t,ct,!0),"@"),e.push(Ie(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(at(n,"/"==n.charAt(0)?ht:ut,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",at(n,ft)),e.join("")},Xe.prototype.resolve=function(e){const t=et(this);let n=!!e.j;n?tt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var i=e.h;if(n)nt(t,e.u);else if(n=!!e.h){if("/"!=i.charAt(0))if(this.g&&!this.h)i="/"+i;else{var r=t.h.lastIndexOf("/");-1!=r&&(i=t.h.slice(0,r+1)+i)}if(".."==(r=i)||"."==r)i="";else if(-1!=r.indexOf("./")||-1!=r.indexOf("/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");const e=[];for(let t=0;t<r.length;){const n=r[t++];"."==n?i&&t==r.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),i&&t==r.length&&e.push("")):(e.push(n),i=!0)}i=e.join("/")}else i=r}return n?t.h=i:n=""!==e.i.toString(),n?it(t,bt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var ct=/[#\/\?@]/g,ut=/[#\?:]/g,ht=/[#\?]/g,dt=/[#\?@]/g,ft=/#/g;function pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function mt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const i=e[n].indexOf("=");let r,s=null;i>=0?(r=e[n].substring(0,i),s=e[n].substring(i+1)):r=e[n],t(r,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function gt(e,t){mt(e),t=wt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function vt(e,t){return mt(e),t=wt(e,t),e.g.has(t)}function _t(e,t){mt(e);let n=[];if("string"===typeof t)vt(e,t)&&(n=n.concat(e.g.get(wt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function yt(e,t,n){gt(e,t),n.length>0&&(e.i=null,e.g.set(wt(e,t),d(n)),e.h+=n.length)}function bt(e){const t=new pt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function wt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Et(e,t,n,i,r){try{r&&(r.onload=null,r.onerror=null,r.onabort=null,r.ontimeout=null),i(n)}catch(s){}}function St(){this.g=new ae}function xt(e){this.i=e.Sb||null,this.h=e.ab||!1}function kt(e,t){$.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Ct(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Tt(e){e.readyState=4,e.l=null,e.j=null,e.B=null,It(e)}function It(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Nt(e){let t="";return L(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Pt(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=Nt(n),"string"===typeof e?null!=n&&Ie(n):rt(e,t,n))}function At(e){$.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=pt.prototype).add=function(e,t){mt(this),this.i=null,e=wt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){mt(this),this.g.forEach(function(n,i){n.forEach(function(n){e.call(t,n,i,this)},this)},this)},e.set=function(e,t){return mt(this),this.i=null,vt(this,e=wt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=_t(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let i=0;i<t.length;i++){var n=t[i];const r=Ie(n);n=_t(this,n);for(let t=0;t<n.length;t++){let i=r;""!==n[t]&&(i+="="+Ie(n[t])),e.push(i)}}return this.i=e.join("&")},u(xt,le),xt.prototype.g=function(){return new kt(this.i,this.h)},u(kt,$),(e=kt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,It(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||s).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Tt(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,It(this)),this.g&&(this.readyState=3,It(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ct(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Tt(this):It(this),3==this.readyState&&Ct(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Tt(this))},e.Na=function(e){this.g&&(this.response=e,Tt(this))},e.ga=function(){this.g&&Tt(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(kt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(At,$);var Lt=/^https?$/i,Rt=["POST","PUT"];function Ot(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Mt(e),jt(e)}function Mt(e){e.A||(e.A=!0,J(e,"complete"),J(e,"error"))}function Dt(e){if(e.h&&"undefined"!=typeof r)if(e.v&&4==Ft(e))setTimeout(e.Ca.bind(e),0);else if(J(e,"readystatechange"),4==Ft(e)){e.h=!1;try{const r=e.ca();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){let t=String(e.D).match(Je)[1]||null;!t&&s.self&&s.self.location&&(t=s.self.location.protocol.slice(0,-1)),i=!Lt.test(t?t.toLowerCase():"")}n=i}if(n)J(e,"complete"),J(e,"success");else{e.o=6;try{var o=Ft(e)>2?e.g.statusText:""}catch(a){o=""}e.l=o+" ["+e.ca()+"]",Mt(e)}}finally{jt(e)}}}function jt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const i=e.g;e.g=null,t||J(e,"ready");try{i.onreadystatechange=null}catch(n){}}}function Ft(e){return e.g?e.g.readyState:0}function zt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ut(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Vt(e){this.za=0,this.i=[],this.j=new Ee,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ut("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ut("baseRetryDelayMs",5e3,e),this.Za=Ut("retryDelaySeedMs",1e4,e),this.Ta=Ut("forwardChannelMaxRetries",2,e),this.va=Ut("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new We(e&&e.concurrentRequestLimit),this.Ba=new St,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function Bt(e){if(qt(e),3==e.I){var t=e.V++,n=et(e.J);if(rt(n,"SID",e.M),rt(n,"RID",t),rt(n,"TYPE","terminate"),Kt(e,n),(t=new Pe(e,e.j,t)).M=2,t.A=st(et(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.A.toString(),"")}catch(i){}!n&&s.Image&&((new Image).src=t.A,n=!0),n||(t.g=on(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Fe(t)}rn(e)}function Ht(e){e.g&&($t(e),e.g.cancel(),e.g=null)}function qt(e){Ht(e),e.v&&(s.clearTimeout(e.v),e.v=null),Xt(e),e.h.cancel(),e.m&&("number"===typeof e.m&&s.clearTimeout(e.m),e.m=null)}function Wt(e){if(!Ze(e.h)&&!e.m){e.m=!0;var t=e.Ea;_||w(),y||(_(),y=!0),b.add(t,e),e.D=0}}function Zt(e,t){var n;n=t?t.l:e.V++;const i=et(e.J);rt(i,"SID",e.M),rt(i,"RID",n),rt(i,"AID",e.K),Kt(e,i),e.u&&e.o&&Pt(i,e.u,e.o),n=new Pe(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Gt(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Ye(e.h,n),Oe(n,i,t)}function Kt(e,t){e.H&&L(e.H,function(e,n){rt(t,n,e)}),e.l&&L({},function(e,n){rt(t,n,e)})}function Gt(e,t,n){n=Math.min(e.i.length,n);const i=e.l?l(e.l.Ka,e.l,e):null;e:{var r=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=r[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var s=r[c].g;const n=r[c].map;if((s-=t)<0)t=Math.max(0,r[c].g-100),l=!1;else try{s="req"+s+"_"||0;try{var a=n instanceof Map?n:Object.entries(n);for(const[t,n]of a){let i=n;o(n)&&(i=se(n)),e.push(s+t+"="+encodeURIComponent(i))}}catch(us){throw e.push(s+"type="+encodeURIComponent("_badmap")),us}}catch(us){i&&i(n)}}if(l){a=e.join("&");break e}}a=void 0}return e=e.i.splice(0,n),t.G=e,a}function Yt(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;_||w(),y||(_(),y=!0),b.add(t,e),e.A=0}}function Qt(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=we(l(e.Da,e),tn(e,e.A)),e.A++,!0)}function $t(e){null!=e.B&&(s.clearTimeout(e.B),e.B=null)}function Jt(e){e.g=new Pe(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=et(e.na);rt(t,"RID","rpc"),rt(t,"SID",e.M),rt(t,"AID",e.K),rt(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&rt(t,"TO",e.ia),rt(t,"TYPE","xmlhttp"),Kt(e,t),e.u&&e.o&&Pt(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=st(et(t)),n.u=null,n.R=!0,Me(n,e)}function Xt(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function en(e,t){var n=null;if(e.g==t){Xt(e),$t(e),e.g=null;var i=2}else{if(!Ge(e.h,t))return;n=t.G,Qe(e.h,t),i=1}if(0!=e.I)if(t.o)if(1==i){n=t.u?t.u.length:0,t=Date.now()-t.F;var r=e.D;J(i=me(),new be(i,n)),Wt(e)}else Yt(e);else if(3==(r=t.m)||0==r&&t.X>0||!(1==i&&function(e,t){return!(Ke(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=we(l(e.Ea,e,t),tn(e,e.D)),e.D++,!0))}(e,t)||2==i&&Qt(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),r){case 1:nn(e,5);break;case 4:nn(e,10);break;case 3:nn(e,6);break;default:nn(e,2)}}function tn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function nn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),i=e.Ua;const t=!i;i=new Xe(i||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||tt(i,"https"),st(i),t?function(e,t){const n=new Ee;if(s.Image){const i=new Image;i.onload=c(Et,n,"TestLoadImage: loaded",!0,t,i),i.onerror=c(Et,n,"TestLoadImage: error",!1,t,i),i.onabort=c(Et,n,"TestLoadImage: abort",!1,t,i),i.ontimeout=c(Et,n,"TestLoadImage: timeout",!1,t,i),s.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=e}else t(!1)}(i.toString(),n):function(e,t){new Ee;const n=new AbortController,i=setTimeout(()=>{n.abort(),Et(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(i),e.ok?Et(0,0,!0,t):Et(0,0,!1,t)}).catch(()=>{clearTimeout(i),Et(0,0,!1,t)})}(i.toString(),n)}else ye(2);e.I=0,e.l&&e.l.pa(t),rn(e),qt(e)}function rn(e){if(e.I=0,e.ja=[],e.l){const t=$e(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.oa()}}function sn(e,t,n){var i=n instanceof Xe?et(n):new Xe(n);if(""!=i.g)t&&(i.g=t+"."+i.g),nt(i,i.u);else{var r=s.location;i=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;const e=new Xe(null);i&&tt(e,i),t&&(e.g=t),r&&nt(e,r),n&&(e.h=n),i=e}return n=e.G,t=e.wa,n&&t&&rt(i,n,t),rt(i,"VER",e.ka),Kt(e,i),i}function on(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new At(new xt({ab:n})):new At(e.ma)).Fa(e.L),t}function an(){}function ln(){}function cn(e,t){$.call(this),this.g=new Vt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!C(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!C(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new dn(this)}function un(e){he.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function hn(){de.call(this),this.status=1}function dn(e){this.g=e}(e=At.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xe.g(),this.g.onreadystatechange=h(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Ot(this,o)}if(e=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const e of i.keys())n.set(e,i.get(e))}i=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),r=s.FormData&&e instanceof s.FormData,!(Array.prototype.indexOf.call(Rt,t,void 0)>=0)||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(o){Ot(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,J(this,"complete"),J(this,"abort"),jt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jt(this,!0)),At.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Dt(this):this.Xa())},e.Xa=function(){Dt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Ft(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),oe(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Vt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,i){ye(0),this.W=e,this.H=t||{},n&&void 0!==i&&(this.H.OSID=n,this.H.OAID=i),this.F=this.X,this.J=sn(this,null,this.W),Wt(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const r=new Pe(this,this.j,e);let s=this.o;if(this.U&&(s?(s=R(s),M(s,this.U)):s=this.U),null!==this.u||this.R||(r.J=s,s=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var i=this.i[n];if(void 0===(i="__data__"in i.map&&"string"===typeof(i=i.map.__data__)?i.length:void 0))break;if((t+=i)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Gt(this,r,t),rt(n=et(this.J),"RID",e),rt(n,"CVER",22),this.G&&rt(n,"X-HTTP-Session-Id",this.G),Kt(this,n),s&&(this.R?t="headers="+Ie(Nt(s))+"&"+t:this.u&&Pt(n,this.u,s)),Ye(this.h,r),this.Ra&&rt(n,"TYPE","init"),this.S?(rt(n,"$req",t),rt(n,"SID","null"),r.U=!0,Oe(r,n,null)):Oe(r,n,t),this.I=2}}else 3==this.I&&(e?Zt(this,e):0==this.i.length||Ze(this.h)||Zt(this))},e.Da=function(){if(this.v=null,Jt(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=we(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ye(10),Ht(this),Jt(this))},e.Va=function(){null!=this.C&&(this.C=null,Ht(this),Qt(this),ye(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),ye(2)):(this.j.info("Failed to ping google.com"),ye(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=an.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},ln.prototype.g=function(e,t){return new cn(e,t)},u(cn,$),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){Bt(this.g)},cn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=se(e),e=n);t.i.push(new qe(t.Ya++,e)),3==t.I&&Wt(t)},cn.prototype.N=function(){this.g.l=null,delete this.j,Bt(this.g),delete this.g,cn.Z.N.call(this)},u(un,he),u(hn,de),u(dn,an),dn.prototype.ra=function(){J(this.g,"a")},dn.prototype.qa=function(e){J(this.g,new un(e))},dn.prototype.pa=function(e){J(this.g,new hn)},dn.prototype.oa=function(){J(this.g,"b")},ln.prototype.createWebChannel=ln.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,os=ls.createWebChannelTransport=function(){return new ln},ss=ls.getStatEventTarget=function(){return me()},rs=ls.Event=fe,is=ls.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ke.NO_ERROR=0,ke.TIMEOUT=8,ke.HTTP_ERROR=6,ns=ls.ErrorCode=ke,Ce.COMPLETE="complete",ts=ls.EventType=Ce,ce.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",$.prototype.listen=$.prototype.J,es=ls.WebChannel=ce,ls.FetchXmlHttpFactory=xt,At.prototype.listenOnce=At.prototype.K,At.prototype.getLastError=At.prototype.Ha,At.prototype.getLastErrorCode=At.prototype.ya,At.prototype.getStatus=At.prototype.ca,At.prototype.getResponseJson=At.prototype.La,At.prototype.getResponseText=At.prototype.la,At.prototype.send=At.prototype.ea,At.prototype.setWithCredentials=At.prototype.Fa,Xr=ls.XhrIo=At}).apply("undefined"!==typeof as?as:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const cs="@firebase/firestore",us="4.9.2";class hs{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hs.UNAUTHENTICATED=new hs(null),hs.GOOGLE_CREDENTIALS=new hs("google-credentials-uid"),hs.FIRST_PARTY=new hs("first-party-uid"),hs.MOCK_USER=new hs("mock-user");let ds="12.3.0";const fs=new yt.Vy("@firebase/firestore");function ps(){return fs.logLevel}function ms(e){if(fs.logLevel<=yt.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(_s);fs.debug("Firestore (".concat(ds,"): ").concat(e),...r)}}function gs(e){if(fs.logLevel<=yt.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(_s);fs.error("Firestore (".concat(ds,"): ").concat(e),...r)}}function vs(e){if(fs.logLevel<=yt.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(_s);fs.warn("Firestore (".concat(ds,"): ").concat(e),...r)}}function _s(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function ys(e,t,n){let i="Unexpected state";"string"==typeof t?i=t:n=t,bs(e,i,n)}function bs(e,t,n){let i="FIRESTORE (".concat(ds,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{i+=" CONTEXT: "+JSON.stringify(n)}catch(e){i+=" CONTEXT: "+n}throw gs(i),new Error(i)}function ws(e,t,n,i){let r="Unexpected state";"string"==typeof n?r=n:i=n,e||bs(t,r,i)}function Es(e,t){return e}const Ss={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xs extends _t.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class ks{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Cs{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Ts{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(hs.UNAUTHENTICATED))}shutdown(){}}class Is{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ns{constructor(e){this.t=e,this.currentUser=hs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ws(void 0===this.o,42304);let n=this.i;const i=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let r=new ks;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new ks,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const t=r;e.enqueueRetryable(async()=>{await t.promise,await i(this.currentUser)})},o=e=>{ms("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(ms("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new ks)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(ms("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(ws("string"==typeof t.accessToken,31837,{l:t}),new Cs(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ws(null===e||"string"==typeof e,2055,{h:e}),new hs(e)}}class Ps{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=hs.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class As{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Ps(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(hs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ls{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Rs{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,(0,vt.xZ)(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ws(void 0===this.o,3512);const n=e=>{null!=e.error&&ms("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,ms("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const i=e=>{ms("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>i(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?i(e):ms("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ls(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(ws("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Ls(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Os(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}class Ms{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Os(40);for(let i=0;i<n.length;++i)t.length<20&&n[i]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[i]%62))}return t}}function Ds(e,t){return e<t?-1:e>t?1:0}function js(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const n=e.charAt(i),r=t.charAt(i);if(n!==r)return Us(n)===Us(r)?Ds(n,r):Us(n)?1:-1}return Ds(e.length,t.length)}const Fs=55296,zs=57343;function Us(e){const t=e.charCodeAt(0);return t>=Fs&&t<=zs}function Vs(e,t,n){return e.length===t.length&&e.every((e,i)=>n(e,t[i]))}const Bs="__name__";class Hs{constructor(e,t,n){void 0===t?t=0:t>e.length&&ys(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&ys(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Hs.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Hs?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const n=Hs.compareSegments(e.get(i),t.get(i));if(0!==n)return n}return Ds(e.length,t.length)}static compareSegments(e,t){const n=Hs.isNumericId(e),i=Hs.isNumericId(t);return n&&!i?-1:!n&&i?1:n&&i?Hs.extractNumericId(e).compare(Hs.extractNumericId(t)):js(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qr.fromString(e.substring(4,e.length-2))}}class qs extends Hs{construct(e,t,n){return new qs(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n){if(r.indexOf("//")>=0)throw new xs(Ss.INVALID_ARGUMENT,"Invalid segment (".concat(r,"). Paths must not contain // in them."));e.push(...r.split("/").filter(e=>e.length>0))}return new qs(e)}static emptyPath(){return new qs([])}}const Ws=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zs extends Hs{construct(e,t,n){return new Zs(e,t,n)}static isValidIdentifier(e){return Ws.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Bs}static keyField(){return new Zs([Bs])}static fromServerFormat(e){const t=[];let n="",i=0;const r=()=>{if(0===n.length)throw new xs(Ss.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;i<e.length;){const t=e[i];if("\\"===t){if(i+1===e.length)throw new xs(Ss.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[i+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new xs(Ss.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,i+=2}else"`"===t?(s=!s,i++):"."!==t||s?(n+=t,i++):(r(),i++)}if(r(),s)throw new xs(Ss.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zs(t)}static emptyPath(){return new Zs([])}}class Ks{constructor(e){this.path=e}static fromPath(e){return new Ks(qs.fromString(e))}static fromName(e){return new Ks(qs.fromString(e).popFirst(5))}static empty(){return new Ks(qs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===qs.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return qs.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ks(new qs(e.slice()))}}function Gs(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Ys(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":ys(12329,{type:typeof e})}function Qs(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new xs(Ss.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ys(e);throw new xs(Ss.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function $s(e,t){const n={typeString:e};return t&&(n.value=t),n}function Js(e,t){if(!Gs(e))throw new xs(Ss.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const r=t[i].typeString,s="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n="JSON missing required field: '".concat(i,"'");break}const o=e[i];if(r&&typeof o!==r){n="JSON field '".concat(i,"' must be a ").concat(r,".");break}if(void 0!==s&&o!==s.value){n="Expected '".concat(i,"' field to equal '").concat(s.value,"'");break}}if(n)throw new xs(Ss.INVALID_ARGUMENT,n);return!0}const Xs=-62135596800,eo=1e6;class to{static now(){return to.fromMillis(Date.now())}static fromDate(e){return to.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*eo);return new to(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xs(Ss.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xs(Ss.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Xs)throw new xs(Ss.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xs(Ss.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/eo}_compareTo(e){return this.seconds===e.seconds?Ds(this.nanoseconds,e.nanoseconds):Ds(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:to._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Js(e,to._jsonSchema))return new to(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Xs;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}to._jsonSchemaVersion="firestore/timestamp/1.0",to._jsonSchema={type:$s("string",to._jsonSchemaVersion),seconds:$s("number"),nanoseconds:$s("number")};class no{static fromTimestamp(e){return new no(e)}static min(){return new no(new to(0,0))}static max(){return new no(new to(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const io=-1;class ro{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}ro.UNKNOWN_ID=-1;function so(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=no.fromTimestamp(1e9===i?new to(n+1,0):new to(n,i));return new ao(r,Ks.empty(),t)}function oo(e){return new ao(e.readTime,e.key,io)}class ao{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ao(no.min(),Ks.empty(),io)}static max(){return new ao(no.max(),Ks.empty(),io)}}function lo(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ks.comparator(e.documentKey,t.documentKey),0!==n?n:Ds(e.largestBatchId,t.largestBatchId))}class co{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class uo{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ys(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new uo((n,i)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,i)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof uo?t:uo.resolve(t)}catch(e){return uo.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):uo.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):uo.reject(t)}static resolve(e){return new uo((t,n)=>{t(e)})}static reject(e){return new uo((t,n)=>{n(e)})}static waitFor(e){return new uo((t,n)=>{let i=0,r=0,s=!1;e.forEach(e=>{++i,e.next(()=>{++r,s&&r===i&&t()},e=>n(e))}),s=!0,r===i&&t()})}static or(e){let t=uo.resolve(!1);for(const n of e)t=t.next(e=>e?uo.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,i)=>{n.push(t.call(this,e,i))}),this.waitFor(n)}static mapArray(e,t){return new uo((n,i)=>{const r=e.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===r&&n(s)},e=>i(e))}})}static doWhile(e,t){return new uo((n,i)=>{const r=()=>{!0===e()?t().next(()=>{r()},i):n()};r()})}}function ho(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function fo(e){return"IndexedDbTransactionError"===e.name}class po{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}po.ce=-1;const mo=-1;function go(e){return null==e}function vo(e){return 0===e&&1/e==-1/0}const _o="remoteDocuments",yo="owner",bo="mutationQueues",wo="mutations";const Eo="documentMutations",So="remoteDocumentsV14",xo="remoteDocumentGlobal",ko="targets",Co="targetDocuments",To="targetGlobal",Io="collectionParents",No="clientMetadata",Po="bundles",Ao="namedQueries",Lo="indexConfiguration",Ro="indexState",Oo="indexEntries",Mo="documentOverlays",Do="globals",jo=[bo,wo,Eo,_o,ko,yo,To,Co,No,xo,Io,Po,Ao],Fo=[bo,wo,Eo,So,ko,yo,To,Co,No,xo,Io,Po,Ao,Mo],zo=Fo,Uo=[...zo,Lo,Ro,Oo];function Vo(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Bo(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ho(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class qo{constructor(e,t){this.comparator=e,this.root=t||Zo.EMPTY}insert(e,t){return new qo(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zo.BLACK,null,null))}remove(e){return new qo(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(0===i)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wo(this.root,e,this.comparator,!0)}}class Wo{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,t&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zo{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:Zo.RED,this.left=null!=i?i:Zo.EMPTY,this.right=null!=r?r:Zo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,r){return new Zo(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Zo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Zo.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ys(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ys(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ys(27949);return e+(this.isRed()?0:1)}}Zo.EMPTY=null,Zo.RED=!0,Zo.BLACK=!1,Zo.EMPTY=new class{constructor(){this.size=0}get key(){throw ys(57766)}get value(){throw ys(16141)}get color(){throw ys(16727)}get left(){throw ys(29726)}get right(){throw ys(36894)}copy(e,t,n,i,r){return this}insert(e,t,n){return new Zo(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ko{constructor(e){this.comparator=e,this.data=new qo(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Go(this.data.getIterator())}getIteratorFrom(e){return new Go(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Ko))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(e,i))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ko(this.comparator);return t.data=e,t}}class Go{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Yo{constructor(e){this.fields=e,e.sort(Zs.comparator)}static empty(){return new Yo([])}unionWith(e){let t=new Ko(Zs.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Yo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vs(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Qo extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class $o{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Qo("Invalid base64 string: "+e):e}}(e);return new $o(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new $o(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ds(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$o.EMPTY_BYTE_STRING=new $o("");const Jo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xo(e){if(ws(!!e,39018),"string"==typeof e){let t=0;const n=Jo.exec(e);if(ws(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ea(e.seconds),nanos:ea(e.nanos)}}function ea(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ta(e){return"string"==typeof e?$o.fromBase64String(e):$o.fromUint8Array(e)}const na="server_timestamp",ia="__type__",ra="__previous_value__",sa="__local_write_time__";function oa(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[ia])||void 0===t?void 0:t.stringValue)===na}function aa(e){const t=e.mapValue.fields[ra];return oa(t)?aa(t):t}function la(e){const t=Xo(e.mapValue.fields[sa].timestampValue);return new to(t.seconds,t.nanos)}const ca="(default)";class ua{constructor(e,t){this.projectId=e,this.database=t||ca}static empty(){return new ua("","")}get isDefaultDatabase(){return this.database===ca}isEqual(e){return e instanceof ua&&e.projectId===this.projectId&&e.database===this.database}}const ha="__type__",da="__max__",fa={mapValue:{fields:{__type__:{stringValue:da}}}},pa="__vector__",ma="value";function ga(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?oa(e)?4:Na(e)?9007199254740991:Ta(e)?10:11:ys(28295,{value:e})}function va(e,t){if(e===t)return!0;const n=ga(e);if(n!==ga(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return la(e).isEqual(la(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Xo(e.timestampValue),i=Xo(t.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ta(e.bytesValue).isEqual(ta(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ea(e.geoPointValue.latitude)===ea(t.geoPointValue.latitude)&&ea(e.geoPointValue.longitude)===ea(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ea(e.integerValue)===ea(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ea(e.doubleValue),i=ea(t.doubleValue);return n===i?vo(n)===vo(i):isNaN(n)&&isNaN(i)}return!1}(e,t);case 9:return Vs(e.arrayValue.values||[],t.arrayValue.values||[],va);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},i=t.mapValue.fields||{};if(Vo(n)!==Vo(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!va(n[r],i[r])))return!1;return!0}(e,t);default:return ys(52216,{left:e})}}function _a(e,t){return void 0!==(e.values||[]).find(e=>va(e,t))}function ya(e,t){if(e===t)return 0;const n=ga(e),i=ga(t);if(n!==i)return Ds(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ds(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ea(e.integerValue||e.doubleValue),i=ea(t.integerValue||t.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(e,t);case 3:return ba(e.timestampValue,t.timestampValue);case 4:return ba(la(e),la(t));case 5:return js(e.stringValue,t.stringValue);case 6:return function(e,t){const n=ta(e),i=ta(t);return n.compareTo(i)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),i=t.split("/");for(let r=0;r<n.length&&r<i.length;r++){const e=Ds(n[r],i[r]);if(0!==e)return e}return Ds(n.length,i.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Ds(ea(e.latitude),ea(t.latitude));return 0!==n?n:Ds(ea(e.longitude),ea(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return wa(e.arrayValue,t.arrayValue);case 10:return function(e,t,n,i,r,s){const o=e.fields||{},a=t.fields||{},l=null===(n=o[ma])||void 0===n?void 0:n.arrayValue,c=null===(i=a[ma])||void 0===i?void 0:i.arrayValue,u=Ds((null===l||void 0===l||null===(r=l.values)||void 0===r?void 0:r.length)||0,(null===c||void 0===c||null===(s=c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:wa(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===fa.mapValue&&t===fa.mapValue)return 0;if(e===fa.mapValue)return 1;if(t===fa.mapValue)return-1;const n=e.fields||{},i=Object.keys(n),r=t.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let o=0;o<i.length&&o<s.length;++o){const e=js(i[o],s[o]);if(0!==e)return e;const t=ya(n[i[o]],r[s[o]]);if(0!==t)return t}return Ds(i.length,s.length)}(e.mapValue,t.mapValue);default:throw ys(23264,{he:n})}}function ba(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ds(e,t);const n=Xo(e),i=Xo(t),r=Ds(n.seconds,i.seconds);return 0!==r?r:Ds(n.nanos,i.nanos)}function wa(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const e=ya(n[r],i[r]);if(e)return e}return Ds(n.length,i.length)}function Ea(e){return Sa(e)}function Sa(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Xo(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return ta(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Ks.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const i of e.values||[])n?n=!1:t+=",",t+=Sa(i);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",i=!0;for(const r of t)i?i=!1:n+=",",n+="".concat(r,":").concat(Sa(e.fields[r]));return n+"}"}(e.mapValue):ys(61005,{value:e})}function xa(e){return!!e&&"integerValue"in e}function ka(e){return!!e&&"arrayValue"in e}function Ca(e){return!!e&&"mapValue"in e}function Ta(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[ha])||void 0===t?void 0:t.stringValue)===pa}function Ia(e){if(e.geoPointValue)return{geoPointValue:(0,r.A)({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:(0,r.A)({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Bo(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Ia(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ia(e.arrayValue.values[n]);return t}return(0,r.A)({},e)}function Na(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===da}class Pa{constructor(e){this.value=e}static empty(){return new Pa({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ca(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ia(t)}setAll(e){let t=Zs.emptyPath(),n={},i=[];e.forEach((e,r)=>{if(!t.isImmediateParentOf(r)){const e=this.getFieldsMap(t);this.applyChanges(e,n,i),n={},i=[],t=r.popLast()}e?n[r.lastSegment()]=Ia(e):i.push(r.lastSegment())});const r=this.getFieldsMap(t);this.applyChanges(r,n,i)}delete(e){const t=this.field(e.popLast());Ca(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return va(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];Ca(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){Bo(t,(t,n)=>e[t]=n);for(const i of n)delete e[i]}clone(){return new Pa(Ia(this.value))}}class Aa{constructor(e,t,n,i,r,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Aa(e,0,no.min(),no.min(),no.min(),Pa.empty(),0)}static newFoundDocument(e,t,n,i){return new Aa(e,1,t,no.min(),n,i,0)}static newNoDocument(e,t){return new Aa(e,2,t,no.min(),no.min(),Pa.empty(),0)}static newUnknownDocument(e,t){return new Aa(e,3,t,no.min(),no.min(),Pa.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(no.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pa.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=no.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Aa&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Aa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class La{constructor(e,t){this.position=e,this.inclusive=t}}function Ra(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],o=e.position[r];if(i=s.field.isKeyField()?Ks.comparator(Ks.fromName(o.referenceValue),n.key):ya(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function Oa(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!va(e.position[n],t.position[n]))return!1;return!0}class Ma{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Da(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class ja{}class Fa extends ja{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Za(e,t,n):"array-contains"===t?new Qa(e,n):"in"===t?new $a(e,n):"not-in"===t?new Ja(e,n):"array-contains-any"===t?new Xa(e,n):new Fa(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Ka(e,n):new Ga(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(ya(t,this.value)):null!==t&&ga(this.value)===ga(t)&&this.matchesComparison(ya(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ys(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class za extends ja{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new za(e,t)}matches(e){return Ua(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ua(e){return"and"===e.op}function Va(e){return Ba(e)&&Ua(e)}function Ba(e){for(const t of e.filters)if(t instanceof za)return!1;return!0}function Ha(e){if(e instanceof Fa)return e.field.canonicalString()+e.op.toString()+Ea(e.value);if(Va(e))return e.filters.map(e=>Ha(e)).join(",");{const t=e.filters.map(e=>Ha(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function qa(e,t){return e instanceof Fa?function(e,t){return t instanceof Fa&&e.op===t.op&&e.field.isEqual(t.field)&&va(e.value,t.value)}(e,t):e instanceof za?function(e,t){return t instanceof za&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,i)=>e&&qa(n,t.filters[i]),!0)}(e,t):void ys(19439)}function Wa(e){return e instanceof Fa?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Ea(e.value))}(e):e instanceof za?function(e){return e.op.toString()+" {"+e.getFilters().map(Wa).join(" ,")+"}"}(e):"Filter"}class Za extends Fa{constructor(e,t,n){super(e,t,n),this.key=Ks.fromName(n.referenceValue)}matches(e){const t=Ks.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ka extends Fa{constructor(e,t){super(e,"in",t),this.keys=Ya("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ga extends Fa{constructor(e,t){super(e,"not-in",t),this.keys=Ya("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ya(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Ks.fromName(e.referenceValue))}class Qa extends Fa{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ka(t)&&_a(t.arrayValue,this.value)}}class $a extends Fa{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&_a(this.value.arrayValue,t)}}class Ja extends Fa{constructor(e,t){super(e,"not-in",t)}matches(e){if(_a(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!_a(this.value.arrayValue,t)}}class Xa extends Fa{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ka(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>_a(this.value.arrayValue,e))}}class el{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.Te=null}}function tl(e){return new el(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function nl(e){const t=Es(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Ha(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),go(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Ea(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Ea(e)).join(",")),t.Te=e}return t.Te}function il(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Da(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!qa(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Oa(e.startAt,t.startAt)&&Oa(e.endAt,t.endAt)}class rl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function sl(e,t,n,i,r,s,o,a){return new rl(e,t,n,i,r,s,o,a)}function ol(e){return new rl(e)}function al(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ll(e){return null!==e.collectionGroup}function cl(e){const t=Es(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const r of t.explicitOrderBy)t.Ie.push(r),e.add(r.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",i=function(e){let t=new Ko(Zs.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);i.forEach(i=>{e.has(i.canonicalString())||i.isKeyField()||t.Ie.push(new Ma(i,n))}),e.has(Zs.keyField().canonicalString())||t.Ie.push(new Ma(Zs.keyField(),n))}return t.Ie}function ul(e){const t=Es(e);return t.Ee||(t.Ee=hl(t,cl(e))),t.Ee}function hl(e,t){if("F"===e.limitType)return tl(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Ma(e.field,t)});const n=e.endAt?new La(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new La(e.startAt.position,e.startAt.inclusive):null;return tl(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function dl(e,t,n){return new rl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function fl(e,t){return il(ul(e),ul(t))&&e.limitType===t.limitType}function pl(e){return"".concat(nl(ul(e)),"|lt:").concat(e.limitType)}function ml(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Wa(e)).join(", "),"]")),go(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Ea(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Ea(e)).join(",")),"Target(".concat(t,")")}(ul(e)),"; limitType=").concat(e.limitType,")")}function gl(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ks.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of cl(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const i=Ra(e,t,n);return e.inclusive?i<=0:i<0}(e.startAt,cl(e),t))&&!(e.endAt&&!function(e,t,n){const i=Ra(e,t,n);return e.inclusive?i>=0:i>0}(e.endAt,cl(e),t))}(e,t)}function vl(e){return(t,n)=>{let i=!1;for(const r of cl(e)){const e=_l(r,t,n);if(0!==e)return e;i=i||r.field.isKeyField()}return 0}}function _l(e,t,n){const i=e.field.isKeyField()?Ks.comparator(t.key,n.key):function(e,t,n){const i=t.data.field(e),r=n.data.field(e);return null!==i&&null!==r?ya(i,r):ys(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return ys(19790,{direction:e.dir})}}class yl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(void 0===i)return this.inner[n]=[[e,t]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return 1===n.length?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Bo(this.inner,(t,n)=>{for(const[i,r]of n)e(i,r)})}isEmpty(){return Ho(this.inner)}size(){return this.innerSize}}const bl=new qo(Ks.comparator);function wl(){return bl}const El=new qo(Ks.comparator);function Sl(){let e=El;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n)e=e.insert(r.key,r);return e}function xl(e){let t=El;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function kl(){return Tl()}function Cl(){return Tl()}function Tl(){return new yl(e=>e.toString(),(e,t)=>e.isEqual(t))}new qo(Ks.comparator);const Il=new Ko(Ks.comparator);function Nl(){let e=Il;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n)e=e.add(r);return e}const Pl=new Ko(Ds);function Al(){return Pl}function Ll(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vo(t)?"-0":t}}function Rl(e){return{integerValue:""+e}}class Ol{constructor(){this._=void 0}}function Ml(e,t,n){return e instanceof Fl?function(e,t){const n={fields:{[ia]:{stringValue:na},[sa]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&oa(t)&&(t=aa(t)),t&&(n.fields[ra]=t),{mapValue:n}}(n,t):e instanceof zl?Ul(e,t):e instanceof Vl?Bl(e,t):function(e,t){const n=jl(e,t),i=ql(n)+ql(e.Ae);return xa(n)&&xa(e.Ae)?Rl(i):Ll(e.serializer,i)}(e,t)}function Dl(e,t,n){return e instanceof zl?Ul(e,t):e instanceof Vl?Bl(e,t):n}function jl(e,t){return e instanceof Hl?function(e){return xa(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Fl extends Ol{}class zl extends Ol{constructor(e){super(),this.elements=e}}function Ul(e,t){const n=Wl(t);for(const i of e.elements)n.some(e=>va(e,i))||n.push(i);return{arrayValue:{values:n}}}class Vl extends Ol{constructor(e){super(),this.elements=e}}function Bl(e,t){let n=Wl(t);for(const i of e.elements)n=n.filter(e=>!va(e,i));return{arrayValue:{values:n}}}class Hl extends Ol{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function ql(e){return ea(e.integerValue||e.doubleValue)}function Wl(e){return ka(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Zl{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zl}static exists(e){return new Zl(void 0,e)}static updateTime(e){return new Zl(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Gl{}function Yl(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new rc(e.key,Zl.none()):new Xl(e.key,e.data,Zl.none());{const n=e.data,i=Pa.empty();let r=new Ko(Zs.comparator);for(let e of t.fields)if(!r.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?i.delete(e):i.set(e,t),r=r.add(e)}return new ec(e.key,i,new Yo(r.toArray()),Zl.none())}}function Ql(e,t,n){e instanceof Xl?function(e,t,n){const i=e.value.clone(),r=nc(e.fieldTransforms,t,n.transformResults);i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):e instanceof ec?function(e,t,n){if(!Kl(e.precondition,t))return void t.convertToUnknownDocument(n.version);const i=nc(e.fieldTransforms,t,n.transformResults),r=t.data;r.setAll(tc(e)),r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function $l(e,t,n,i){return e instanceof Xl?function(e,t,n,i){if(!Kl(e.precondition,t))return n;const r=e.value.clone(),s=ic(e.fieldTransforms,i,t);return r.setAll(s),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null}(e,t,n,i):e instanceof ec?function(e,t,n,i){if(!Kl(e.precondition,t))return n;const r=ic(e.fieldTransforms,i,t),s=t.data;return s.setAll(tc(e)),s.setAll(r),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,i):function(e,t,n){return Kl(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Jl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Vs(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof zl&&t instanceof zl||e instanceof Vl&&t instanceof Vl?Vs(e.elements,t.elements,va):e instanceof Hl&&t instanceof Hl?va(e.Ae,t.Ae):e instanceof Fl&&t instanceof Fl}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Xl extends Gl{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ec extends Gl{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function tc(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function nc(e,t,n){const i=new Map;ws(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let r=0;r<n.length;r++){const s=e[r],o=s.transform,a=t.data.field(s.field);i.set(s.field,Dl(o,a,n[r]))}return i}function ic(e,t,n){const i=new Map;for(const r of e){const e=r.transform,s=n.data.field(r.field);i.set(r.field,Ml(e,s,t))}return i}class rc extends Gl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sc{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const t=this.mutations[i];t.key.isEqual(e.key)&&Ql(t,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=$l(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=$l(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Cl();return this.mutations.forEach(i=>{const r=e.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=t.has(i.key)?null:o;const a=Yl(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(no.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Nl())}isEqual(e){return this.batchId===e.batchId&&Vs(this.mutations,e.mutations,(e,t)=>Jl(e,t))&&Vs(this.baseMutations,e.baseMutations,(e,t)=>Jl(e,t))}}class oc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}var ac,lc;function cc(e){if(void 0===e)return gs("GRPC error has no .code"),Ss.UNKNOWN;switch(e){case ac.OK:return Ss.OK;case ac.CANCELLED:return Ss.CANCELLED;case ac.UNKNOWN:return Ss.UNKNOWN;case ac.DEADLINE_EXCEEDED:return Ss.DEADLINE_EXCEEDED;case ac.RESOURCE_EXHAUSTED:return Ss.RESOURCE_EXHAUSTED;case ac.INTERNAL:return Ss.INTERNAL;case ac.UNAVAILABLE:return Ss.UNAVAILABLE;case ac.UNAUTHENTICATED:return Ss.UNAUTHENTICATED;case ac.INVALID_ARGUMENT:return Ss.INVALID_ARGUMENT;case ac.NOT_FOUND:return Ss.NOT_FOUND;case ac.ALREADY_EXISTS:return Ss.ALREADY_EXISTS;case ac.PERMISSION_DENIED:return Ss.PERMISSION_DENIED;case ac.FAILED_PRECONDITION:return Ss.FAILED_PRECONDITION;case ac.ABORTED:return Ss.ABORTED;case ac.OUT_OF_RANGE:return Ss.OUT_OF_RANGE;case ac.UNIMPLEMENTED:return Ss.UNIMPLEMENTED;case ac.DATA_LOSS:return Ss.DATA_LOSS;default:return ys(39323,{code:e})}}(lc=ac||(ac={}))[lc.OK=0]="OK",lc[lc.CANCELLED=1]="CANCELLED",lc[lc.UNKNOWN=2]="UNKNOWN",lc[lc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lc[lc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lc[lc.NOT_FOUND=5]="NOT_FOUND",lc[lc.ALREADY_EXISTS=6]="ALREADY_EXISTS",lc[lc.PERMISSION_DENIED=7]="PERMISSION_DENIED",lc[lc.UNAUTHENTICATED=16]="UNAUTHENTICATED",lc[lc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lc[lc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lc[lc.ABORTED=10]="ABORTED",lc[lc.OUT_OF_RANGE=11]="OUT_OF_RANGE",lc[lc.UNIMPLEMENTED=12]="UNIMPLEMENTED",lc[lc.INTERNAL=13]="INTERNAL",lc[lc.UNAVAILABLE=14]="UNAVAILABLE",lc[lc.DATA_LOSS=15]="DATA_LOSS";new Qr([4294967295,4294967295],0);Error;class uc{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function hc(e){return ws(!!e,49232),no.fromTimestamp(function(e){const t=Xo(e);return new to(t.seconds,t.nanos)}(e))}function dc(e,t){const n=function(e){return new qs(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function fc(e){const t=qs.fromString(e);return ws(yc(t),10190,{key:t.toString()}),t}function pc(e){const t=fc(e);return 4===t.length?qs.emptyPath():mc(t)}function mc(e){return ws(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function gc(e){let t=pc(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){ws(1===i,65062);const e=n.from[0];e.allDescendants?r=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=vc(e);return t instanceof za&&Va(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new Ma(_c(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,go(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new La(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new La(n,t)}(n.endAt)),sl(t,r,o,s,a,"F",l,c)}function vc(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=_c(e.unaryFilter.field);return Fa.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=_c(e.unaryFilter.field);return Fa.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=_c(e.unaryFilter.field);return Fa.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=_c(e.unaryFilter.field);return Fa.create(r,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ys(61313);default:return ys(60726)}}(e):void 0!==e.fieldFilter?function(e){return Fa.create(_c(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ys(58110);default:return ys(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return za.create(e.compositeFilter.filters.map(e=>vc(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return ys(1026)}}(e.compositeFilter.op))}(e):ys(30097,{filter:e})}function _c(e){return Zs.fromServerFormat(e.fieldPath)}function yc(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class bc{constructor(e){this.yt=e}}function wc(e){const t=gc({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?dl(t,t.limit,"L"):t}class Ec{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(ea(e.integerValue));else if("doubleValue"in e){const n=ea(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),vo(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=Xo(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ta(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?Na(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Ta(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ys(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const i of Object.keys(n))this.Ot(i,t),this.Ct(n[i],t)}kt(e,t){var n;const i=e.fields||{};this.Ft(t,53);const r=ma,s=(null===(n=i[r].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(ea(s)),this.Ot(r,t),this.Ct(i[r],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const i of n)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),Ks.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Ec.Kt=new Ec;class Sc{constructor(){this.Cn=new xc}addToCollectionParentIndex(e,t){return this.Cn.add(t),uo.resolve()}getCollectionParents(e,t){return uo.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return uo.resolve()}deleteFieldIndex(e,t){return uo.resolve()}deleteAllFieldIndexes(e){return uo.resolve()}createTargetIndexes(e,t){return uo.resolve()}getDocumentsMatchingTarget(e,t){return uo.resolve(null)}getIndexType(e,t){return uo.resolve(0)}getFieldIndexes(e,t){return uo.resolve([])}getNextCollectionGroupToUpdate(e){return uo.resolve(null)}getMinOffset(e,t){return uo.resolve(ao.min())}getMinOffsetFromCollectionGroup(e,t){return uo.resolve(ao.min())}updateCollectionGroup(e,t,n){return uo.resolve()}updateIndexEntries(e,t){return uo.resolve()}}class xc{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new Ko(qs.comparator),r=!i.has(n);return this.index[t]=i.add(n),r}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Ko(qs.comparator)).toArray()}}new Uint8Array(0);const kc=41943040;class Cc{static withCacheSize(e){return new Cc(e,Cc.DEFAULT_COLLECTION_PERCENTILE,Cc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Cc.DEFAULT_COLLECTION_PERCENTILE=10,Cc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cc.DEFAULT=new Cc(kc,Cc.DEFAULT_COLLECTION_PERCENTILE,Cc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cc.DISABLED=new Cc(-1,0,0);class Tc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Tc(0)}static cr(){return new Tc(-1)}}const Ic=1048576;class Nc{constructor(){this.changes=new yl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Aa.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?uo.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Pc{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ac{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&$l(n.mutation,e,Yo.empty(),to.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Nl()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Nl();const i=kl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,n).next(e=>{let t=Sl();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=kl();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Nl()))}populateOverlays(e,t,n){const i=[];return n.forEach(e=>{t.has(e)||i.push(e)}),this.documentOverlayCache.getOverlays(e,i).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,i){let r=wl();const s=Tl(),o=Tl();return t.forEach((e,t)=>{const o=n.get(t.key);i.has(t.key)&&(void 0===o||o.mutation instanceof ec)?r=r.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),$l(o.mutation,t,o.mutation.getFieldMask(),to.now())):s.set(t.key,Yo.empty())}),this.recalculateAndSaveOverlays(e,r).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new Pc(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=Tl();let i=new qo((e,t)=>e-t),r=Nl();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const r of e)r.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Yo.empty();o=r.applyToLocalView(s,o),n.set(e,o);const a=(i.get(r.batchId)||Nl()).add(e);i=i.insert(r.batchId,a)})}).next(()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,l=i.value,c=Cl();l.forEach(e=>{if(!r.has(e)){const i=Yl(t.get(e),n.get(e));null!==i&&c.set(e,i),r=r.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return uo.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,i){return function(e){return Ks.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ll(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next(r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-r.size):uo.resolve(kl());let o=io,a=r;return s.next(t=>uo.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(t)?uo.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,r)).next(()=>this.computeViews(e,a,t,Nl())).next(e=>({batchId:o,changes:xl(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ks(t)).next(e=>{let t=Sl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const r=t.collectionGroup;let s=Sl();return this.indexManager.getCollectionParents(e,r).next(o=>uo.forEach(o,o=>{const a=function(e,t){return new rl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(r));return this.getDocumentsMatchingCollectionQuery(e,a,n,i).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r,i))).next(e=>{r.forEach((t,n)=>{const i=n.getKey();null===e.get(i)&&(e=e.insert(i,Aa.newInvalidDocument(i)))});let n=Sl();return e.forEach((e,i)=>{const s=r.get(e);void 0!==s&&$l(s.mutation,i,Yo.empty(),to.now()),gl(t,i)&&(n=n.insert(e,i))}),n})}}class Lc{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return uo.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:hc(e.createTime)}}(t)),uo.resolve()}getNamedQuery(e,t){return uo.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:wc(e.bundledQuery),readTime:hc(e.readTime)}}(t)),uo.resolve()}}class Rc{constructor(){this.overlays=new qo(Ks.comparator),this.qr=new Map}getOverlay(e,t){return uo.resolve(this.overlays.get(t))}getOverlays(e,t){const n=kl();return uo.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,i)=>{this.St(e,t,i)}),uo.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.qr.get(n);return void 0!==i&&(i.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),uo.resolve()}getOverlaysForCollection(e,t,n){const i=kl(),r=t.length+1,s=new Ks(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===r&&e.largestBatchId>n&&i.set(e.getKey(),e)}return uo.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let r=new qo((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=r.get(e.largestBatchId);null===t&&(t=kl(),r=r.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=kl(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=i)););return uo.resolve(o)}St(e,t,n){const i=this.overlays.get(n.key);if(null!==i){const e=this.qr.get(i.largestBatchId).delete(n.key);this.qr.set(i.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new oc(t,n));let r=this.qr.get(t);void 0===r&&(r=Nl(),this.qr.set(t,r)),this.qr.set(t,r.add(n.key))}}class Oc{constructor(){this.sessionToken=$o.EMPTY_BYTE_STRING}getSessionToken(e){return uo.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,uo.resolve()}}class Mc{constructor(){this.Qr=new Ko(Dc.$r),this.Ur=new Ko(Dc.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Dc(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new Dc(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new Ks(new qs([])),n=new Dc(t,e),i=new Dc(t,e+1),r=[];return this.Ur.forEachInRange([n,i],e=>{this.Gr(e),r.push(e.key)}),r}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ks(new qs([])),n=new Dc(t,e),i=new Dc(t,e+1);let r=Nl();return this.Ur.forEachInRange([n,i],e=>{r=r.add(e.key)}),r}containsKey(e){const t=new Dc(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Dc{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ks.comparator(e.key,t.key)||Ds(e.Yr,t.Yr)}static Kr(e,t){return Ds(e.Yr,t.Yr)||Ks.comparator(e.key,t.key)}}class jc{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ko(Dc.$r)}checkEmpty(e){return uo.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,i){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new sc(r,t,n,i);this.mutationQueue.push(s);for(const o of i)this.Zr=this.Zr.add(new Dc(o.key,r)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return uo.resolve(s)}lookupMutationBatch(e,t){return uo.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.ei(n),r=i<0?0:i;return uo.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return uo.resolve(0===this.mutationQueue.length?mo:this.tr-1)}getAllMutationBatches(e){return uo.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Dc(t,0),i=new Dc(t,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([n,i],e=>{const t=this.Xr(e.Yr);r.push(t)}),uo.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ko(Ds);return t.forEach(e=>{const t=new Dc(e,0),i=new Dc(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,i],e=>{n=n.add(e.Yr)})}),uo.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let r=n;Ks.isDocumentKey(r)||(r=r.child(""));const s=new Dc(new Ks(r),0);let o=new Ko(Ds);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===i&&(o=o.add(e.Yr)),!0)},s),uo.resolve(this.ti(o))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){ws(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return uo.forEach(t.mutations,i=>{const r=new Dc(i.key,t.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new Dc(t,0),i=this.Zr.firstAfterOrEqual(n);return uo.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,uo.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Fc{constructor(e){this.ri=e,this.docs=new qo(Ks.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),r=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return uo.resolve(n?n.document.mutableCopy():Aa.newInvalidDocument(t))}getEntries(e,t){let n=wl();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Aa.newInvalidDocument(e))}),uo.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let r=wl();const s=t.path,o=new Ks(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||lo(oo(o),n)<=0||(i.has(o.key)||gl(t,o))&&(r=r.insert(o.key,o.mutableCopy()))}return uo.resolve(r)}getAllFromCollectionGroup(e,t,n,i){ys(9500)}ii(e,t){return uo.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new zc(this)}getSize(e){return uo.resolve(this.size)}}class zc extends Nc{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(n)}),uo.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Uc{constructor(e){this.persistence=e,this.si=new yl(e=>nl(e),il),this.lastRemoteSnapshotVersion=no.min(),this.highestTargetId=0,this.oi=0,this._i=new Mc,this.targetCount=0,this.ai=Tc.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),uo.resolve()}getLastRemoteSnapshotVersion(e){return uo.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return uo.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),uo.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),uo.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Tc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,uo.resolve()}updateTargetData(e,t){return this.Pr(t),uo.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,uo.resolve()}removeTargets(e,t,n){let i=0;const r=[];return this.si.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.si.delete(s),r.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),uo.waitFor(r).next(()=>i)}getTargetCount(e){return uo.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return uo.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),uo.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const i=this.persistence.referenceDelegate,r=[];return i&&t.forEach(t=>{r.push(i.markPotentiallyOrphaned(e,t))}),uo.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),uo.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return uo.resolve(n)}containsKey(e,t){return uo.resolve(this._i.containsKey(t))}}class Vc{constructor(e,t){this.ui={},this.overlays={},this.ci=new po(0),this.li=!1,this.li=!0,this.hi=new Oc,this.referenceDelegate=e(this),this.Pi=new Uc(this),this.indexManager=new Sc,this.remoteDocumentCache=function(e){return new Fc(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new bc(t),this.Ii=new Lc(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Rc,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new jc(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){ms("MemoryPersistence","Starting transaction:",e);const i=new Bc(this.ci.next());return this.referenceDelegate.Ei(),n(i).next(e=>this.referenceDelegate.di(i).next(()=>e)).toPromise().then(e=>(i.raiseOnCommittedEvent(),e))}Ai(e,t){return uo.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class Bc extends co{constructor(e){super(),this.currentSequenceNumber=e}}class Hc{constructor(e){this.persistence=e,this.Ri=new Mc,this.Vi=null}static mi(e){return new Hc(e)}get fi(){if(this.Vi)return this.Vi;throw ys(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),uo.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),uo.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),uo.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return uo.forEach(this.fi,n=>{const i=Ks.fromPath(n);return this.gi(e,i).next(e=>{e||t.removeEntry(i,no.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return uo.or([()=>uo.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class qc{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=i}static As(e,t){let n=Nl(),i=Nl();for(const r of t.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new qc(e,t.fromCache,n,i)}}class Wc{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Zc{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(0,_t.nr)()?8:ho((0,_t.ZQ)())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,i){const r={result:null};return this.ys(e,t).next(e=>{r.result=e}).next(()=>{if(!r.result)return this.ws(e,t,i,n).next(e=>{r.result=e})}).next(()=>{if(r.result)return;const n=new Wc;return this.Ss(e,t,n).next(i=>{if(r.result=i,this.Vs)return this.bs(e,t,n,i.size)})}).next(()=>r.result)}bs(e,t,n,i){return n.documentReadCount<this.fs?(ps()<=yt.$b.DEBUG&&ms("QueryEngine","SDK will not create cache indexes for query:",ml(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),uo.resolve()):(ps()<=yt.$b.DEBUG&&ms("QueryEngine","Query:",ml(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.gs*i?(ps()<=yt.$b.DEBUG&&ms("QueryEngine","The SDK decides to create cache indexes for query:",ml(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ul(t))):uo.resolve())}ys(e,t){if(al(t))return uo.resolve(null);let n=ul(t);return this.indexManager.getIndexType(e,n).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=dl(t,null,"F"),n=ul(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const r=Nl(...i);return this.ps.getDocuments(e,r).next(i=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Ds(t,i);return this.Cs(t,s,r,n.readTime)?this.ys(e,dl(t,null,"F")):this.vs(e,s,t,n)}))})))}ws(e,t,n,i){return al(t)||i.isEqual(no.min())?uo.resolve(null):this.ps.getDocuments(e,n).next(r=>{const s=this.Ds(t,r);return this.Cs(t,s,n,i)?uo.resolve(null):(ps()<=yt.$b.DEBUG&&ms("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ml(t)),this.vs(e,s,t,so(i,io)).next(e=>e))})}Ds(e,t){let n=new Ko(vl(e));return t.forEach((t,i)=>{gl(e,i)&&(n=n.add(i))}),n}Cs(e,t,n,i){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const r="F"===e.limitType?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ss(e,t,n){return ps()<=yt.$b.DEBUG&&ms("QueryEngine","Using full collection scan to execute query:",ml(t)),this.ps.getDocumentsMatchingQuery(e,t,ao.min(),n)}vs(e,t,n,i){return this.ps.getDocumentsMatchingQuery(e,n,i).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Kc="LocalStore";class Gc{constructor(e,t,n,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new qo(Ds),this.xs=new yl(e=>nl(e),il),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ac(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Yc(e,t,n,i){return new Gc(e,t,n,i)}async function Qc(e,t){const n=Es(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let i;return n.mutationQueue.getAllMutationBatches(e).next(r=>(i=r,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const r=[],s=[];let o=Nl();for(const e of i){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Ls:e,removedBatchIds:r,addedBatchIds:s}))})})}class $c{constructor(){this.activeTargetIds=Al()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Jc{constructor(){this.Mo=new $c,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new $c,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Xc{Oo(e){}shutdown(){}}const eu="ConnectivityMonitor";class tu{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ms(eu,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ms(eu,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let nu=null;function iu(){return null===nu?nu=268435456+Math.round(2147483648*Math.random()):nu++,"0x"+nu.toString(16)}const ru="RestConnection",su={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ou{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(i),this.Wo=this.databaseId.database===ca?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(i)}Go(e,t,n,i,r){const s=iu(),o=this.zo(e,t.toUriEncodedString());ms(ru,"Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(a,i,r);const{host:l}=new URL(o),c=(0,_t.zJ)(l);return this.Jo(e,o,a,n,c).then(t=>(ms(ru,"Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw vs(ru,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t})}Ho(e,t,n,i,r,s){return this.Go(e,t,n,i,r)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ds,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=su[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class au{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const lu="WebChannelConnection";class cu extends ou{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,i,r){const s=iu();return new Promise((r,o)=>{const a=new Xr;a.setWithCredentials(!0),a.listenOnce(ts.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case ns.NO_ERROR:const n=a.getResponseJson();ms(lu,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(n)),r(n);break;case ns.TIMEOUT:ms(lu,"RPC '".concat(e,"' ").concat(s," timed out")),o(new xs(Ss.DEADLINE_EXCEEDED,"Request time out"));break;case ns.HTTP_ERROR:const i=a.getStatus();if(ms(lu,"RPC '".concat(e,"' ").concat(s," failed with status:"),i,"response text:",a.getResponseText()),i>0){var t;let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ss).indexOf(t)>=0?t:Ss.UNKNOWN}(n.status);o(new xs(e,n.message))}else o(new xs(Ss.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new xs(Ss.UNAVAILABLE,"Connection failed."));break;default:ys(9055,{l_:e,streamId:s,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{ms(lu,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(i);ms(lu,"RPC '".concat(e,"' ").concat(s," sending request:"),i),a.send(t,"POST",l,n,15)})}T_(e,t,n){const i=iu(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=os(),o=ss(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.jo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=r.join("");ms(lu,"Creating RPC '".concat(e,"' stream ").concat(i,": ").concat(c),a);const u=s.createWebChannel(c,a);this.I_(u);let h=!1,d=!1;const f=new au({Yo:t=>{d?ms(lu,"Not sending because RPC '".concat(e,"' stream ").concat(i," is closed:"),t):(h||(ms(lu,"Opening RPC '".concat(e,"' stream ").concat(i," transport.")),u.open(),h=!0),ms(lu,"RPC '".concat(e,"' stream ").concat(i," sending:"),t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,es.EventType.OPEN,()=>{d||(ms(lu,"RPC '".concat(e,"' stream ").concat(i," transport opened.")),f.o_())}),p(u,es.EventType.CLOSE,()=>{d||(d=!0,ms(lu,"RPC '".concat(e,"' stream ").concat(i," transport closed")),f.a_(),this.E_(u))}),p(u,es.EventType.ERROR,t=>{d||(d=!0,vs(lu,"RPC '".concat(e,"' stream ").concat(i," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new xs(Ss.UNAVAILABLE,"The operation could not be completed")))}),p(u,es.EventType.MESSAGE,t=>{if(!d){var n;const r=t.data[0];ws(!!r,16349);const s=r,o=(null===s||void 0===s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){ms(lu,"RPC '".concat(e,"' stream ").concat(i," received error:"),o);const t=o.status;let n=function(e){const t=ac[e];if(void 0!==t)return cc(t)}(t),r=o.message;void 0===n&&(n=Ss.INTERNAL,r="Unknown error status: "+t+" with message "+o.message),d=!0,f.a_(new xs(n,r)),u.close()}else ms(lu,"RPC '".concat(e,"' stream ").concat(i," received:"),r),f.u_(r)}}),p(o,rs.STAT_EVENT,t=>{t.stat===is.PROXY?ms(lu,"RPC '".concat(e,"' stream ").concat(i," detected buffering proxy")):t.stat===is.NOPROXY&&ms(lu,"RPC '".concat(e,"' stream ").concat(i," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function uu(){return"undefined"!=typeof document?document:null}function hu(e){return new uc(e,!0)}class du{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=i,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-n);i>0&&ms("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}class fu{}class pu extends fu{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new xs(Ss.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(r=>{let[s,o]=r;return this.connection.Go(e,dc(t,n),i,s,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ss.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new xs(Ss.UNKNOWN,e.toString())})}Ho(e,t,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[o,a]=s;return this.connection.Ho(e,dc(t,n),i,o,a,r)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ss.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new xs(Ss.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class mu{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(gs(t),this.aa=!1):ms("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const gu="RemoteStore";class vu{constructor(e,t,n,i,r){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{bu(this)&&(ms(gu,"Restarting streams for network reachability change."),await async function(e){const t=Es(e);t.Ea.add(4),await yu(t),t.Ra.set("Unknown"),t.Ea.delete(4),await _u(t)}(this))})}),this.Ra=new mu(n,i)}}async function _u(e){if(bu(e))for(const t of e.da)await t(!0)}async function yu(e){for(const t of e.da)await t(!1)}function bu(e){return 0===Es(e).Ea.size}async function wu(e,t){const n=Es(e);t?(n.Ea.delete(2),await _u(n)):t||(n.Ea.add(2),await yu(n),n.Ra.set("Unknown"))}class Eu{constructor(e,t,n,i,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,r){const s=Date.now()+n,o=new Eu(e,t,s,i,r);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xs(Ss.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}class Su{constructor(){this.queries=xu(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=Es(e),i=n.queries;n.queries=xu(),i.forEach((e,n)=>{for(const i of n.Sa)i.onError(t)})}(this,new xs(Ss.ABORTED,"Firestore shutting down"))}}function xu(){return new yl(e=>pl(e),fl)}function ku(e){e.Ca.forEach(e=>{e.next()})}var Cu,Tu;(Tu=Cu||(Cu={})).Ma="default",Tu.Cache="cache";const Iu="SyncEngine";class Nu{constructor(e,t,n,i,r,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new yl(e=>pl(e),fl),this.Iu=new Map,this.Eu=new Set,this.du=new qo(Ks.comparator),this.Au=new Map,this.Ru=new Mc,this.Vu={},this.mu=new Map,this.fu=Tc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}function Pu(e,t,n){const i=Es(e);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const e=[];i.Tu.forEach((n,i)=>{const r=i.view.va(t);r.snapshot&&e.push(r.snapshot)}),function(e,t){const n=Es(e);n.onlineState=t;let i=!1;n.queries.forEach((e,n)=>{for(const r of n.Sa)r.va(t)&&(i=!0)}),i&&ku(n)}(i.eventManager,t),e.length&&i.Pu.H_(e),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function Au(e,t,n){const i=Es(e),r=[],s=[],o=[];i.Tu.isEmpty()||(i.Tu.forEach((e,a)=>{o.push(i.pu(a,t,n).then(e=>{if((e||n)&&i.isPrimaryClient){var t;const r=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;i.sharedClientState.updateQueryState(a.targetId,r?"current":"not-current")}if(e){r.push(e);const t=qc.As(a.targetId,e);s.push(t)}}))}),await Promise.all(o),i.Pu.H_(r),await async function(e,t){const n=Es(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>uo.forEach(t,t=>uo.forEach(t.Es,i=>n.persistence.referenceDelegate.addReference(e,t.targetId,i)).next(()=>uo.forEach(t.ds,i=>n.persistence.referenceDelegate.removeReference(e,t.targetId,i)))))}catch(e){if(!fo(e))throw e;ms(Kc,"Failed to update sequence numbers: "+e)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.Ms.get(e),i=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(i);n.Ms=n.Ms.insert(e,r)}}}(i.localStore,s))}async function Lu(e,t){const n=Es(e);if(!n.currentUser.isEqual(t)){ms(Iu,"User change. New user:",t.toKey());const e=await Qc(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new xs(Ss.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Au(n,e.Ls)}}class Ru{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Yc(this.persistence,new Zc,e.initialUser,this.serializer)}Cu(e){return new Vc(Hc.mi,this.serializer)}Du(e){return new Jc}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ru.provider={build:()=>new Ru};class Ou{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Pu(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Lu.bind(null,this.syncEngine),await wu(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Su}createDatastore(e){const t=hu(e.databaseInfo.databaseId),n=function(e){return new cu(e)}(e.databaseInfo);return function(e,t,n,i){return new pu(e,t,n,i)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,i,r){return new vu(e,t,n,i,r)}(this.localStore,this.datastore,e.asyncQueue,e=>Pu(this.syncEngine,e,0),tu.v()?new tu:new Xc)}createSyncEngine(e,t){return function(e,t,n,i,r,s,o){const a=new Nu(e,t,n,i,r,s);return o&&(a.gu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Es(e);ms(gu,"RemoteStore shutting down."),t.Ea.add(5),await yu(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Ou.provider={build:()=>new Ou};function Mu(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Du=new Map,ju="firestore.googleapis.com",Fu=!0;class zu{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new xs(Ss.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ju,this.ssl=Fu}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Fu;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=kc;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Ic)throw new xs(Ss.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,i){if(!0===t&&!0===i)throw new xs(Ss.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Mu(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new xs(Ss.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new xs(Ss.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new xs(Ss.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uu{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zu({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xs(Ss.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xs(Ss.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zu(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ts;switch(e.type){case"firstParty":return new As(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new xs(Ss.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Du.get(e);t&&(ms("ComponentProvider","Removing Datastore"),Du.delete(e),t.terminate())}(this),Promise.resolve()}}class Vu{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Vu(this.firestore,e,this._query)}}class Bu{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bu(this.firestore,e,this._key)}toJSON(){return{type:Bu._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Js(t,Bu._jsonSchema))return new Bu(e,n||null,new Ks(qs.fromString(t.referencePath)))}}Bu._jsonSchemaVersion="firestore/documentReference/1.0",Bu._jsonSchema={type:$s("string",Bu._jsonSchemaVersion),referencePath:$s("string")};class Hu extends Vu{constructor(e,t,n){super(e,t,ol(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bu(this.firestore,null,new Ks(e))}withConverter(e){return new Hu(this.firestore,e,this._path)}}const qu="AsyncQueue";class Wu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new du(this,"async_queue_retry"),this._c=()=>{const e=uu();e&&ms(qu,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=uu();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=uu();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new ks;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(nd){if(!fo(nd))throw nd;ms(qu,"Operation failed with retryable error: "+nd)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,gs("INTERNAL UNHANDLED ERROR: ",Zu(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Eu.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(i),i}uc(){this.nc&&ys(47125,{Pc:Zu(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Zu(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class Ku extends Uu{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new Wu,this._persistenceKey=(null===i||void 0===i?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Wu(e),this._firestoreClient=void 0,await e}}}class Gu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gu($o.fromBase64String(e))}catch(e){throw new xs(Ss.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Gu($o.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Gu._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Js(e,Gu._jsonSchema))return Gu.fromBase64String(e.bytes)}}Gu._jsonSchemaVersion="firestore/bytes/1.0",Gu._jsonSchema={type:$s("string",Gu._jsonSchemaVersion),bytes:$s("string")};class Yu{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let i=0;i<t.length;++i)if(0===t[i].length)throw new xs(Ss.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zs(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Qu{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xs(Ss.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xs(Ss.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ds(this._lat,e._lat)||Ds(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qu._jsonSchemaVersion}}static fromJSON(e){if(Js(e,Qu._jsonSchema))return new Qu(e.latitude,e.longitude)}}Qu._jsonSchemaVersion="firestore/geoPoint/1.0",Qu._jsonSchema={type:$s("string",Qu._jsonSchemaVersion),latitude:$s("number"),longitude:$s("number")};class $u{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:$u._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Js(e,$u._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new $u(e.vectorValues);throw new xs(Ss.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$u._jsonSchemaVersion="firestore/vectorValue/1.0",$u._jsonSchema={type:$s("string",$u._jsonSchemaVersion),vectorValues:$s("object")};const Ju=new RegExp("[~\\*/\\[\\]]");function Xu(e,t,n){if(t.search(Ju)>=0)throw eh("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Yu(...t.split("."))._internalPath}catch(i){throw eh("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function eh(e,t,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(i)),o&&(l+=" in document ".concat(r)),l+=")"),new xs(Ss.INVALID_ARGUMENT,a+e+l)}class th{constructor(e,t,n,i,r){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Bu(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new nh(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ih("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class nh extends th{data(){return super.data()}}function ih(e,t){return"string"==typeof t?Xu(e,t):t instanceof Yu?t._internalPath:t._delegate._internalPath}class rh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sh extends th{constructor(e,t,n,i,r,s){super(e,t,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new oh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(ih("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new xs(Ss.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=sh._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}sh._jsonSchemaVersion="firestore/documentSnapshot/1.0",sh._jsonSchema={type:$s("string",sh._jsonSchemaVersion),bundleSource:$s("string","DocumentSnapshot"),bundleName:$s("string"),bundle:$s("string")};class oh extends sh{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class ah{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new rh(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new oh(this._firestore,this._userDataWriter,n.key,n,new rh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new xs(Ss.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const i=new oh(e._firestore,e._userDataWriter,n.doc.key,n.doc,new rh(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const i=new oh(e._firestore,e._userDataWriter,t.doc.key,t.doc,new rh(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let r=-1,s=-1;return 0!==t.type&&(r=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:lh(t.type),doc:i,oldIndex:r,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new xs(Ss.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ah._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ms.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],i=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),i.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function lh(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ys(61501,{type:e})}}ah._jsonSchemaVersion="firestore/querySnapshot/1.0",ah._jsonSchema={type:$s("string",ah._jsonSchemaVersion),bundleSource:$s("string","QuerySnapshot"),bundleName:$s("string"),bundle:$s("string")};new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ds=e}(vt.MF),(0,vt.om)(new bt.uA("firestore",(e,n)=>{let{instanceIdentifier:i,options:s}=n;const o=e.getProvider("app").getImmediate(),a=new Ku(new Ns(e.getProvider("auth-internal")),new Rs(o,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new xs(Ss.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ua(e.options.projectId,t)}(o,i),o);return s=(0,r.A)({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,vt.KO)(cs,us,e),(0,vt.KO)(cs,us,"esm2020")}();var ch=n(800);const uh=(0,vt.Wp)({apiKey:"AIzaSyC7bXBsmuRTgOl4PPmacqDDdo069UJOWFY",authDomain:"connect-28ef7.firebaseapp.com",projectId:"connect-28ef7",storageBucket:"connect-28ef7.firebasestorage.app",messagingSenderId:"67831768105",appId:"1:67831768105:web:f1e82efe84c57479d96838",measurementId:"G-3NEB4VVLZ4"}),hh=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,vt.Sx)();const t=(0,vt.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,vt.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),i=n.getOptions();if((0,_t.bD)(i,null!==t&&void 0!==t?t:{}))return e;Nt(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Hr,persistence:[Xi,Ri,Fi]}),i=(0,_t.XA)("authTokenSyncURL");if(i&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(i,location.origin);if(location.origin===e.origin){const t=(r=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Kr)return;const i=null===t||void 0===t?void 0:t.token;Gr!==i&&(Gr=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}}))});!function(e,t,n){(0,_t.Ku)(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,i){(0,_t.Ku)(e).onIdTokenChanged(t,n,i)}(n,e=>t(e))}}var r;const s=(0,_t.Tj)("auth");return s&&Yn(n,"http://".concat(s)),n}(uh),dh=(function(e,t){const n="object"==typeof e?e:(0,vt.Sx)(),i="string"==typeof e?e:t||ca,s=(0,vt.j6)(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const e=(0,_t.yU)("firestore");e&&function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Qs(e,Uu);const s=(0,_t.zJ)(t),o=e._getSettings(),a=(0,r.A)((0,r.A)({},o),{},{emulatorOptions:e._getEmulatorOptions()}),l="".concat(t,":").concat(n);s&&((0,_t.gE)("https://".concat(l)),(0,_t.P1)("Firestore",!0)),o.host!==ju&&o.host!==l&&vs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=(0,r.A)((0,r.A)({},o),{},{host:l,ssl:s,emulatorOptions:i});if(!(0,_t.bD)(c,a)&&(e._setSettings(c),i.mockUserToken)){let t,n;if("string"==typeof i.mockUserToken)t=i.mockUserToken,n=hs.MOCK_USER;else{var u;t=(0,_t.Fy)(i.mockUserToken,null===(u=e._app)||void 0===u?void 0:u.options.projectId);const r=i.mockUserToken.sub||i.mockUserToken.user_id;if(!r)throw new xs(Ss.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new hs(r)}e._authCredentials=new Is(new Cs(t,n))}}(s,...e)}}(uh),(0,ch.C3)(uh)),fh=async(e,t)=>{const n=await async function(e,t,n){if((0,vt.xZ)(e.app))return Promise.reject(Lt(e));const i=jn(e),r=Kn(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vi,"EMAIL_PASSWORD_PROVIDER"),s=await r.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Ti(e),t}),o=await _i._fromIdTokenResponse(i,"signIn",s);return await i._updateCurrentUser(o.user),o}(hh,e,t);return await Ii(n.user),n},ph=(e,t)=>function(e,t,n){return(0,vt.xZ)(e.app)?Promise.reject(Lt(e)):ki((0,_t.Ku)(e),ui.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Ti(e),t})}(hh,e,t),mh=()=>function(e){return(0,_t.Ku)(e).signOut()}(hh),gh=e=>function(e,t,n,i){return(0,_t.Ku)(e).onAuthStateChanged(t,n,i)}(hh,e);var vh=n(579);const _h=(0,e.createContext)(),yh=()=>(0,e.useContext)(_h),bh=t=>{let{children:n}=t;const[i,r]=(0,e.useState)(null),[s,o]=(0,e.useState)(!0);return(0,e.useEffect)(()=>{const e=gh(e=>{r(e),o(!1)});return e},[]),(0,vh.jsx)(_h.Provider,{value:{user:i,loading:s},children:n})},wh=()=>{const[t,n]=(0,e.useState)([]);return(0,e.useEffect)(()=>{const e=setInterval(()=>{const e=document.querySelector(".landing-container");if(!e)return;const t=document.createElement("div");t.className="floating-particle",t.innerHTML=["\ud83d\udef0\ufe0f","\ud83d\udce1","\u26a1","\ud83c\udfaf","\ud83c\udf10","\ud83d\udccd","\u27e1","\u25c9","\u25cf","\u25b2","\u25c6","\u2b22"][Math.floor(12*Math.random())],t.style.left=100*Math.random()+"%",t.style.animationDuration=3*Math.random()+2+"s",t.style.color=["#00ff88","#ff0080","#0080ff","#ffaa00","#ff6b6b","#00ffff"][Math.floor(6*Math.random())],e.appendChild(t),setTimeout(()=>{t.parentNode&&t.remove()},5e3)},1500);return()=>clearInterval(e)},[]),(0,vh.jsxs)("div",{className:"landing-container",children:[(0,vh.jsxs)("div",{className:"landing-background",children:[(0,vh.jsx)("div",{className:"radar-grid-large"}),(0,vh.jsx)("div",{className:"connection-lines"})]}),(0,vh.jsxs)("div",{className:"landing-content",children:[(0,vh.jsxs)("div",{className:"tracking-demo-large",children:[(0,vh.jsx)("div",{className:"location-dot-large",style:{left:"25%",top:"80px",backgroundColor:"#00ff88"}}),(0,vh.jsx)("div",{className:"location-dot-large",style:{left:"65%",top:"120px",backgroundColor:"#ff0080"}}),(0,vh.jsx)("div",{className:"location-dot-large",style:{left:"15%",top:"160px",backgroundColor:"#0080ff"}}),(0,vh.jsx)("div",{className:"location-dot-large",style:{left:"80%",top:"140px",backgroundColor:"#ffaa00"}}),(0,vh.jsx)("div",{className:"location-dot-large",style:{left:"40%",top:"180px",backgroundColor:"#ff6b6b"}})]}),(0,vh.jsxs)("div",{className:"hero-section",children:[(0,vh.jsxs)("div",{className:"hero-title-container",children:[(0,vh.jsxs)("h1",{className:"hero-title",children:["Connect",(0,vh.jsx)("span",{className:"title-accent",children:"Us"})]}),(0,vh.jsx)("p",{className:"title-subtext",children:"Stay on Track with your Pack."})]}),(0,vh.jsxs)("p",{className:"hero-subtitle",children:[(0,vh.jsx)("span",{className:"highlight",children:"Live Group Tracking"}),"that keeps everyone visible, alert, and never out of sight\u2014because the journey's better together."]}),(0,vh.jsxs)("div",{className:"feature-highlights",children:[(0,vh.jsxs)("div",{className:"highlight-item",children:[(0,vh.jsx)("span",{className:"highlight-icon",children:"\u26a1"}),(0,vh.jsx)("span",{children:"Real-time Updates"})]}),(0,vh.jsxs)("div",{className:"highlight-item",children:[(0,vh.jsx)("span",{className:"highlight-icon",children:"\ud83d\udd12"}),(0,vh.jsx)("span",{children:"Secure & Private"})]}),(0,vh.jsxs)("div",{className:"highlight-item",children:[(0,vh.jsx)("span",{className:"highlight-icon",children:"\ud83d\udcf1"}),(0,vh.jsx)("span",{children:"Mobile Friendly"})]})]}),(0,vh.jsx)("div",{className:"action-buttons",children:(0,vh.jsx)(ut,{to:"/login",className:"cta-button primary",children:"Start Tracking"})}),(0,vh.jsxs)("div",{className:"status-indicators",children:[(0,vh.jsxs)("div",{className:"status-item",children:[(0,vh.jsx)("div",{className:"status-dot active"}),(0,vh.jsx)("span",{className:"status-text",children:"LIVE UPDATES"})]}),(0,vh.jsxs)("div",{className:"status-item",children:[(0,vh.jsx)("div",{className:"status-dot active",style:{backgroundColor:"#0080ff"}}),(0,vh.jsx)("span",{className:"status-text",children:"FRIENDS & FAMILY"})]}),(0,vh.jsxs)("div",{className:"status-item",children:[(0,vh.jsx)("div",{className:"status-dot active",style:{backgroundColor:"#ffaa00"}}),(0,vh.jsx)("span",{className:"status-text",children:"ALWAYS CONNECTED"})]})]})]}),(0,vh.jsxs)("div",{className:"features-section",children:[(0,vh.jsxs)("div",{className:"feature-card",children:[(0,vh.jsx)("div",{className:"feature-icon",children:"\ud83d\udccd"}),(0,vh.jsx)("h3",{children:"Live Location Sharing"}),(0,vh.jsx)("p",{children:"See where your loved ones are in real-time with smooth, automatic updates"})]}),(0,vh.jsxs)("div",{className:"feature-card",children:[(0,vh.jsx)("div",{className:"feature-icon",children:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66"}),(0,vh.jsx)("h3",{children:"Family & Friends"}),(0,vh.jsx)("p",{children:"Create groups for family trips, friend meetups, or just staying connected daily"})]}),(0,vh.jsxs)("div",{className:"feature-card",children:[(0,vh.jsx)("div",{className:"feature-icon",children:"\ud83c\udfaf"}),(0,vh.jsx)("h3",{children:"Easy to Use"}),(0,vh.jsx)("p",{children:"Simple setup with group codes. No complicated settings - just connect and go!"})]})]}),(0,vh.jsxs)("div",{className:"security-badge",children:[(0,vh.jsx)("div",{className:"security-icon",children:"\ud83d\udd10"}),(0,vh.jsx)("p",{className:"security-text",children:"Your privacy matters. Location data is secure and only shared with your chosen groups."}),(0,vh.jsx)("p",{className:"security-subtext",children:"Made by Sneha Singh | \xa9 2025 ConnectUs"})]})]})]})},Eh=()=>{const[t,n]=(0,e.useState)({displayName:"",email:"",password:"",confirmPassword:""}),[i,s]=(0,e.useState)(!1),[o,a]=(0,e.useState)(!1),[l,c]=(0,e.useState)(""),[u,h]=(0,e.useState)(!1),[d,f]=(0,e.useState)(!1),[p,m]=(0,e.useState)(!1),[g,v]=(0,e.useState)(!1),_=(e,t)=>{n(n=>(0,r.A)((0,r.A)({},n),{},{[e]:t}))};return(0,vh.jsxs)("div",{className:"auth-container",children:[(0,vh.jsx)("div",{className:"auth-background",children:(0,vh.jsx)("div",{className:"radar-grid"})}),(0,vh.jsxs)("div",{className:"auth-content",children:[(0,vh.jsxs)("div",{className:"auth-header",children:[(0,vh.jsxs)("h1",{className:"auth-title",children:["Connect",(0,vh.jsx)("span",{className:"title-accent",children:"Us"})]}),(0,vh.jsx)("p",{className:"auth-subtitle",children:i?"JOIN THE NETWORK":"ACCESS YOUR TRACKING NETWORK"})]}),(0,vh.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),c(""),(()=>{if(i){if(!t.displayName.trim())return c("Name is required"),!1;if(t.displayName.trim().length<2)return c("Name too short (min 2 characters)"),!1;if(!t.email.trim())return c("Email is required"),!1;if(!t.password)return c("Password is required"),!1;if(t.password.length<6)return c("Password too weak (min 6 characters)"),!1;if(!t.confirmPassword)return c("Confirm password is required"),!1;if(t.password!==t.confirmPassword)return c("Passwords do not match"),!1}else{if(!t.email.trim())return c("Email is required"),!1;if(!t.password)return c("Password is required"),!1}return!0})()){a(!0);try{if(i)await fh(t.email,t.password),alert("Account created! Please check your email to verify your account before signing in."),s(!1);else{if(!(await ph(t.email,t.password)).user.emailVerified)return void c("Please verify your email before signing in. Check your inbox for verification link.")}}catch(l){c(l.message)}a(!1)}},className:"auth-form",children:[l&&(0,vh.jsxs)("div",{className:"error-message",children:["\u26a0 ",l]}),u&&(0,vh.jsx)("div",{className:"success-message",children:"Password reset email sent! Check your inbox."}),i&&(0,vh.jsxs)("div",{className:"input-container",children:[(0,vh.jsxs)("label",{className:"input-label",children:[(0,vh.jsx)("span",{className:"input-bracket",children:"\u25b7 "}),"FULL NAME"]}),(0,vh.jsxs)("div",{className:"input-wrapper",children:[(0,vh.jsx)("span",{className:"input-icon",children:"\u25c9"}),(0,vh.jsx)("input",{type:"text",placeholder:"Enter full name",value:t.displayName,onChange:e=>_("displayName",e.target.value),className:"auth-input",required:!0})]})]}),(0,vh.jsxs)("div",{className:"input-container",children:[(0,vh.jsxs)("label",{className:"input-label",children:[(0,vh.jsx)("span",{className:"input-bracket",children:"\u25b7 "}),"EMAIL ADDRESS"]}),(0,vh.jsxs)("div",{className:"input-wrapper",children:[(0,vh.jsx)("span",{className:"input-icon",children:"\u25c9"}),(0,vh.jsx)("input",{type:"email",placeholder:"your@email.com",value:t.email,onChange:e=>_("email",e.target.value),className:"auth-input",required:!0})]})]}),(0,vh.jsxs)("div",{className:"input-container",children:[(0,vh.jsxs)("label",{className:"input-label",children:[(0,vh.jsx)("span",{className:"input-bracket",children:"\u25b7 "}),"PASSWORD"]}),(0,vh.jsxs)("div",{className:"input-wrapper",children:[(0,vh.jsx)("span",{className:"input-icon",children:"\u2b22"}),(0,vh.jsx)("input",{type:d?"text":"password",placeholder:i?"Create password":"Enter your password",value:t.password,onChange:e=>_("password",e.target.value),className:"auth-input",required:!0}),(0,vh.jsx)("span",{className:"eye-button",onClick:()=>f(!d),children:d?"\ud83d\ude48":"\ud83d\udc41\ufe0f"})]})]}),i&&t.password.length>0&&(0,vh.jsxs)("div",{className:"security-requirements",children:[(0,vh.jsx)("div",{className:"requirements-title",children:"SECURITY REQUIREMENTS:"}),(()=>{const e=t.password;return[{text:"MIN 6 CHARACTERS",met:e.length>=6},{text:"CONTAINS NUMBERS",met:/\d/.test(e)},{text:"CONTAINS LETTERS",met:/[a-zA-Z]/.test(e)}]})().map((e,t)=>(0,vh.jsxs)("div",{className:"requirement-item",children:[(0,vh.jsx)("div",{className:"requirement-dot",style:{backgroundColor:e.met?"#00ff88":"#ff0080"}}),(0,vh.jsx)("span",{className:"requirement-text",style:{color:e.met?"#00ff88":"#ff0080"},children:e.text})]},t))]}),i&&(0,vh.jsxs)("div",{className:"input-container",children:[(0,vh.jsxs)("label",{className:"input-label",children:[(0,vh.jsx)("span",{className:"input-bracket",children:"\u25b7 "}),"CONFIRM PASSWORD"]}),(0,vh.jsxs)("div",{className:"input-wrapper",children:[(0,vh.jsx)("span",{className:"input-icon",children:"\u2b22"}),(0,vh.jsx)("input",{type:p?"text":"password",placeholder:"Confirm your password",value:t.confirmPassword,onChange:e=>_("confirmPassword",e.target.value),className:"auth-input",required:!0}),(0,vh.jsx)("span",{className:"eye-button",onClick:()=>m(!p),children:p?"\ud83d\ude48":"\ud83d\udc41\ufe0f"})]})]}),(0,vh.jsx)("button",{type:"submit",className:"tactical-button",disabled:o,children:o?"\u25c9 CONNECTING...":i?"\u25b7 CREATE ACCOUNT":"\u25b7 LOGIN"}),!i&&(0,vh.jsxs)("div",{className:"forgot-password",children:[(0,vh.jsx)("span",{onClick:async()=>{if(t.email){a(!0),c("");try{await async function(e,t,n){const i=jn(e),r={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Ci(i,r,n),await Kn(i,r,"getOobCode",ni,"EMAIL_PASSWORD_PROVIDER")}(hh,t.email),h(!0)}catch(l){c(l.message)}a(!1)}else c("Please enter your email address first")},className:"forgot-link",children:"\u25b7 Forgot Password?"}),(0,vh.jsx)("br",{}),(0,vh.jsx)("span",{onClick:async()=>{try{await(async()=>{hh.currentUser&&await Ii(hh.currentUser)})(),v(!0),alert("Verification email sent! Check your inbox and spam folder.")}catch(l){c("Failed to send verification email: "+l.message)}},className:"forgot-link",children:"\u25b7 Resend Verification Email"})]}),(0,vh.jsxs)("div",{className:"auth-footer",children:[(0,vh.jsx)("span",{className:"footer-text",children:i?"Already have an account? ":"New to ConnectUs? "}),(0,vh.jsx)("span",{onClick:()=>s(!i),className:"link-text",children:i?"Sign In":"Create Account"})]})]})]})]})},Sh=(e,t)=>{const n=(0,ch.ref)(dh,"locations/".concat(e));return(0,ch.hZ)(n,(0,r.A)((0,r.A)({},t),{},{timestamp:Date.now()}))},xh=(e,t)=>{const n=(0,ch.ref)(dh,"groups/".concat(e,"/members"));return(0,ch.Zy)(n,t),()=>(0,ch.AU)(n,t)},kh=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=(0,ch.ref)(dh,"groups/".concat(e,"/members/").concat(t));return(0,ch.hZ)(s,(0,r.A)((0,r.A)({},n),{},{role:i?"admin":"member"}))},Ch=(e,t)=>{const n=(0,ch.ref)(dh,"groups/".concat(e,"/emergencies"));return(0,ch.VC)(n,t)},Th=async e=>await(async e=>{const{get:t}=await Promise.resolve().then(n.bind(n,800)),i=(0,ch.ref)(dh,"groups"),r=await t(i);if(r.exists()){const t=r.val();for(const[n,i]of Object.entries(t))if(i.code===e)return n}return null})(e);const Ih=(0,e.createContext)(null);function Nh(){const t=(0,e.use)(Ih);if(null==t)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}var Ph=n(228),Ah=n.n(Ph);const Lh=["bounds","boundsOptions","center","children","className","id","placeholder","style","whenReady","zoom"];function Rh(t,n){let{bounds:s,boundsOptions:o,center:a,children:l,className:c,id:u,placeholder:h,style:d,whenReady:f,zoom:p}=t,m=i(t,Lh);const[g]=(0,e.useState)({className:c,id:u,style:d}),[v,_]=(0,e.useState)(null),y=(0,e.useRef)(void 0);(0,e.useImperativeHandle)(n,()=>{var e;return null!==(e=null===v||void 0===v?void 0:v.map)&&void 0!==e?e:null},[v]);const b=(0,e.useCallback)(e=>{if(null!==e&&!y.current){const t=new Ph.Map(e,m);y.current=t,null!=a&&null!=p?t.setView(a,p):null!=s&&t.fitBounds(s,o),null!=f&&t.whenReady(f),_(function(e){return Object.freeze({__version:1,map:e})}(t))}},[]);(0,e.useEffect)(()=>()=>{null===v||void 0===v||v.map.remove()},[v]);const w=v?e.createElement(Ih,{value:v},l):null!==h&&void 0!==h?h:null;return e.createElement("div",(0,r.A)((0,r.A)({},g),{},{ref:b}),w)}const Oh=(0,e.forwardRef)(Rh);var Mh=n(950);function Dh(t,n){const i=(0,e.useRef)(n);(0,e.useEffect)(function(){n!==i.current&&null!=t.attributionControl&&(null!=i.current&&t.attributionControl.removeAttribution(i.current),null!=n&&t.attributionControl.addAttribution(n)),i.current=n},[t,n])}function jh(t,n){const i=(0,e.useRef)(void 0);(0,e.useEffect)(function(){return null!=n&&t.instance.on(n),i.current=n,function(){null!=i.current&&t.instance.off(i.current),i.current=null}},[t,n])}function Fh(e,t){var n;const i=null!==(n=e.pane)&&void 0!==n?n:t.pane;return i?(0,r.A)((0,r.A)({},e),{},{pane:i}):e}function zh(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function Uh(t,n){return null==n?function(n,i){const r=(0,e.useRef)(void 0);return r.current||(r.current=t(n,i)),r}:function(i,r){const s=(0,e.useRef)(void 0);s.current||(s.current=t(i,r));const o=(0,e.useRef)(i),{instance:a}=s.current;return(0,e.useEffect)(function(){o.current!==i&&(n(a,i,o.current),o.current=i)},[a,i,n]),s}}function Vh(t){return function(n){const i=Nh(),r=t(Fh(n,i),i);return Dh(i.map,n.attribution),jh(r.current,n.eventHandlers),function(t,n){(0,e.useEffect)(function(){var e;return(null!==(e=n.layerContainer)&&void 0!==e?e:n.map).addLayer(t.instance),function(){var e;null===(e=n.layerContainer)||void 0===e||e.removeLayer(t.instance),n.map.removeLayer(t.instance)}},[n,t])}(r.current,i),r}}const Bh=["url"],Hh=function(t){function n(n,i){const{instance:r}=t(n).current;return(0,e.useImperativeHandle)(i,()=>r),null}return(0,e.forwardRef)(n)}(Vh(Uh(function(e,t){let{url:n}=e,r=i(e,Bh);return zh(new Ph.TileLayer(n,Fh(r,t)),t)},function(e,t,n){!function(e,t,n){const{opacity:i,zIndex:r}=t;null!=i&&i!==n.opacity&&e.setOpacity(i),null!=r&&r!==n.zIndex&&e.setZIndex(r)}(e,t,n);const{url:i}=t;null!=i&&i!==n.url&&e.setUrl(i)})));const qh=["position"],Wh=function(t,n){return function(t){function n(n,i){const{instance:r,context:s}=t(n).current;(0,e.useImperativeHandle)(i,()=>r);const{children:o}=n;return null==o?null:e.createElement(Ih,{value:s},o)}return(0,e.forwardRef)(n)}(Vh(Uh(t,n)))}(function(e,t){let{position:n}=e,s=i(e,qh);const o=new Ph.Marker(n,s);return zh(o,(a=t,l={overlayContainer:o},Object.freeze((0,r.A)((0,r.A)({},a),l))));var a,l},function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),null!=t.icon&&t.icon!==n.icon&&e.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=e.dragging&&t.draggable!==n.draggable&&(!0===t.draggable?e.dragging.enable():e.dragging.disable())}),Zh=function(t,n){const i=function(e,t){return function(n,i){const r=Nh(),s=e(Fh(n,r),r);return Dh(r.map,n.attribution),jh(s.current,n.eventHandlers),t(s.current,r,n,i),s}}(Uh(t),n);return function(t){function n(n,i){const[r,s]=(0,e.useState)(!1),{instance:o}=t(n,s).current;(0,e.useImperativeHandle)(i,()=>o),(0,e.useEffect)(function(){r&&o.update()},[o,r,n.children]);const a=o._contentNode;return a?(0,Mh.createPortal)(n.children,a):null}return(0,e.forwardRef)(n)}(i)}(function(e,t){return zh(new Ph.Popup(e,t.overlayContainer),t)},function(t,n,i,r){let{position:s}=i;(0,e.useEffect)(function(){const{instance:e}=t;function i(t){t.popup===e&&(e.update(),r(!0))}function o(t){t.popup===e&&r(!1)}return n.map.on({popupopen:i,popupclose:o}),null==n.overlayContainer?(null!=s&&e.setLatLng(s),e.openOn(n.map)):n.overlayContainer.bindPopup(e),function(){var t;n.map.off({popupopen:i,popupclose:o}),null===(t=n.overlayContainer)||void 0===t||t.unbindPopup(),n.map.removeLayer(e)}},[t,n,r,s])}),Kh=e=>{let{members:t,currentUser:n,onMemberClick:i,onSendMessage:r,mapRef:s,currentGroup:o,memberAddresses:a,myAddress:l}=e;const c=["linear-gradient(135deg, #667eea 0%, #764ba2 100%)","linear-gradient(135deg, #f093fb 0%, #f5576c 100%)","linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)","linear-gradient(135deg, #fa709a 0%, #fee140 100%)","linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)","linear-gradient(135deg, #ffa400 0%, #ff6b6b 100%)","linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)","linear-gradient(135deg, #30cfd0 0%, #91a7ff 100%)","linear-gradient(135deg, #d299c2 0%, #fef9d7 100%)","linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%)","linear-gradient(135deg, #fdbb2d 0%, #22c1c3 100%)","linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)"],u=e=>e.timestamp&&Date.now()-e.timestamp<6e4,h=e=>{if(!e.timestamp)return{status:"never",color:"#666",text:"Never seen"};const t=Date.now()-e.timestamp,n=Math.floor(t/6e4);if(n<1)return{status:"active",color:"#00ff88",text:"Active now"};if(n<5)return{status:"recent",color:"#4ecdc4",text:"Just left"};if(n<60)return{status:"offline",color:"#ffa500",text:"".concat(n,"m ago")};const i=Math.floor(n/60);return i<24?{status:"away",color:"#ff6b6b",text:"".concat(i,"h ago")}:{status:"inactive",color:"#666",text:"".concat(Math.floor(i/24),"d ago")}},d=Object.keys(t||{}).length,f=Object.values(t||{}).filter(e=>u(e)).length,p=d-f,m=(e=>{const t={},n=new Set;return Object.entries(e||{}).forEach(e=>{var i;let[r,s]=e;const o=s.name||(null===(i=s.email)||void 0===i?void 0:i.split("@")[0])||"Unknown",a=o.trim().split(" ");let l;l=a.length>=2?(a[0].charAt(0)+a[a.length-1].charAt(0)).toUpperCase():o.substring(0,2).toUpperCase();let c=l,u=1;for(;n.has(c);)c=l.charAt(0)+u,u++;n.add(c),t[r]=c}),t})(t);return(0,vh.jsxs)("div",{className:"simple-members-panel",children:[(0,vh.jsxs)("h3",{children:["\ud83d\udc65 Group Members (",d,")"]}),(0,vh.jsxs)("div",{className:"group-stats",children:[(0,vh.jsxs)("div",{className:"stat-box",children:[(0,vh.jsx)("div",{className:"stat-label",children:"Total"}),(0,vh.jsx)("div",{className:"stat-value",children:d})]}),(0,vh.jsxs)("div",{className:"stat-box",children:[(0,vh.jsx)("div",{className:"stat-label",children:"Online"}),(0,vh.jsx)("div",{className:"stat-value",children:f})]}),(0,vh.jsxs)("div",{className:"stat-box",children:[(0,vh.jsx)("div",{className:"stat-label",children:"Offline"}),(0,vh.jsx)("div",{className:"stat-value",children:p})]})]}),(0,vh.jsx)("div",{className:"members-section-title",children:"Active Members"}),(0,vh.jsx)("div",{className:"members-list",children:Object.entries(t||{}).map((e,t)=>{var r;let[o,d]=e;const f=c[t%c.length],p=o===(null===n||void 0===n?void 0:n.uid),g=(u(d),(e=>{if(null===e||void 0===e||!e.lat||null===e||void 0===e||!e.lng||!n||!n.lat||!n.lng)return null;try{const t=6371,i=(e.lat-n.lat)*Math.PI/180,r=(e.lng-n.lng)*Math.PI/180,s=Math.sin(i/2)*Math.sin(i/2)+Math.cos(n.lat*Math.PI/180)*Math.cos(e.lat*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2),o=t*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)));return o<1?"".concat(Math.round(1e3*o),"m"):"".concat(o.toFixed(1)," km")}catch(t){return null}})(d)),v=((e,t)=>e.battery?e.battery:(t&&navigator.getBattery&&navigator.getBattery().then(e=>100*e.level),85))(d,p),_=m[o]||"U";return(0,vh.jsxs)("div",{className:"member-item ".concat(p?"active":""," ").concat(h(d).status),onClick:()=>((e,t)=>{t.lat&&t.lng&&null!==s&&void 0!==s&&s.current&&s.current.setView([t.lat,t.lng],16),i&&i(e,t)})(o,d),children:[(0,vh.jsxs)("div",{className:"member-header",children:[(0,vh.jsx)("div",{className:"member-avatar",style:{background:f},children:_}),(0,vh.jsxs)("div",{className:"member-info",children:[(0,vh.jsxs)("div",{className:"member-name",children:[d.name||(null===(r=d.email)||void 0===r?void 0:r.split("@")[0])||"Unknown","admin"===d.role&&(0,vh.jsx)("span",{className:"admin-badge",title:"Group Admin",children:"\u2605"})]}),(0,vh.jsxs)("div",{className:"member-status",children:[(0,vh.jsx)("span",{className:"status-dot",style:{backgroundColor:h(d).color}}),(0,vh.jsx)("span",{className:"status-text",style:{color:h(d).color},children:h(d).text}),d.lat&&d.lng&&(0,vh.jsx)("span",{className:"location-indicator",title:"Location shared",children:"\ud83d\udccd"})]})]})]}),(0,vh.jsxs)("div",{className:"member-details",children:[(0,vh.jsx)("div",{className:"member-distance",children:p?"\ud83d\udccd You":g?"\ud83d\udccd ".concat(g):"\ud83d\udccd Unknown"}),(0,vh.jsx)("div",{className:"member-actions",children:(0,vh.jsxs)("div",{className:"member-battery",children:[(0,vh.jsx)("div",{className:"battery-visual",children:(0,vh.jsx)("div",{className:"battery-fill ".concat(v<30?"low":v<70?"mid":""),style:{width:"".concat(v,"%")}})}),v,"%"]})})]}),d.lat&&d.lng&&(0,vh.jsx)("div",{className:"member-location",children:p&&l?(0,vh.jsxs)("span",{className:"location-address",children:["\ud83d\udccd ",l]}):a&&a[o]?(0,vh.jsxs)("span",{className:"location-address",children:["\ud83d\udccd ",a[o]]}):(0,vh.jsxs)("span",{className:"location-coords",children:["\ud83d\udccd ",d.lat.toFixed(4),", ",d.lng.toFixed(4)]})})]},o)})})]})},Gh=t=>{let{onAddDemoUser:n,onRemoveDemoUser:i,demoUsers:s,currentUserLocation:o,onTriggerLaggingAlert:a}=t;const[l,c]=(0,e.useState)(!1),[u,h]=(0,e.useState)({}),[d,f]=(0,e.useState)(!1),[p,m]=(0,e.useState)({}),g=[{name:"Saurav Thakur",email:"saurav@demo.com",offset:{lat:.01,lng:.01},speed:.001},{name:"Deepika Chaudhary",email:"deepika@demo.com",offset:{lat:-.01,lng:.01},speed:.001},{name:"Jiya Gupta",email:"jiya@demo.com",offset:{lat:.01,lng:-.01},speed:.001},{name:"Apurva Mohite",email:"apurva@demo.com",offset:{lat:-.02,lng:-.02},speed:.001,lagging:!0}],v=()=>null!==o&&void 0!==o&&o.lat&&null!==o&&void 0!==o&&o.lng?{lat:o.lat,lng:o.lng}:{lat:19.076,lng:72.8777};return(0,e.useEffect)(()=>{if(l){const e=v(),t={};g.forEach((n,i)=>{const r="demo_".concat(i);t[r]={lat:e.lat+n.offset.lat,lng:e.lng+n.offset.lng,direction:2*Math.random()*Math.PI}}),h(t),g.forEach((e,i)=>{setTimeout(()=>{const s="demo_".concat(i),o=t[s],a=(0,r.A)((0,r.A)({},e),{},{id:s,lat:o.lat,lng:o.lng,timestamp:Date.now(),battery:e.lagging?25:85,accuracy:Math.floor(50*Math.random())+10});n(a)},500*i)});const i=setTimeout(()=>{a&&a({type:"emergency",userId:"demo_0",name:"Saurav Thakur",location:{lat:e.lat+.01,lng:e.lng+.01},timestamp:Date.now(),message:"\ud83d\udea8 Saurav Thakur needs immediate help!",acknowledged:{}})},3e3),s=setTimeout(()=>{if(!d&&a){const e=g.find(e=>e.lagging);if(e){const t="demo_".concat(g.indexOf(e)),n=v();let i=u[t];i||(i={lat:n.lat+e.offset.lat,lng:n.lng+e.offset.lng});const r=((e,t,n,i)=>{const r=e*Math.PI/180,s=n*Math.PI/180,o=(n-e)*Math.PI/180,a=(i-t)*Math.PI/180,l=Math.sin(o/2)*Math.sin(o/2)+Math.cos(r)*Math.cos(s)*Math.sin(a/2)*Math.sin(a/2);return 2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))*6371e3})(n.lat,n.lng,i.lat,i.lng);console.log("Triggering lagging alert for:",e.name,"Distance:",Math.round(r)),a({type:"lagging",userId:t,name:e.name,distance:Math.round(r),maxDistance:500,location:{lat:i.lat,lng:i.lng},timestamp:Date.now(),message:"".concat(e.name," is ").concat(Math.round(r),"m away from the group (limit: 500m)"),acknowledged:{}}),"granted"===Notification.permission&&new Notification("\ud83d\udccd Member Lagging Behind",{body:"".concat(e.name," is ").concat(Math.round(r),"m away from the group!")}),f(!0)}}},5e3),o=setTimeout(()=>{if(a){const e=g.find(e=>e.lagging);if(e){const t="demo_".concat(g.indexOf(e)),n=v(),i=850;a({type:"lagging",userId:t,name:e.name,distance:i,maxDistance:500,location:{lat:n.lat-.03,lng:n.lng-.03},timestamp:Date.now(),message:"\u26a0\ufe0f ".concat(e.name," is still ").concat(i,"m away from the group!"),acknowledged:{}}),"granted"===Notification.permission&&new Notification("\u26a0\ufe0f Still Lagging Behind",{body:"".concat(e.name," is still ").concat(i,"m away from the group!")})}}},15e3),l=setInterval(()=>{const e=v();h(t=>{const i=(0,r.A)({},t);return g.forEach((t,s)=>{const o="demo_".concat(s),a=i[o];if(a){if(t.lagging){const n=Math.atan2(a.lat-e.lat,a.lng-e.lng);i[o]=(0,r.A)((0,r.A)({},a),{},{lat:a.lat+Math.cos(n)*t.speed,lng:a.lng+Math.sin(n)*t.speed})}else{a.direction+=.1;const t=.008;i[o]=(0,r.A)((0,r.A)({},a),{},{lat:e.lat+Math.cos(a.direction)*t,lng:e.lng+Math.sin(a.direction)*t})}const s=p[o]||(t.lagging?25:85),l=Math.max(5,s-.1);m(e=>(0,r.A)((0,r.A)({},e),{},{[o]:l}));const c=(0,r.A)((0,r.A)({},t),{},{id:o,lat:i[o].lat,lng:i[o].lng,timestamp:Date.now(),battery:Math.round(l),accuracy:Math.floor(50*Math.random())+10});n(c)}}),i})},5e3);return()=>{clearInterval(l),clearTimeout(i),clearTimeout(s),clearTimeout(o)}}g.forEach((e,t)=>{i("demo_".concat(t))}),h({}),f(!1),m({})},[l,o]),(0,vh.jsxs)("div",{className:"demo-mode",children:[(0,vh.jsxs)("div",{className:"demo-header",children:[(0,vh.jsx)("h4",{children:"\ud83e\uddea Demo Mode"}),(0,vh.jsxs)("label",{className:"demo-toggle",children:[(0,vh.jsx)("input",{type:"checkbox",checked:l,onChange:e=>c(e.target.checked)}),(0,vh.jsx)("span",{className:"toggle-slider"})]})]}),l&&(0,vh.jsxs)("div",{className:"demo-info",children:[(0,vh.jsx)("p",{children:"Demo users moving around you. Apurva is lagging behind!"}),(0,vh.jsxs)("div",{className:"demo-stats",children:[(0,vh.jsxs)("span",{children:["Active Demo Users: ",Object.keys(s||{}).length]}),(0,vh.jsx)("span",{children:"\u2022 1 Lagging Member"})]})]})]})},Yh=(e,t)=>Ah().divIcon({className:"custom-marker",html:'<div style="background-color: '.concat(e,'; width: 35px; height: 35px; border-radius: 50%; border: 4px solid white; box-shadow: 0 4px 8px rgba(0,0,0,0.4); display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 16px; color: white; text-shadow: 2px 2px 2px rgba(0,0,0,0.8); z-index: 1000;">').concat(t,"</div>"),iconSize:[35,35],iconAnchor:[17,17]}),Qh=Ah().divIcon({className:"emergency-marker",html:'<div style="background-color: #ff0000; width: 40px; height: 40px; border-radius: 50%; border: 4px solid white; box-shadow: 0 4px 8px rgba(0,0,0,0.4); display: flex; align-items: center; justify-content: center; font-size: 20px; animation: pulse 1s infinite; z-index: 1001;">\ud83d\udea8</div>',iconSize:[40,40],iconAnchor:[20,20]}),$h=t=>{var n,i;let{currentGroup:s,onLeaveGroup:o,isAdmin:a=!1}=t;const{user:l}=yh(),[c,u]=(0,e.useState)(s),[h,d]=(0,e.useState)({}),[f,p]=(0,e.useState)(null),[m,g]=(0,e.useState)(!1),[v,_]=(0,e.useState)({lat:19.076,lng:72.8777}),[y,b]=(0,e.useState)(!1),[w,E]=(0,e.useState)(!1),[S,x]=(0,e.useState)([]),[k,C]=(0,e.useState)(""),[T,I]=(0,e.useState)([]),[N,P]=(0,e.useState)(500),[A,L]=(0,e.useState)({}),[R,O]=(0,e.useState)({}),[M,D]=(0,e.useState)(""),[j,F]=(0,e.useState)({}),[z,U]=(0,e.useState)(""),[V,B]=(0,e.useState)(null),[H,q]=(0,e.useState)(!0),[W,Z]=(0,e.useState)({}),[K,G]=(0,e.useState)({laggingAlerts:!0,realNotifications:!0,allowMemberAdditions:!0}),[Y,Q]=(0,e.useState)(!1),[$,J]=(0,e.useState)([]),[X,ee]=(0,e.useState)(!1),[te,ne]=(0,e.useState)("requests"),[ie,re]=(0,e.useState)(500),[se,oe]=(0,e.useState)("m"),[ae,le]=(0,e.useState)([]),[ce,ue]=(0,e.useState)(new Set),[he,de]=(0,e.useState)(new Set),[fe,pe]=(0,e.useState)({}),me=(0,e.useRef)(null),ge=(0,e.useRef)(null),ve=(0,e.useRef)(null),_e=["#ff4444","#44ff44","#4444ff","#ffff44","#ff44ff","#44ffff","#ff8844","#8844ff"],ye=e=>{const t=Date.now()-e,n=Math.floor(t/6e4);if(n<1)return"Just now";if(n<60)return"".concat(n,"m ago");const i=Math.floor(n/60);return i<24?"".concat(i,"h ago"):"".concat(Math.floor(i/24),"d ago")},be=(Object.values(h).filter(e=>e.timestamp&&Date.now()-e.timestamp<6e4).length,f&&ye(f.timestamp),Object.entries(h).filter(e=>{let[t,n]=e;return(n.name||"Unknown").toLowerCase().includes(z.toLowerCase())}),async(e,t)=>{try{const n=await fetch("https://nominatim.openstreetmap.org/reverse?format=json&lat=".concat(e,"&lon=").concat(t,"&zoom=18&addressdetails=1")),i=await n.json();if(i&&i.display_name){const e=i.address||{},t=[];return e.house_number&&e.road?t.push("".concat(e.house_number," ").concat(e.road)):e.road&&t.push(e.road),(e.neighbourhood||e.suburb)&&t.push(e.neighbourhood||e.suburb),(e.city||e.town||e.village)&&t.push(e.city||e.town||e.village),t.slice(0,2).join(", ")||i.display_name.split(",").slice(0,2).join(",")}}catch(n){console.error("Geocoding error:",n)}return""});(0,e.useEffect)(()=>{let e=null,t=null,n=null;if(c&&l&&(e=xh(c,e=>{if(e.exists()){const t=e.val();d(t);const n=(0,r.A)({},A),i=(0,r.A)((0,r.A)({},t),W),s=(e=>{const t={},n=new Set;return Object.entries(e).forEach(e=>{let[i,r]=e;const s=r.name||"Unknown",o=s.trim().split(" ");let a;a=o.length>=2?(o[0].charAt(0)+o[o.length-1].charAt(0)).toUpperCase():s.substring(0,2).toUpperCase();let l=a,c=1;for(;n.has(l);)l=a.charAt(0)+c,c++;n.add(l),t[i]=l}),t})(i);Object.entries(i).forEach((e,t)=>{let[i,s]=e;n[i]||(n[i]=_e[t%_e.length]),s.lat&&s.lng&&!j[i]&&be(s.lat,s.lng).then(e=>{e&&F(t=>(0,r.A)((0,r.A)({},t),{},{[i]:e}))})}),L(n),O(s),f&&me.current&&me.current.setView([f.lat,f.lng],15),a&&f&&xe(t)}}),t=((e,t)=>{const n=(0,ch.ref)(dh,"groups/".concat(e,"/messages"));return(0,ch.Zy)(n,t),()=>(0,ch.AU)(n,t)})(c,e=>{if(e.exists()){const t=Object.values(e.val()).sort((e,t)=>e.timestamp-t.timestamp);x(t)}}),n=((e,t)=>{const n=(0,ch.ref)(dh,"groups/".concat(e,"/emergencies"));return(0,ch.Zy)(n,t),()=>(0,ch.AU)(n,t)})(c,e=>{if(e.exists()){const t=e.val(),n=Object.entries(t).map(e=>{let[t,n]=e;return(0,r.A)({id:t},n)}).filter(e=>(e.acknowledged?Object.keys(e.acknowledged).length:0)<Object.keys(h).length),i=n.filter(e=>!T.some(t=>t.timestamp===e.timestamp));I(n),i.forEach(e=>{const t=e.acknowledged&&e.acknowledged[l.uid],n="".concat(e.type,"-").concat(e.userId,"-").concat(Math.floor(e.timestamp/6e4));if(!t&&!ce.has(n)){if(K.realNotifications&&"granted"===Notification.permission)if("emergency"!==e.type&&e.type){const t=new Notification("\ud83d\udccd Member Lagging Behind",{body:e.message,tag:"lagging-".concat(e.userId),requireInteraction:!0});t.onclick=()=>{Se(e,e.id),t.close()}}else Ee(e);console.log("New alert added:",e)}})}}),m&&navigator.geolocation)){const e=y?{enableHighAccuracy:!0,maximumAge:5e3,timeout:5e3}:{enableHighAccuracy:!0,maximumAge:3e4,timeout:1e4};ge.current=navigator.geolocation.watchPosition(e=>{const t={lat:e.coords.latitude,lng:e.coords.longitude,accuracy:e.coords.accuracy,timestamp:Date.now(),name:l.email.split("@")[0],emergency:y};p(t),_({lat:t.lat,lng:t.lng}),be(t.lat,t.lng).then(e=>{e&&D(e)}),me.current&&me.current.setView([t.lat,t.lng],15),Sh(l.uid,t)},e=>console.error("Location error:",e),e)}return()=>{e&&e(),t&&t(),n&&n(),ge.current&&(navigator.geolocation.clearWatch(ge.current),ge.current=null),I([])}},[c,l,m,y,f,a,W]);const we=()=>{k.trim()&&(((e,t)=>{const n=(0,ch.ref)(dh,"groups/".concat(e,"/messages"));(0,ch.VC)(n,t)})(c,{userId:l.uid,name:l.email.split("@")[0],message:k,timestamp:Date.now()}),C(""))},Ee=e=>{const t="".concat(e.userId,"-").concat(e.timestamp);fe[t]&&clearInterval(fe[t]);const n=()=>{const t=new Notification("\ud83d\udea8 EMERGENCY ALERT!",{body:e.message||"".concat(e.name," needs immediate help!"),tag:"emergency-".concat(e.userId),requireInteraction:!0,icon:"/favicon.ico"});t.onclick=()=>{Se(e,e.id),t.close()},setTimeout(()=>{t.closed||t.close()},5e3)};n();const i=setInterval(()=>{const s=T.some(t=>t.id===e.id),o=e.acknowledged&&e.acknowledged[l.uid];if(!s||o)return clearInterval(i),void pe(e=>{const n=(0,r.A)({},e);return delete n[t],n});n()},1e4);pe(e=>(0,r.A)((0,r.A)({},e),{},{[t]:i}))},Se=async(e,t)=>{try{const n="".concat(e.userId,"-").concat(e.timestamp);fe[n]&&(clearInterval(fe[n]),pe(e=>{const t=(0,r.A)({},e);return delete t[n],t})),e.notificationRef&&e.notificationRef.close();const i="".concat(e.type,"-").concat(e.userId,"-").concat(Math.floor(e.timestamp/6e4));ue(e=>new Set([...e,i])),t&&t.startsWith("demo_alert_")?I(e=>e.filter(e=>e.id!==t)):await((e,t,n)=>{const i=(0,ch.ref)(dh,"groups/".concat(e,"/emergencies/").concat(t,"/acknowledged/").concat(n));return(0,ch.hZ)(i,{userId:n,timestamp:Date.now()})})(c,t,l.uid)}catch(n){console.error("Error acknowledging alert:",n),I(e=>e.filter(e=>e.id!==t))}},xe=e=>{if(!f||!K.laggingAlerts)return;const t=Object.entries(e).filter(e=>{let[t,n]=e;return n.lat&&n.lng&&Date.now()-n.timestamp<3e5}).map(e=>{let[t,n]=e;return(0,r.A)({userId:t},n)});if(t.length<2)return;const n=t.reduce((e,t)=>e+t.lat,0)/t.length,i=t.reduce((e,t)=>e+t.lng,0)/t.length;t.forEach(e=>{const t=ke(n,i,e.lat,e.lng);if(t>N){T.find(t=>"lagging"===t.type&&t.userId===e.userId&&Date.now()-t.timestamp<3e5)||Ch(c,{type:"lagging",userId:e.userId,name:e.name,distance:Math.round(t),maxDistance:N,location:{lat:e.lat,lng:e.lng},timestamp:Date.now(),message:"".concat(e.name," is ").concat(Math.round(t),"m away from the group (limit: ").concat(N,"m)"),acknowledged:{}})}})},ke=(e,t,n,i)=>{const r=e*Math.PI/180,s=n*Math.PI/180,o=(n-e)*Math.PI/180,a=(i-t)*Math.PI/180,l=Math.sin(o/2)*Math.sin(o/2)+Math.cos(r)*Math.cos(s)*Math.sin(a/2)*Math.sin(a/2);return 6371e3*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))},Ce=(e,t)=>"granted"===Notification.permission?new Notification(e,{body:t}):null;(0,e.useEffect)(()=>{"default"===Notification.permission&&Notification.requestPermission().then(e=>{console.log("Notification permission:",e)})},[]),(0,e.useEffect)(()=>{ve.current&&(ve.current.scrollTop=ve.current.scrollHeight)},[S]);return(0,e.useEffect)(()=>{u(s),a&&s&&setTimeout(()=>{J([{id:"req_1",name:"Rahul Sharma",email:"rahul.sharma@example.com",timestamp:Date.now()-3e5,message:"Hi! I would like to join your group for the college trip."},{id:"req_2",name:"Priya Patel",email:"priya.patel@example.com",timestamp:Date.now()-12e4,message:"Can I join your location sharing group?"}])},2e3)},[s,a]),(0,e.useEffect)(()=>{const e=e=>{Y&&!e.target.closest(".profile-menu-container")&&Q(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[Y]),c?(0,vh.jsxs)("div",{className:"map-dashboard",children:[(0,vh.jsxs)("div",{className:"map-header",children:[(0,vh.jsxs)("div",{className:"group-info",children:[(0,vh.jsxs)("div",{className:"group-header-row",children:[a&&(0,vh.jsxs)("button",{className:"requests-btn ".concat($.length>0?"has-requests":""),onClick:()=>ee(!X),title:"Member Requests",children:["\ud83d\udc65",$.length>0&&(0,vh.jsx)("span",{className:"requests-badge",children:$.length})]}),(0,vh.jsx)("h1",{className:"group-title",children:c})]}),(0,vh.jsxs)("div",{className:"member-count",children:[Object.keys(h).length," members"]})]}),(0,vh.jsxs)("div",{className:"header-controls",children:[(0,vh.jsx)("button",{onClick:()=>{g(!m)},className:"control-btn ".concat(m?"active":""),children:m?"\u23f8\ufe0f Pause":"\u25b6\ufe0f Track"}),(0,vh.jsx)("button",{onClick:()=>{const e=!y;b(e),e&&(Ch(c,{type:"emergency",userId:l.uid,name:l.email.split("@")[0],location:f,timestamp:Date.now(),message:"\ud83d\udea8 ".concat(l.email.split("@")[0]," needs immediate help!"),acknowledged:{}}),Ce("\ud83d\udea8 Emergency Mode Activated","Emergency alert sent to all members"))},className:"control-btn emergency ".concat(y?"active":""),children:y?"\ud83d\udea8 Emergency ON":"\ud83d\udea8 Emergency"}),(0,vh.jsx)("button",{onClick:()=>E(!w),className:"control-btn ".concat(w?"active":""),children:"\ud83d\udcac Chat"}),(0,vh.jsxs)("div",{className:"profile-menu-container",children:[(0,vh.jsx)("button",{onClick:()=>Q(!Y),className:"profile-btn",children:(0,vh.jsx)("div",{className:"profile-avatar",children:(null===l||void 0===l||null===(n=l.email)||void 0===n?void 0:n.charAt(0).toUpperCase())||"U"})}),Y&&(0,vh.jsxs)("div",{className:"profile-dropdown",children:[(0,vh.jsxs)("div",{className:"profile-info",children:[(0,vh.jsx)("div",{className:"profile-name",children:(null===l||void 0===l||null===(i=l.email)||void 0===i?void 0:i.split("@")[0])||"User"}),(0,vh.jsx)("div",{className:"profile-email",children:null===l||void 0===l?void 0:l.email})]}),(0,vh.jsxs)("div",{className:"profile-actions",children:[(0,vh.jsx)("button",{onClick:()=>{ge.current&&(navigator.geolocation.clearWatch(ge.current),ge.current=null),o&&o(),Q(!1)},className:"dropdown-btn leave",children:"\ud83d\udeaa Leave Group"}),(0,vh.jsx)("button",{onClick:()=>{(async()=>{try{ge.current&&navigator.geolocation.clearWatch(ge.current),I([]),Object.values(fe).forEach(e=>{clearInterval(e)}),pe({}),ae.forEach(e=>{try{e.close()}catch(nd){}}),le([]),await mh()}catch(e){console.error("Logout error:",e)}})(),Q(!1)},className:"dropdown-btn logout",children:"\u2197\ufe0f Logout"})]})]})]})]})]}),a&&X&&(0,vh.jsxs)("div",{className:"requests-panel",children:[(0,vh.jsxs)("div",{className:"requests-header",children:[(0,vh.jsxs)("div",{className:"requests-tabs",children:[(0,vh.jsxs)("button",{className:"tab-btn ".concat("requests"===te?"active":""),onClick:()=>ne("requests"),children:["\ud83d\udc65 Requests (",$.length,")"]}),(0,vh.jsx)("button",{className:"tab-btn ".concat("distance"===te?"active":""),onClick:()=>ne("distance"),children:"\ud83d\udccd Distance"})]}),(0,vh.jsx)("button",{onClick:()=>ee(!1),className:"close-requests",children:"\u2715"})]}),(0,vh.jsxs)("div",{className:"tab-content",children:["requests"===te&&(0,vh.jsx)("div",{className:"requests-list",children:0===$.length?(0,vh.jsx)("div",{className:"no-requests",children:(0,vh.jsx)("p",{children:"No pending requests"})}):$.map(e=>(0,vh.jsxs)("div",{className:"request-item",children:[(0,vh.jsxs)("div",{className:"request-info",children:[(0,vh.jsx)("div",{className:"request-name",children:e.name}),(0,vh.jsx)("div",{className:"request-email",children:e.email}),(0,vh.jsx)("div",{className:"request-time",children:ye(e.timestamp)}),e.message&&(0,vh.jsxs)("div",{className:"request-message",children:['"',e.message,'"']})]}),(0,vh.jsxs)("div",{className:"request-actions",children:[(0,vh.jsx)("button",{onClick:()=>(e=>{const t=$.find(t=>t.id===e);if(t){J(t=>t.filter(t=>t.id!==e));const n={id:"approved_".concat(e),name:t.name,email:t.email,lat:f?f.lat+.01*(Math.random()-.5):19.076,lng:f?f.lng+.01*(Math.random()-.5):72.8777,timestamp:Date.now(),battery:Math.floor(100*Math.random()),accuracy:Math.floor(50*Math.random())+10};Z(e=>(0,r.A)((0,r.A)({},e),{},{[n.id]:n})),he.has("approve_".concat(e))||(Ce("\u2713 Request Approved","".concat(t.name," has been added to the group")),de(t=>new Set([...t,"approve_".concat(e)])))}})(e.id),className:"approve-btn",children:"\u2713 Accept"}),(0,vh.jsx)("button",{onClick:()=>(e=>{const t=$.find(t=>t.id===e);t&&(J(t=>t.filter(t=>t.id!==e)),he.has("reject_".concat(e))||(Ce("\u2715 Request Rejected","".concat(t.name,"'s request was rejected")),de(t=>new Set([...t,"reject_".concat(e)]))))})(e.id),className:"reject-btn",children:"\u2715 Reject"})]})]},e.id))}),"distance"===te&&(0,vh.jsx)("div",{className:"distance-settings",children:(0,vh.jsxs)("div",{className:"distance-setting-item",children:[(0,vh.jsxs)("div",{className:"setting-header",children:[(0,vh.jsx)("h4",{children:"\ud83d\udccd Lag Alert Distance"}),(0,vh.jsx)("p",{children:"Set maximum distance before triggering lagging alerts"})]}),(0,vh.jsxs)("div",{className:"distance-control",children:[(0,vh.jsxs)("div",{className:"distance-input-group",children:[(0,vh.jsx)("input",{type:"number",min:"1",max:"999",value:ie,onChange:e=>{const t=Number(e.target.value);re(t);const n="km"===se?1e3*t:"mi"===se?1609.34*t:"ft"===se?.3048*t:t;P(Math.round(n))},className:"distance-number-input",placeholder:"Enter distance"}),(0,vh.jsxs)("select",{value:se,onChange:e=>{const t=e.target.value;oe(t);const n="km"===t?N/1e3:"mi"===t?N/1609.34:"ft"===t?N/.3048:N;re(Math.round(100*n)/100)},className:"distance-unit-select",children:[(0,vh.jsx)("option",{value:"m",children:"meters"}),(0,vh.jsx)("option",{value:"km",children:"kilometers"}),(0,vh.jsx)("option",{value:"ft",children:"feet"}),(0,vh.jsx)("option",{value:"mi",children:"miles"})]})]}),(0,vh.jsx)("div",{className:"current-distance",children:(0,vh.jsxs)("span",{children:["Current: ",N,"m"]})})]}),(0,vh.jsxs)("div",{className:"distance-presets",children:[(0,vh.jsx)("button",{onClick:()=>{re(100),oe("m"),P(100)},className:"preset-btn",children:"Walking (100m)"}),(0,vh.jsx)("button",{onClick:()=>{re(500),oe("m"),P(500)},className:"preset-btn",children:"Hiking (500m)"}),(0,vh.jsx)("button",{onClick:()=>{re(1),oe("km"),P(1e3)},className:"preset-btn",children:"Cycling (1km)"}),(0,vh.jsx)("button",{onClick:()=>{re(2),oe("km"),P(2e3)},className:"preset-btn",children:"Driving (2km)"})]})]})})]})]}),(0,vh.jsxs)("div",{className:"map-content",children:[(0,vh.jsx)("div",{className:"map-container",children:(0,vh.jsxs)(Oh,{center:[v.lat,v.lng],zoom:13,style:{height:"500px",width:"100%"},whenCreated:e=>{me.current=e},children:[(0,vh.jsx)(Hh,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),f&&(0,vh.jsx)(Wh,{position:[f.lat,f.lng],icon:y?Qh:Yh("#00ff88",R[l.uid]||"ME"),children:(0,vh.jsx)(Zh,{children:(0,vh.jsxs)("div",{className:"member-info-window",children:[(0,vh.jsxs)("h3",{style:{color:"#00ff88"},children:["\ud83d\udccd You ",y&&" \ud83d\udea8"]}),M&&(0,vh.jsx)("p",{children:(0,vh.jsxs)("strong",{children:["\ud83d\udccd ",M]})}),(0,vh.jsxs)("p",{children:["Updated: ",ye(f.timestamp)]}),(0,vh.jsxs)("p",{children:["Accuracy: \xb1",f.accuracy,"m"]}),(0,vh.jsxs)("p",{children:["Coordinates: ",f.lat.toFixed(6),", ",f.lng.toFixed(6)]})]})})}),Object.entries((0,r.A)((0,r.A)({},h),W)).map(e=>{let[t,n]=e;return n.lat&&n.lng&&t!==l.uid&&(0,vh.jsx)(Wh,{position:[n.lat,n.lng],icon:n.emergency?Qh:Yh(A[t]||"#666666",R[t]||"?"),children:(0,vh.jsx)(Zh,{children:(0,vh.jsxs)("div",{className:"member-info-window",children:[(0,vh.jsxs)("h3",{style:{color:A[t]||"#666666"},children:[n.name||"Unknown",n.emergency&&" \ud83d\udea8","admin"===n.role&&" \ud83d\udc51",t.startsWith("demo_")&&" \ud83e\uddea"]}),j[t]&&(0,vh.jsx)("p",{children:(0,vh.jsxs)("strong",{children:["\ud83d\udccd ",j[t]]})}),(0,vh.jsxs)("p",{children:["Last seen: ",ye(n.timestamp)]}),(0,vh.jsxs)("p",{children:["Accuracy: \xb1",n.accuracy,"m"]}),f&&(0,vh.jsxs)("p",{children:["Distance: ",ke(f.lat,f.lng,n.lat,n.lng).toFixed(0),"m away"]}),(0,vh.jsxs)("p",{children:["Coordinates: ",n.lat.toFixed(6),", ",n.lng.toFixed(6)]})]})})},t)})]})}),(0,vh.jsxs)("div",{className:"side-panel",style:{width:"350px"},children:[(0,vh.jsx)(Gh,{onAddDemoUser:e=>{Z(t=>(0,r.A)((0,r.A)({},t),{},{[e.id]:e}))},onRemoveDemoUser:e=>{Z(t=>{const n=(0,r.A)({},t);return delete n[e],n})},onTriggerLaggingAlert:e=>{console.log("Received lagging alert:",e);const t=(0,r.A)((0,r.A)({},e),{},{id:"demo_alert_".concat(Date.now())});I(n=>{if(n.find(t=>t.userId===e.userId&&t.type===e.type&&Math.abs(t.timestamp-e.timestamp)<5e3))return console.log("Duplicate alert prevented"),n;const i=[...n,t];return console.log("Updated emergency alerts:",i),i})},demoUsers:W,currentUserLocation:f}),(0,vh.jsx)(Kh,{members:(0,r.A)((0,r.A)({},h),W),currentUser:(0,r.A)({uid:l.uid,role:a?"admin":"member"},f),currentGroup:c,mapRef:me,memberAddresses:j,myAddress:M,onMemberClick:(e,t)=>{console.log("Member clicked:",t.name||t.email),B(e)},onSendMessage:(e,t)=>{console.log("Send message to:",t),E(!0),C("@".concat(t," "))}}),(0,vh.jsxs)("div",{className:"status-panel",children:[(0,vh.jsx)("h3",{children:"\ud83d\udccd Your Status"}),(0,vh.jsxs)("div",{className:"status-info",children:[(0,vh.jsxs)("div",{className:"status-item",children:[(0,vh.jsx)("span",{className:"status-label",children:"Location Tracking:"}),(0,vh.jsx)("span",{className:"status-value ".concat(m?"active":"inactive"),children:m?"\ud83d\udfe2 Active":"\ud83d\udd34 Paused"})]}),(0,vh.jsxs)("div",{className:"status-item",children:[(0,vh.jsx)("span",{className:"status-label",children:"Emergency Mode:"}),(0,vh.jsx)("span",{className:"status-value ".concat(y?"emergency-text":"inactive"),children:y?"\ud83d\udea8 ACTIVE":"\u26ab Off"})]}),f?(0,vh.jsxs)(vh.Fragment,{children:[(0,vh.jsxs)("div",{className:"status-item",children:[(0,vh.jsx)("span",{className:"status-label",children:"Last Update:"}),(0,vh.jsx)("span",{className:"status-value",children:ye(f.timestamp)})]}),(0,vh.jsxs)("div",{className:"status-item",children:[(0,vh.jsx)("span",{className:"status-label",children:"Accuracy:"}),(0,vh.jsxs)("span",{className:"status-value",children:["\xb1",f.accuracy,"m"]})]}),M&&(0,vh.jsxs)("div",{className:"status-item",children:[(0,vh.jsx)("span",{className:"status-label",children:"Address:"}),(0,vh.jsx)("span",{className:"status-value address-text",children:M})]}),(0,vh.jsxs)("div",{className:"status-item coordinates",children:[(0,vh.jsx)("span",{className:"status-label",children:"Coordinates:"}),(0,vh.jsxs)("span",{className:"status-value",children:[f.lat.toFixed(6),", ",f.lng.toFixed(6)]})]})]}):(0,vh.jsxs)("div",{className:"status-item",children:[(0,vh.jsx)("span",{className:"status-label",children:"Location:"}),(0,vh.jsx)("span",{className:"status-value inactive",children:"Not available"})]})]})]}),T.length>0&&(0,vh.jsxs)("div",{className:"emergency-panel",children:[(0,vh.jsx)("h3",{children:"\ud83d\udea8 Emergency Alerts"}),T.map((e,t)=>{const n=e.acknowledged&&e.acknowledged[l.uid],i=e.acknowledged?Object.keys(e.acknowledged).length:0,r=Object.keys(h).length;return(0,vh.jsxs)("div",{className:"emergency-alert ".concat("lagging"===e.type?"lagging-alert":""," ").concat(n?"acknowledged":""),children:[(0,vh.jsxs)("div",{className:"alert-header",children:[(0,vh.jsxs)("strong",{children:["lagging"===e.type?"\ud83d\udccd":"\ud83d\udea8"," ",e.name]}),(0,vh.jsx)("small",{children:ye(e.timestamp)})]}),(0,vh.jsx)("p",{children:e.message}),"lagging"===e.type&&(0,vh.jsxs)("div",{className:"lagging-info",children:[(0,vh.jsxs)("span",{children:["Distance: ",e.distance,"m"]}),(0,vh.jsxs)("span",{children:["Limit: ",e.maxDistance,"m"]})]}),(0,vh.jsxs)("div",{className:"alert-actions",children:[!n&&(0,vh.jsx)("button",{onClick:()=>Se(e,e.id),className:"ack-btn",children:"\u2713 Got it"}),(0,vh.jsxs)("span",{className:"ack-count",children:[i,"/",r," seen"]})]})]},e.id||t)})]})]})]}),w&&(0,vh.jsxs)("div",{className:"chat-panel",children:[(0,vh.jsxs)("div",{className:"chat-header",children:[(0,vh.jsx)("h3",{children:"\ud83d\udcac Group Chat"}),(0,vh.jsx)("button",{onClick:()=>E(!1),className:"close-chat",children:"\u2715"})]}),(0,vh.jsx)("div",{className:"chat-messages",ref:ve,children:S.map((e,t)=>(0,vh.jsxs)("div",{className:"chat-message",children:[(0,vh.jsx)("div",{className:"message-sender",style:{color:A[e.userId]||"#00ff88"},children:e.name}),(0,vh.jsx)("div",{className:"message-text",children:e.message}),(0,vh.jsx)("div",{className:"message-time",children:ye(e.timestamp)})]},t))}),(0,vh.jsxs)("div",{className:"chat-input",children:[(0,vh.jsx)("input",{type:"text",value:k,onChange:e=>C(e.target.value),onKeyPress:e=>"Enter"===e.key&&we(),placeholder:"Type a message..."}),(0,vh.jsx)("button",{onClick:we,children:"Send"})]})]})]}):(0,vh.jsx)("div",{children:"Loading..."})},Jh=()=>{const{user:t}=yh(),[i,s]=(0,e.useState)(""),[o,a]=(0,e.useState)(null),[l,c]=(0,e.useState)({}),[u,h]=(0,e.useState)(null),[d,f]=(0,e.useState)(!1),[p,m]=(0,e.useState)(!1),[g,v]=(0,e.useState)(""),[_,y]=(0,e.useState)(""),[b,w]=(0,e.useState)(""),[E,S]=(0,e.useState)(!1),[x,k]=(0,e.useState)([]),[C,T]=(0,e.useState)(!0),[I,N]=(0,e.useState)(!1),[P,A]=(0,e.useState)(null);(0,e.useEffect)(()=>{(async()=>{if(t)try{T(!0);const{get:e,ref:i}=await Promise.resolve().then(n.bind(n,800)),s=i(dh,"groups"),o=await e(s);if(o.exists()){const e=[];o.forEach(n=>{const i=n.val();i.members&&i.members[t.uid]&&e.push((0,r.A)({id:n.key},i))}),k(e),console.log("Found user groups:",e)}else console.log("No groups found in database")}catch(e){console.error("Error loading user groups:",e)}finally{T(!1)}})()},[t]),(0,e.useEffect)(()=>{let e=null,n=null;return o&&t&&(e=xh(o,e=>{e.exists()&&c(e.val())}),d&&navigator.geolocation&&(n=navigator.geolocation.watchPosition(e=>{const n={lat:e.coords.latitude,lng:e.coords.longitude,accuracy:e.coords.accuracy,timestamp:Date.now(),name:t.email.split("@")[0]};h(n),Sh(t.uid,n)},e=>console.error("Location error:",e),{enableHighAccuracy:!0,maximumAge:1e4,timeout:5e3}))),()=>{e&&e(),n&&navigator.geolocation.clearWatch(n)}},[o,t,d]);const L=e=>{a(e.id),f(!0)},R=async()=>{if(i.trim()&&t){console.log("Starting join process with code:",i);try{const e=await Th(i);if(!e)return void alert("Group code not found. Please check the code and try again.");const{get:r,ref:s}=await Promise.resolve().then(n.bind(n,800)),o=s(dh,"groups/".concat(e)),l=await r(o);console.log("Group lookup:",{actualGroupId:e,exists:l.exists()});let c=!1;if(l.exists()){const e=l.val();console.log("Full group data:",e),c=e.creator===t.uid||e.creatorEmail===t.email,console.log("Creator check:",{groupCreator:e.creator,groupCreatorEmail:e.creatorEmail,currentUserId:t.uid,currentUserEmail:t.email,isCreator:c})}else console.log("Group not found!");const u=s(dh,"groups/".concat(e,"/members/").concat(t.uid)),h=await r(u);let d="member";h.exists()?d=h.val().role||"member":c&&(d="admin"),await kh(e,t.uid,{name:t.email.split("@")[0],email:t.email,role:d,joinedAt:Date.now()}),a(e),f(!0)}catch(e){alert("Failed to join group: "+e.message)}}},O=async()=>{if(!g.trim()||!t)return;const e=(()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let t="";for(let n=0;n<6;n++)t+=e.charAt(Math.floor(36*Math.random()));return t})(),n="group_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9));try{await((e,t,n)=>{const i=(0,ch.ref)(dh,"groups/".concat(e));return(0,ch.hZ)(i,(0,r.A)((0,r.A)({},n),{},{creator:t,created:Date.now()}))})(n,t.uid,{code:e,name:g,description:_,creator:t.uid,creatorEmail:t.email,createdAt:Date.now()}),await kh(n,t.uid,{name:t.email.split("@")[0],email:t.email,role:"admin",joinedAt:Date.now()},!0),w(e),S(!0),m(!1)}catch(i){alert("Failed to create group: "+i.message)}},M=async()=>{try{const e=await Th(b);e&&(a(e),f(!0))}catch(e){console.error("Error joining created group:",e)}S(!1),v(""),y(""),w("")},D=()=>{const e="\ud83c\udf86 Join my ConnectUs group!\n\n\ud83d\udccd Group: ".concat(g,"\n").concat(_?"\ud83d\udcdd ".concat(_,"\n"):"","\ud83d\udd11 Code: ").concat(b,"\n\n\ud83d\udc65 Use this code to join our live location tracking group on ConnectUs!");navigator.share?navigator.share({title:"Join ".concat(g," on ConnectUs"),text:e}):(navigator.clipboard.writeText(e),alert("Group details copied to clipboard!"))},j=()=>{a(null),f(!1),c({}),h(null)},F=async()=>{try{await mh()}catch(e){console.error("Logout error:",e)}},z=e=>{const t=Date.now()-e,n=Math.floor(t/6e4);if(n<1)return"Just now";if(n<60)return"".concat(n,"m ago");const i=Math.floor(n/60);return i<24?"".concat(i,"h ago"):"".concat(Math.floor(i/24),"d ago")};if(o){var U;const e="admin"===(null===(U=l[null===t||void 0===t?void 0:t.uid])||void 0===U?void 0:U.role);return console.log("Admin check:",{userId:null===t||void 0===t?void 0:t.uid,memberData:l[null===t||void 0===t?void 0:t.uid],isAdmin:e}),(0,vh.jsx)($h,{currentGroup:o,onLeaveGroup:j,isAdmin:e})}var V,B;return o?(0,vh.jsxs)("div",{className:"dashboard-container",children:[(0,vh.jsxs)("div",{className:"dashboard-header",children:[(0,vh.jsxs)("div",{className:"group-info",children:[(0,vh.jsxs)("h1",{className:"dashboard-title",children:["Connect",(0,vh.jsx)("span",{className:"title-accent",children:"Us"})]}),(0,vh.jsxs)("div",{className:"group-details",children:[(0,vh.jsxs)("span",{className:"group-id",children:["\ud83c\udf86 ",o]}),(0,vh.jsx)("span",{className:"tracking-status ".concat(d?"active":"inactive"),children:d?"\ud83d\udfe2 TRACKING":"\ud83d\udd34 PAUSED"})]})]}),(0,vh.jsxs)("div",{className:"header-actions",children:[(0,vh.jsx)("button",{onClick:j,className:"leave-btn",children:"\ud83d\udeaa Leave Group"}),(0,vh.jsx)("button",{onClick:F,className:"logout-btn",children:"\u25b7 Logout"})]})]}),(0,vh.jsxs)("div",{className:"dashboard-content",children:[(0,vh.jsxs)("div",{className:"my-location-card",children:[(0,vh.jsx)("h3",{children:"\ud83d\udccd My Location"}),u?(0,vh.jsxs)("div",{className:"location-info",children:[(0,vh.jsxs)("div",{className:"coordinates",children:[(0,vh.jsxs)("span",{children:["Lat: ",u.lat.toFixed(6)]}),(0,vh.jsxs)("span",{children:["Lng: ",u.lng.toFixed(6)]})]}),(0,vh.jsxs)("div",{className:"accuracy",children:["Accuracy: \xb1",u.accuracy,"m"]}),(0,vh.jsxs)("div",{className:"timestamp",children:["Updated: ",z(u.timestamp)]})]}):(0,vh.jsx)("div",{className:"no-location",children:d?"Getting location...":"Location tracking disabled"})]}),(0,vh.jsxs)("div",{className:"group-members-card",children:[(0,vh.jsxs)("h3",{children:["\ud83d\udc65 Adventure Buddies (",Object.keys(l).length,")"]}),(0,vh.jsx)("div",{className:"members-list",children:Object.entries(l).map(e=>{var n;let[i,r]=e;return(0,vh.jsxs)("div",{className:"member-item ".concat(i===t.uid?"me":""),children:[(0,vh.jsxs)("div",{className:"member-info",children:[(0,vh.jsxs)("div",{className:"member-name",children:[r.name||(null===(n=r.email)||void 0===n?void 0:n.split("@")[0])||"Unknown",i===t.uid&&(0,vh.jsx)("span",{className:"me-badge",children:"(You)"})]}),r.lat&&r.lng&&(0,vh.jsxs)("div",{className:"member-location",children:[(0,vh.jsxs)("span",{children:["Lat: ",r.lat.toFixed(6)]}),(0,vh.jsxs)("span",{children:["Lng: ",r.lng.toFixed(6)]}),(0,vh.jsx)("span",{className:"last-seen",children:z(r.timestamp)})]})]}),(0,vh.jsx)("div",{className:"status-dot ".concat(r.timestamp&&Date.now()-r.timestamp<6e4?"online":"offline")})]},i)})})]}),(0,vh.jsx)("div",{className:"tracking-controls",children:(0,vh.jsx)("button",{onClick:()=>f(!d),className:"tracking-btn ".concat(d?"stop":"start"),children:d?"\u23f8\ufe0f Pause Tracking":"\ud83c\udf86 Start Tracking"})})]})]}):(0,vh.jsxs)("div",{className:"dashboard-container",children:[(0,vh.jsxs)("div",{className:"dashboard-header",children:[(0,vh.jsxs)("h1",{className:"dashboard-title",children:["Connect",(0,vh.jsx)("span",{className:"title-accent",children:"Us"})]}),(0,vh.jsx)("button",{onClick:F,className:"logout-btn",children:"\u25b7 Logout"})]}),(0,vh.jsxs)("div",{className:"join-group-section",children:[(0,vh.jsxs)("div",{className:"welcome-header",children:[(0,vh.jsx)("div",{className:"user-avatar",children:null===t||void 0===t||null===(V=t.email)||void 0===V?void 0:V.charAt(0).toUpperCase()}),(0,vh.jsxs)("h1",{className:"page-title",children:["Welcome back, ",null===t||void 0===t||null===(B=t.email)||void 0===B?void 0:B.split("@")[0],"!"]}),(0,vh.jsx)("p",{className:"page-subtitle",children:"Ready for your next adventure? Choose your path below"})]}),(0,vh.jsxs)("div",{className:"options-container ".concat(P?"has-expanded":""),children:[(0,vh.jsxs)("div",{className:"option-card join-card ".concat("join"===P?"expanded":P?"blurred":""),children:[(0,vh.jsxs)("div",{className:"card-header",children:[(0,vh.jsx)("div",{className:"card-icon",children:"\ud83c\udfaf"}),(0,vh.jsx)("div",{className:"card-badge",children:"QUICK START"})]}),(0,vh.jsx)("h3",{children:"Join Adventure"}),(0,vh.jsx)("p",{children:"Connect with friends who are already tracking"}),(0,vh.jsxs)("div",{className:"input-section",children:[(0,vh.jsx)("label",{className:"input-label",children:"Group Code"}),(0,vh.jsx)("div",{className:"enhanced-input",children:(0,vh.jsx)("input",{type:"text",placeholder:"Enter 6-digit code",value:i,onChange:e=>s(e.target.value.toUpperCase()),className:"group-code-input",maxLength:"15"})})]}),(0,vh.jsxs)("button",{onClick:R,className:"option-btn join-btn",disabled:6!==i.length,children:[(0,vh.jsx)("span",{className:"btn-icon",children:"\ud83d\ude80"}),"Join Adventure"]})]}),!C&&x.length>0&&(0,vh.jsxs)("div",{className:"option-card my-groups-card ".concat("groups"===P?"expanded":P?"blurred":""),children:["groups"!==P&&(0,vh.jsxs)(vh.Fragment,{children:[(0,vh.jsxs)("div",{className:"card-header",children:[(0,vh.jsx)("div",{className:"card-icon",children:"\ud83d\udcc1"}),(0,vh.jsx)("div",{className:"card-badge",children:"MY GROUPS"})]}),(0,vh.jsx)("h3",{children:"My Adventures"}),(0,vh.jsx)("p",{children:"Continue with your existing groups"})]}),"groups"!==P?(0,vh.jsxs)(vh.Fragment,{children:[(0,vh.jsxs)("div",{className:"groups-preview",children:[(0,vh.jsxs)("div",{className:"preview-header",children:["You have ",x.length," group",1!==x.length?"s":"",":"]}),(0,vh.jsxs)("div",{className:"preview-items",children:[x.slice(0,2).map(e=>{var n;const i=null===(n=e.members)||void 0===n?void 0:n[t.uid],r="admin"===(null===i||void 0===i?void 0:i.role);return(0,vh.jsxs)("div",{className:"preview-item",children:[(0,vh.jsx)("span",{className:"preview-icon",children:"\ud83c\udf86"}),(0,vh.jsxs)("span",{children:[e.name," ",r&&"(Admin)"]})]},e.id)}),x.length>2&&(0,vh.jsxs)("div",{className:"preview-item",children:[(0,vh.jsx)("span",{className:"preview-icon",children:"+"}),(0,vh.jsxs)("span",{children:[x.length-2," more..."]})]})]})]}),(0,vh.jsxs)("button",{onClick:()=>A("groups"),className:"option-btn my-groups-btn",children:[(0,vh.jsx)("span",{className:"btn-icon",children:"\ud83d\udcc1"}),"View My Groups"]})]}):null,"groups"===P&&(0,vh.jsxs)("div",{className:"expanded-content",children:[(0,vh.jsxs)("div",{className:"expanded-header",children:[(0,vh.jsx)("h3",{children:"\ud83d\udcc1 My Groups"}),(0,vh.jsx)("button",{onClick:()=>A(null),className:"close-btn",children:"\u2190 Back"})]}),(0,vh.jsx)("div",{className:"groups-grid",children:x.map(e=>{var n;const i=null===(n=e.members)||void 0===n?void 0:n[t.uid],r="admin"===(null===i||void 0===i?void 0:i.role);return(0,vh.jsxs)("div",{className:"group-grid-item",onClick:()=>L(e),children:[(0,vh.jsxs)("div",{className:"group-name",children:[e.name,r&&(0,vh.jsx)("span",{className:"admin-indicator",children:"ADMIN"})]}),(0,vh.jsxs)("div",{className:"group-code",children:["Code: ",e.code]}),e.description&&(0,vh.jsx)("div",{className:"group-desc",children:e.description})]},e.id)})})]})]}),(0,vh.jsxs)("div",{className:"option-card create-card ".concat("create"===P?"expanded":P?"blurred":""),children:["create"!==P&&(0,vh.jsxs)(vh.Fragment,{children:[(0,vh.jsxs)("div",{className:"card-header",children:[(0,vh.jsx)("div",{className:"card-icon",children:"\u2b50"}),(0,vh.jsx)("div",{className:"card-badge",children:"LEADER"})]}),(0,vh.jsx)("h3",{children:"Start New Adventure"}),(0,vh.jsx)("p",{children:"Be the leader and create your own tracking group"})]}),"create"!==P?(0,vh.jsxs)(vh.Fragment,{children:[(0,vh.jsxs)("div",{className:"create-preview",children:[(0,vh.jsx)("div",{className:"preview-header",children:"What you'll get:"}),(0,vh.jsxs)("div",{className:"preview-items",children:[(0,vh.jsxs)("div",{className:"preview-item",children:[(0,vh.jsx)("span",{className:"preview-icon",children:"\ud83d\udd17"}),(0,vh.jsx)("span",{children:"Shareable group code"})]}),(0,vh.jsxs)("div",{className:"preview-item",children:[(0,vh.jsx)("span",{className:"preview-icon",children:"\ud83d\udc65"}),(0,vh.jsx)("span",{children:"Unlimited members"})]}),(0,vh.jsxs)("div",{className:"preview-item",children:[(0,vh.jsx)("span",{className:"preview-icon",children:"\u2699\ufe0f"}),(0,vh.jsx)("span",{children:"Full control"})]})]})]}),(0,vh.jsxs)("button",{onClick:()=>A("create"),className:"option-btn create-btn",children:[(0,vh.jsx)("span",{className:"btn-icon",children:"\u2728"}),"Start Creating"]})]}):null,"create"===P&&(0,vh.jsx)("div",{className:"expanded-content",children:(0,vh.jsxs)("div",{className:"create-form-enhanced",children:[(0,vh.jsxs)("div",{className:"input-section",children:[(0,vh.jsx)("label",{className:"input-label",children:"Adventure Name"}),(0,vh.jsxs)("div",{className:"enhanced-input",children:[(0,vh.jsx)("input",{type:"text",placeholder:"e.g., Weekend Hike, Family Trip",value:g,onChange:e=>v(e.target.value),className:"group-name-input",maxLength:"25"}),(0,vh.jsxs)("div",{className:"char-counter",children:[g.length,"/25"]})]})]}),(0,vh.jsxs)("div",{className:"input-section",children:[(0,vh.jsx)("label",{className:"input-label",children:"Description (Optional)"}),(0,vh.jsxs)("div",{className:"enhanced-input",children:[(0,vh.jsx)("textarea",{placeholder:"Brief description of your adventure...",value:_,onChange:e=>y(e.target.value),className:"group-description-input",maxLength:"100",rows:"2"}),(0,vh.jsxs)("div",{className:"char-counter",children:[_.length,"/100"]})]})]}),(0,vh.jsxs)("div",{className:"action-buttons",children:[(0,vh.jsxs)("button",{onClick:O,className:"option-btn create-btn",children:[(0,vh.jsx)("span",{className:"btn-icon",children:"\ud83d\ude80"}),"Create"]}),(0,vh.jsx)("button",{onClick:()=>{A(null),v(""),y("")},className:"option-btn cancel-btn",children:"Cancel"})]})]})})]})]})]}),I&&(0,vh.jsx)("div",{className:"modal-overlay",children:(0,vh.jsxs)("div",{className:"groups-modal",children:[(0,vh.jsxs)("div",{className:"modal-header",children:[(0,vh.jsx)("h3",{children:"\ud83d\udcc1 My Groups"}),(0,vh.jsx)("button",{onClick:()=>N(!1),className:"close-btn",children:"\u2715"})]}),(0,vh.jsx)("div",{className:"groups-grid-modal",children:x.map(e=>{var n;const i=null===(n=e.members)||void 0===n?void 0:n[t.uid],r="admin"===(null===i||void 0===i?void 0:i.role);return(0,vh.jsxs)("div",{className:"group-grid-item",onClick:()=>L(e),children:[(0,vh.jsxs)("div",{className:"group-name",children:[e.name,r&&(0,vh.jsx)("span",{className:"admin-indicator",children:"ADMIN"})]}),(0,vh.jsxs)("div",{className:"group-code",children:["Code: ",e.code]}),e.description&&(0,vh.jsx)("div",{className:"group-desc",children:e.description})]},e.id)})})]})}),p&&(0,vh.jsx)("div",{className:"modal-overlay",children:(0,vh.jsxs)("div",{className:"create-modal",children:[(0,vh.jsxs)("div",{className:"modal-header",children:[(0,vh.jsx)("h3",{children:"\u2728 Create New Group"}),(0,vh.jsx)("button",{onClick:()=>m(!1),className:"close-btn",children:"\u2715"})]}),(0,vh.jsxs)("div",{className:"create-form-enhanced",children:[(0,vh.jsxs)("div",{className:"input-section",children:[(0,vh.jsx)("label",{className:"input-label",children:"Adventure Name"}),(0,vh.jsxs)("div",{className:"enhanced-input",children:[(0,vh.jsx)("input",{type:"text",placeholder:"e.g., Weekend Hike, Family Trip",value:g,onChange:e=>v(e.target.value),className:"group-name-input",maxLength:"25"}),(0,vh.jsxs)("div",{className:"char-counter",children:[g.length,"/25"]})]})]}),(0,vh.jsxs)("div",{className:"input-section",children:[(0,vh.jsx)("label",{className:"input-label",children:"Description (Optional)"}),(0,vh.jsxs)("div",{className:"enhanced-input",children:[(0,vh.jsx)("textarea",{placeholder:"Brief description of your adventure...",value:_,onChange:e=>y(e.target.value),className:"group-description-input",maxLength:"100",rows:"2"}),(0,vh.jsxs)("div",{className:"char-counter",children:[_.length,"/100"]})]})]}),(0,vh.jsxs)("div",{className:"action-buttons",children:[(0,vh.jsxs)("button",{onClick:O,className:"option-btn create-btn",children:[(0,vh.jsx)("span",{className:"btn-icon",children:"\ud83d\ude80"}),"Create"]}),(0,vh.jsx)("button",{onClick:()=>{m(!1),v(""),y("")},className:"option-btn cancel-btn",children:"Cancel"})]})]})]})}),E&&(0,vh.jsx)("div",{className:"modal-overlay",children:(0,vh.jsxs)("div",{className:"share-modal",children:[(0,vh.jsxs)("div",{className:"modal-header",children:[(0,vh.jsx)("h3",{children:"\ud83c\udf86 Group Created Successfully!"}),(0,vh.jsx)("button",{onClick:()=>S(!1),className:"close-btn",children:"\u2715"})]}),(0,vh.jsx)("div",{className:"group-details",children:(0,vh.jsxs)("div",{className:"group-info-card",children:[(0,vh.jsx)("div",{className:"group-name",children:g}),_&&(0,vh.jsx)("div",{className:"group-desc",children:_}),(0,vh.jsxs)("div",{className:"group-code-display",children:[(0,vh.jsx)("span",{className:"code-label",children:"Group Code:"}),(0,vh.jsx)("span",{className:"code-value",children:b})]})]})}),(0,vh.jsxs)("div",{className:"share-options",children:[(0,vh.jsxs)("button",{onClick:D,className:"share-btn",children:[(0,vh.jsx)("span",{className:"btn-icon",children:"\ud83d\udce4"}),"Share Group"]}),(0,vh.jsxs)("button",{onClick:()=>{navigator.clipboard.writeText(b),alert("Code copied!")},className:"copy-btn",children:[(0,vh.jsx)("span",{className:"btn-icon",children:"\ud83d\udccb"}),"Copy Code"]})]}),(0,vh.jsxs)("div",{className:"modal-actions",children:[(0,vh.jsxs)("button",{onClick:M,className:"join-now-btn",children:[(0,vh.jsx)("span",{className:"btn-icon",children:"\ud83d\ude80"}),"Start Tracking Now"]}),(0,vh.jsx)("button",{onClick:()=>{S(!1),v(""),y(""),w("")},className:"later-btn",children:"Share Later"})]})]})})]})};function Xh(){const{user:e,loading:t}=yh();if(t)return(0,vh.jsxs)("div",{className:"loading-screen",children:[(0,vh.jsx)("div",{className:"radar-loader"}),(0,vh.jsx)("div",{className:"loading-text",children:"CONNECTING..."})]});const n=e&&e.emailVerified;return(0,vh.jsxs)(Ne,{children:[(0,vh.jsx)(Te,{path:"/",element:n?(0,vh.jsx)(Ce,{to:"/tracker"}):(0,vh.jsx)(wh,{})}),(0,vh.jsx)(Te,{path:"/login",element:n?(0,vh.jsx)(Ce,{to:"/tracker"}):(0,vh.jsx)(Eh,{})}),(0,vh.jsx)(Te,{path:"/tracker",element:n?(0,vh.jsx)(Jh,{}):(0,vh.jsx)(Ce,{to:"/"})})]})}const ed=function(){return(0,vh.jsx)(bh,{children:(0,vh.jsx)(lt,{children:(0,vh.jsx)("div",{className:"App",children:(0,vh.jsx)(Xh,{})})})})},td=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:i,getFCP:r,getLCP:s,getTTFB:o}=t;n(e),i(e),r(e),s(e),o(e)})};t.createRoot(document.getElementById("root")).render((0,vh.jsx)(e.StrictMode,{children:(0,vh.jsx)(ed,{})})),td()})()})();
//# sourceMappingURL=main.14ca2744.js.map